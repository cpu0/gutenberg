AD-a: 

139 ( 

IMIIIIIIIII 

>78 ION PAGE 

Form Approvad 

OPMNo. 0704-0188 

PuMc fipofth 1 lllllll 1 

nMdtd.tfdfi III 

dquwiwt- MiiiiiN 

ManiQWMnti 

III ||||||! KM. Indudkig n* tflM tor WMWig iTHnictlon*. uwdVng wMng dMi wucM galwlng and mamunliig out 

III 1 III *'** coltctlon al Mormaloa Induing tuggtallont tor radulng ihk budan. to Waaltingayi 

la Highway. Sola 1204. Arlnilon. VA 22202-4302. and to thaOmrxot Mormailon and nagUaiory Attaira. Olllcaol 

1. AGENCY USE ONLY (Lmw Blank) 

2. REPORT DATE 

3 REPORT TYPE AND OATES COVERED 

Final: 11 Feb 1991 to OUun 1993 

4. TITLE AND SUBTITLE 

TeleSoft, TeleGen2 Ada Cross Development System Version 4.1, for VAXA/MS to 
MIPS, MicroVAX 3800 (Host) to IDT7R301 System (R3000/3010 bare 
machine)(Target), 91012311.11125 

5. FUNDING NUMBERS 

6. AUTHOR(S) 
lABG-AVF 

Ottobrunn, Federal Republic of Germany 

7. PERFORMING ORGANIZATION NAME(S) AND ADDRESS(ES) 

IABG-AVF, Industrieanlagen-Betriebsgeselschaft 

Dept. SZT/ Einsteinstrasse 20 

D-8012 Ottobrunn 

FEDERAL REPUBLIC OF GERMANY 

8. PERFORMING ORGANIZATION 

REPORT NUMBER 

lABG-VSR 088 

9. SPONSORINGAKONITORING AGENCY NAME(S) AND AODRESS(ES) 

Ada Joint Program Office 

United States Department of Defense 

Pentagon, Rm 3E114 

Washington, D.C. 20301-3081 

10. SPONSORINGAytONITOhlNG Ad^NCY 
REPORT NUMBER 

11 SUPPLEMENTARY NOTES 

12a. DISTRIBUTION/AVAILABIUTY STATEMENT 

Approved for public release; distribution unlimited. 

12b. DISTRIBUTION CODE 

13. ABSTRACT (Maximum 200 words) 

TeleSoft, TeleGen2, Ada Cross Development System , Version 4.1, for VAX/VMS to MIPS, Ottoboinn, Germany, 

MicroVAX 3800 (under VAX/VMS Version V5.2)(Host) to IDTR301 System (R3000/3010 bare machine)(Target), ACVC 

DTIC 

^flUG26 1991,Q 91-08751 

14 SUBJECT TERMS 

Ada programming language, Ada Compiler Val. Summary Report. Ada Compiler Val. 

Capability, Val. Testing, Ada Val. Office, Ada Val. Facility, ANSI/MIL-STD-1815A, AJPO. 

15. NUMBER OF PAGES 

16. PRICE CODE 

17 SECURITY CLASSIFICATION 

OF REPORT 

UNCLASSIFIED 

18 SECURITY CLASSIFICATION 19. SECURITY CLASSIFICATION 

nC AR<5TQAPT 

UNCLASSIFED UNCLASSIFIED 

20. LIMITATION OF ABSTRACT 



NSN 7540-01 280-550 


Standard Form 298, (Rev. 2-89) 
Prescribed by ANSI Std 239-128 


































Certificate Information 


The following Ada implementation was tested and determined to pass ACVC 
1.11. Testing was completed on 91-01-23. 


Coopller Name and Version: TeleGen2°‘ Ada Cross Development System, 

Version 4.1, for VAX/VMS to HIPS 

Host Con^uter System: MlcroVAX 3800 (under VAX/VMS Version V5.2} 

Target Conputer System: IOT7RS30 j. System (R3000/3010 bare machine) 


See Section 3.1 for any additional information about the testing 
environment. 

As a result of this validation effort. Validation Certificate 
#91012311.11125 is awarded to TeleSoft. This certificate 
expires on 01 March 1993. 


This report has been reviewed and is approved. 


lABG, Abt. ITE 
Michael Tonndorf 
Einsteihstr. 20 
W-8012 Ottobrunn 
Germany 



3n Organization 

imputer & Software Engineering Division 
Institute^or Defense Analyses 
Alexandria VA 22311 




Ada Joint Program Office 
Dr. John Solomond, Director 
Department of Defense 
Washington DC 20301 



Accession For 

NTI3 

3RA4I 

00^ 

DTI"' 

T 

□ 

I r-. 

! I c d 

□ 

Ju .f. 

1 c ;1 nn 

By - . 



Dlr.tr 

1 1 01 


A vv. 1 

i -J .; 11 

■r Codes 


AVni i 

and/OP 

DU^t 

S-:0C 

lal . 

. \ 


• ^ 

1 



r 













AVF Control Number: lABG-VSR 088 
11 February 1991 


Ada COMPILER 

VALIDATION SOMMARY REPORT: 
Certificate Number: 91012311.11125 
TeleSoft 

TeleGen2™ Ada Cross Development System 
Version 4.1, for VAX/VMS to MIPS 
MicroVAX 3800 => 

IDT7RS301 System (R3000/3010 bare machine) 


== based on TEMPLATE Version 91-01-10 == 


Prepared By: 
lABG mbH, Abt. ITE 
Einsteinstr. 20 
W-8012 Ottobrunn 
Germany 







Certificate Information 


The following Ada implementation was tested and determined to pass ACVC 
1.11. Testing was completed on 91-01-23. 


Compllar Hame and Version: TeleGen2™ Ada Cross Development System, 

Version 4.1, for VAX/VMS to MIPS 


Host Computer System: HicroVAX 3800 (under VAX/VMS Version V5.2) 

Target Computer System.: IDT7RS301 System (R3000/3010 bare machine) 


See Section 3.1 for any additional information about the testing 
environment. 

As a result of this validation effort. Validation Certificate 
#91012311.11125 is awarded to TeleSoft. This certificate 
expires on 01 March 1993. 


This report has been reviewed and is approved. 


XxlLi ' o^cLS. 

lABG, Abt. ITE 
Michael Tonndorf 
Einstelnstr. 20 
W-8012 Ottobrunn 
Germany 



Ada Va 
Directbr 
Institute f 
Alexandria VA 


dd Organization 

uter 4 Software Engineering Division 
'r Defense Analyses 
22311 


Ada Joint Program Office 
Dr. John Solomond, Director 
Department of Defense 
Washington DC 20301 




DECLARATION OF CONFORMANCE 


Customer; 

Ada Validation Facility: 

ACVC Version: 

Ada Implementation: 

Ada Compiler Name and Version; 

Host Computer System: 

Target Computer System: 


TeleSoft 

5959 Cornerstone Court West 
San Diego CA USA 92121 

lABG, Dept. ITE 
W-8012 Ottobrunn 
Germany 


1.11 


TeleGen2™ Ada Cross Development 
System, Version 4.1, VAX to MIPS 

Micro VAX 3800 

(under VAX/VMS Version V5.2) 

IDT7RS301 System 
{R3000/R3010 bare machine) 


Customer's Declaration 

I, the undersigned, declare that TeleSoft has no knowledge of 
deliberate deviations from the Ada Language Standard ANSI/M IL- 
STD-1815AlSp 8652-1987 in the implementation listed above. 



— Date: 1 i 

1 ^3 

' 

^ ( 





Raymond A. Parra 
Vice President 
General Counsel 



TABLE OF CONTENTS 


CHAPTER 1 INTRODUCTION 

1.1 USE OF THIS VALIDATION SUI-dMARY REPORT.1-1 

1.2 REFERENCES.1-2 

1.3 ACVC TEST CLASSES.1-2 

1.4 DEFINITION OF TERMS.1-3 

CHAPTER 2 IMPLEMENTATION DEPENDENCIES 

2.1 WITHDRAWN TESTS.2-1 

2.2 INAPPLICABLE TESTS . 2-1 

2.3 TEST MODIFICATIONS.2-4 

CHAPTER 3 PROCESSING INFORMATION 

3.1 TESTING ENVIRONMENT . 3-1 

3.2 SUMMARY OF TEST RESULTS. ,.3-2 

3.3 TEST EXECUTION.3-2 

APPENDIX A MACRO PARAMETERS 

APPENDIX B COMPILATION SYSTEM OPTIONS 

APPENDIX C APPENDIX F OF THE Ada STANDARD 















CHAPTER 1 


INTRODUCTION 


The Ada implementation described above was tested according to the Ada 
Validation Procedures [Pro90] against the Ada Standard [Ada83] using the 
current Ada Compiler Validation Capability (ACVC). This Validation Summary 
Report (VSR) gives an account of the testing of this Ada implementation. 

For any technical terms used in this report, the reader is referred to 
[Pro90] . A detailed description of the ACVC may be found in the current 
ACVC User's Guide [UG89]. 


1.1 USE OF THIS VALIDATION SUMMARY REPORT 

Consistent with the national laws of the originating country, the Ada 
Certification Body may make full and free public disclosure of this report. 
In the United States, this is provided in accordance with the "Freedom of 
Information Act" (5 U.S.C. #552). The results of this validation apply 
only to the computers, operating systems, and compiler versions identified 
in this report. 

The organizations represented on the signature page of this report do not 
represent or warrant that all statements set forth in this report are 
accurate and complete, or that the subject implementation has no 
nonconformities to the Ada Standard other than those presented. Copies of 
this report are available to the public from the AVF which performed this 
validation or from: 

National Technical Information Service 
5285 Port Royal Road 
Springfield VA 22161 

Questions regarding this report or the validation test results should be 
directed to the AVF which performed this validation or to: 

Ada Validation Organization 
Institute for Defense Analyses 
1801 North Beauregard Street 
Alexandria VA 22311 


1-1 





INTRODUCTION 


1.2 REFERENCES 

[Ada83] Reference Manual for the Ada Programming Language . 

ANSI/MIL-STD-1815A, February 1983 and ISO 8652-1987. 

[Pro90] Ada Compiler Validation Procedures . Version 2.1, Ada Joint 
Program Office, August 1990. 

[UG89] Ada Compiler Validation Capability User's Guide . 21 June 1989. 

1.3 ACVC TEST CLASSES 

Compliance of Ada implementations is tested by means of the ACVC. The ACVC 
contains a collection of test programs structured into six test classes: 

A, B, C, D, E, and L. The first letter of a test name identifies the class 
to which it belongs. Class A, C, D, and E tests are executable. Class B 
and class L tests are expected to produce errors at compile time and link 
time, respectively. 

The executable tests are written in a self-checking manner and produce a 
PASSED, FAILED, or NOT APPLICABLE message indicating the result when they 
are executed. Three Ada library units, the packages REPORT and SPPRT13, 
and the procedure CHECK_FILE are used for this purpose. The package REPORT 
also provides a set of identity functions used to defeat some compiler 
optimizations allowed by the Ada Standard that would circumvent a test 
objective. The package SPPRT13 is used by many tests for Chapter 13 of the 
Ada Standard. The procedure CHECK_FILE is used to check the contents of 
text files written by some of the Class C tests for Chapter 14 of the Ada 
Standard. The operation of REPORT and CHECK_FILE is checked by a set of 
executable tests. If these units are not operating correctly, validation 
testing is discontinued. 

Class B tests check that a compiler detects illegal language usage. Class 
B tests are not executable. Each test in this class is compiled and the 
resulting compilation listing is examined to verify that all violations of 
the Ada Standard are detected. Some of the class B tests contain legal Ada 
code which must not be flagged illegal by the compiler. This behavior is 
also verified. 

Class L tests check that an Ada implementation correctly detects violation 
of the Ada Standard involving multiple, separately compiled units. Errors 
are expected at link time, and execution is attempted. 

In some tests of the ACVC, certain macro strings have to be replaced by 
implementation-specific values — for example, the largest integer. A list 
of the values used for this implementation is provided in Appendix A. In 
addition to these anticipated test modifications, additional changes may be 
required to remove unforeseen conflicts between the tests and 
implementation-dependent characteristics. The modifications required for 
this implementation are described in section 2.3. 


1-2 




INTRODUCTION 


For each Ada implementation, a customized test suite is produced by the 
AVF. This customization consists of making the modifications described 
in the preceding paragraph, removing withdrawn tests (see section 2.1) and, 
possibly some inapplicable tests (see Section 2.2 and [UG89]). 

In order to pass an ACVC an Ada implementation must process each test of 
the customized test suite according to the Ada Standard. 


1.4 DEFINITION OF TERMS 

Ada Compiler The software and any needed hardware that have to be added 
to a given host and target computer system to allow 
transformation of Ada programs into executable form and 
execution thereof. 

Ada Compiler The means for testing compliance of Ada implementations. 
Validation consisting of the test suite, the support programs, the ACVC 

Capability user's guide and the template for the validation summary 

(ACVC) report. 

Ada An Ada compiler with its host computer system and its 

Implementation target computer system. 

Ada Joint The part of the certification body which provides policy and 

Program guidance for the Ada certification system. 

Office (AJPO) 

Ada The part of the certification body which carries out the 

Validation procedures required to establish the compliance of an Ada 
Facility (AVF) implementation. 

Ada The part of the certification body that provides technical 

Validation guidance for operations of the Ada certification system. 

Organization 
(AVO) 

Compliance of The ability of the implementation to pass an ACVC version, 
an Ada 

Implementation 

Computer A functional unit, consisting of one or more computers and 

System associated software, that uses common storage for all or 

part of a program and also for all or part of the data 
necessary for the execution of the program; executes 
user-written or user-designated programs; performs 
user-designated data manipulation, including arithmetic 
operations and logic operations; and that can execute 
programs that modify themselves during execution, A 
computer system may be a stand-alone unit or may consist of 
several inter-connected units. 


1-3 



INTRODUCTION 


Conformity 


Customer 


Declaration of 
Conformance 


Host Computer 
System 

Inapplicable 

test 

ISO 

Operating 

System 


Target 

Computer 

System 

Validated Ada 
Compiler 

Validated Ada 
Iirplementation 

Validation 


Withdrawn 

test 


Fulfillment by a product, process or service of all 
requirements specified. 

An individual or corporate entity who enters into an 
agreement with an AVF which s^iecifies the terms and 
conditions for AVF services (of any kind) to be performed. 

A formal statement from a customer assuring that conformity 
is realized or attainable on the Ada implementation for 
which validation status is realized. 

A computer system where Ada source programs are transformed 
into executable form. 

A test that contains one or more test objectives found to be 
irrelevant for the given Ada implementation. 

International Organization for Standardization. 

Software that controls the execution of programs and that 
provides services such as resource allocation, scheduling, 
input/output control, and data management. Usually, 
operating systems are predominantly software, but partial 
or complete hardware implementations are possible. 

A computer system where the executable form of Ada programs 
are executed. 


The compiler of a validated Ada implementation. 


An Ada implementation that has been validated successfully 
either by AVF testing or by registration [Pro90]. 

The process of checking the conformity of an Ada compiler to 
the Ada programming language and of issuing a certificate 
for this implementation. 

A test found to be incorrect and not used in conformity 
testing. A test may be incorrect because it has an invalid 
test objective, fails to meet its test objective, or 
contains erroneous or illegal use of the Ada programming 
language. 


1-4 





CHAPTER 2 


IMPLEMENTATION DEPENDENCIES 


2.1 WITHDRAWN TESTS 


The following tests have 

been withdrawn 

by the AVO 

The rationale for 

withdrawing each 

test is 

available from 

either the 

AVO or the 

AVF. The 

publication date 

for this 

list of withdrawn tests 

is 91-01-09, 


E28005C 

B28006C 

C34006D 

C35702A 

B41308B 

C43004A 

C45114A 

C45346A 

C45612B 

C45651A 

C46022A 

B49008A 

A74006A 

C74308A 

B83022B 

B83022H 

B83025B 

B83025D 

B83026B 

C83026A 

C83041A 

B85001L 

C97116A 

C98003B 

BA2011A 

CB7001A 

CB7001B 

CB7004A 

CC1223A 

BC1226A 

CC1226B 

BC3009B 

BD1B02B 

BD1B06A 

AD1B08A 

BD2A02A 

CD2A21E 

CD2A23E 

CD2A32A 

CD2A41A 

CD2A41E 

CD2A87A 

CD2B15C 

BD3006A 

BD4008A 

CD4022A 

CD4022D 

CD4024B 

CD4024C 

CD4024D 

CD4031A 

CD4051D 

CD5111A 

CD7004C 

ED7005D 

CD7005E 

AD7006A 

CD7006E 

AD7201A 

AD7201E 

CD7204B 

AD7206A 

BD8002A 

BD8004C 

CD9005A 

CD9005B 

CDA201E 

CE2107I 

CE2117A 

CE2117B 

CE2119B 

CE2205B 

CE2405A 

CE3111C 

CE3116A 

CE3118A 

CE3411B 

CE3412B 

CE3607B 

CE3607C 

CE3607D 

CE3812A 

CE3814A 

CE3902B 


2.2 INAPPLICABLE TESTS 

A test is inapplicable if it contains test objectives which are irrelevant 
for a given Ada implementation. Reasons for a test's inapplicability may 
be supported by documents issued by the ISO and the AJPO known as Ada 
Commentaries and commonly referenced in the format Al-ddddd. For this 
implementation, the following tests were determined to be inapplicable for 
the reasons indicated; references to Ada Commentaries are included as 
appropriate. 


2-1 



IMPLEMENT/.TION DEPENDENCIES 


The following 201 tests have floating-point type declarat_ons requiring 
more digits than SYSTEM.MAX_DIGITS: 


C24113L. 

.Y 

(14 

tests) 

C35705L. 

.Y 

(14 

tests) 

C35706L. 

.Y 

(14 

tests) 

C35707L. 

.Y 

(14 

tests) 

C35708L. 

.Y 

(14 

tests) 

C35802L. 

.Z 

(15 

tests) 

C45241L. 

. Y 

(14 

tests) 

C45321L. 

.Y 

(14 

tests) 

C45421L. 

. Y 

(14 

tests) 

C45521L. 

.Z 

(15 

tests) 

C45524L. 

.Z 

(15 

tests) 

C45621L. 

.z 

(15 

tests) 

C45641L. 

. Y 

(14 

tests) 

C46012L. 

.z 

(15 

tests) 


The following 21 tests check for the predefined type LONG_INTEGER: 


C35404C 

C45502C 

C45612C 

B52004D 

CD7101F 


C45231C 

C45503C 

C45613C 

C55B07A 


C45304C 

C45504C 

C45614C 

B55B09C 


C45411C 

C45504F 

C45631C 

B86001W 


C45412C 

C45611C 

C45632C 

C86006C 


C35508I..J and C35508M..N (4 tests) include enumeration representation 
clauses for Boolean types in which the specified values are other than 
(FALSE «> 0, TRUE => 1); this implementation does not support a change 
in representation for Boolean types. (See section 2.3.) 

C35713B, C45423B, B86001T, and C86006H check for the predefined 
type SHORT_FLOAT. 

C35713D and B86001Z check for a predefined floating-point type with a 
name other than FLOAT, LONG_FLOAT, or SHORT_FLOAT. 

C45531M..P (4 tests) and C45532M..P (4 tests) check fixed-point 
operations for types that require a SYSTEM.MAX_MANTISSA of 47 or 
greater. 

C45536A, C46013B, C46031B, C46033B, and C46034B contain length clauses that 
specify values for 'SMALL that are not powers of two or ten; this 
implementation does not support such values for 'SMALL. 

C45624A..B (2 tests) check that the proper exception is raised if 
MACHINE_OVERFLOWS is FALSE for floating point types; for this 
implementation, MACHINE_OVERFLOWS is TRUE. 

C86001F recompiles package SYSTEM, making package TEXT_IO, and hence 
package REPORT, obsolete. For this implementation, the package TEXT_IC 
is dependent upon package SYSTEM. 

B86001Y checks for a predefined fixed-point type other than DURATION. 

CA2009C, CA2009F, BC3204C, and BC3205D check whether a generic unit can 
be instantiated BEFORE its generic body (and any of its subunits) is 
compiled. This implementation creates a dependence on generic units 
as allowed by AI-00408 and AI-00530 such that the compilation of the 
generic unit bodies makes the instantiating units obsolete. (See 
section 2.3) 

LA3004A..B (2 tests), EA3004C..D (2 tests), and CA3004E..F (2 tests) 


2-2 





IMPLEMENTATION DEPENDENCIE 


check for pragma INLINE for procedures and functions. 

CD1009C uses a representation clause specifying a non-default size 
for a floating-point type. 

CD2A84A, CD2A84E, CD2A84I..J (2 testa), and CD2A840 use representation 
clauses specifying non-default sizes for access types. 

The tests listed in the following table are not applicable because the 
given file operations are supported for the given combination of mode 
and file access method. 


Test 

File Ooeration 

Mode 

File Access Method 

CE2102D 

CREATE 

IN FILE 

SEQUENTIAL 10 

CE2102E 

CREATE 

OUT FILE 

SEQUENTIAL 10 

CE2102F 

CREATE 

INOUT FILE 

DIRECT 10 

CE2102I 

CREATE 

IN FILE 

DIRECT 10 

CE2102J 

CREATE 

OUT FILE 

DIRECT 10 

CE2102N 

OPEN 

IN FILE 

SEQUENTIAL 10 

CE2102O 

RESET 

IN FILE 

SEQUENTIAL 10 

CE2102P 

OPEN 

OUT FILE 

SEQUENTIAL 10 

CE2102Q 

RESET 

OUT_FILE 

SEQUENTIAL 10 

CE2102R 

OPEN 

INOUT FILE 

DIRECT 10 

CE2102S 

RESET 

INOUT FILE 

DIRECT 10 

CE2102T 

OPEN 

IN FILE 

DIRECT 10 

CE2102U 

RESET 

IN FILE 

DIRECT 10 

CE2102V 

OPEN 

OUT FILE 

DIRECT 10 

CE2102W 

RESET 

OUT FILE 

DIRECT 10 

CE3102E 

CREATE 

IN FILE 

TEXT 10 

CE3102F 

RESET 

Any Mode 

TEXT 10 

CE3102G 

DELETE 


TEXT 10 

CE3102I 

CREATE 

OUT_FILE 

TEXT 10 

CE3102J 

OPEN 

IN FILE 

TEXT 10 

CE3102K 

OPEN 

OUT FILE 

TEXT 10 


CE2107B..E (4 tests), CE2107L, CE2110B, and CE2111D attempt to associate 
multiple internal files with the same external file when one or more files 
is writing for sequential files. The proper exception is raised when 
multiple access is attempted. 

CE2107G..H (2 tests), CE2110D, and CE2111H attempt to associate multiple 
internal files with the same external file when one or more files is 
writing for direct files. The proper exception is raised when multiple 
access is attempted. 


CE2203A checlcs that WRITE raises USE_ERROR if the capacity of the 
external file is exceeded for SEQUENTIAL_IO. This implementation does 
not restrict file capacity. 


CE2403A chec)cs that WRITE raises USE_ERROR if the capacity of the 
external file is exceeded for DIRECT_IO. This implementation does not 
restrict file capacity. 


CE3111B, 
multiple 
files is 


CE3111D..E (2 tests), CE3114B, and CE3115A attempt to associate 
internal files with the same external file when one or more 
writing for text files. The proper exception is raised when 


2-3 











IMPLEMENTATION DEPENDENCIES 


multiple access is attempted. 

CE3304A checks that USE_ERROR is raised if a call to SET_LINE_LENGTH or 
SET_PAGE_LENGTH specifies a value that is inappropriate for the external 
file. This implementation does not have inappropriate values for either 
line length or page length. 

CE3413B checks that PAGE raises LAYOUT_ERROR when the value of the page 
number exceeds COUNT'LAST. For this implementation, the value of 
COUNT'LAST is greater than 150000 making the checking of this objective 
impractical. 


2.3 TEST MODIFICATIONS 

Modifications (see section 1.3) were required for 26 tests. 

C35508I..J and C35508M..N (4 tests) were graded inapplicable by Evaluation 
Modification as directed by the AVO. These tests attempt to change the 
representation of a boolean type. The AVO ruled that, in consideration of 
the particular nature of boolean types and the operations that are defined 
for the type and for arrays of the type, a change of representation need 
not be supported; the ARG will address this issue in Commentary AI-00564. 

The following tests were split into two or more tests because this 
implementation did not report the violations of the Ada Standard in the way 
expected by the original tests. 

BAIOOIA BA2001C BA2001E BA3006A BA3006B 

BA3007B BA3008A BA3008B BA3013A 


CA2009C, CA2009F, BC3204C, and BC3205D were graded inapplicable by 
Evaluation Modification as directed by the AVO. Because the implementation 
makes the units with instantiations obsolete (see section 2.2), the Class C 
tests were rejected at link time and the Class B tests were compiled 
without error. 

CD1009A, CD1009I, CD1C03A, CD2A21C, CD2A22J, CD2A24A, and CD2A31A..C 
(3 tests) use instantiations of the support procedure Length_Check, which 
uses Unchecked_Conversion according to the interpretation given in 
AI-00590. The AVO ruled that this interpretation is not binding under ACVC 
1.11; the tests are ruled to be passed if they produce Failed messages only 
from the instantiations of Length_Check—i.e., the allowed Report.Failed 
messages have the general form: 

" * CHECK ON REPRESENTATION FOR <TYPE ID> FAILED." 


2-4 






CHAPTER 3 


PROCESSING INFORMATION 


3.1 TESTING ENVIRONMENT 

The Ada implementation tested in this validation effort is described 
adequately by the information given in the initial pages of this report. 

For a point of contact for both technical and sales information about this 
Ada implementation system, see: 


TeleSoft 

5959 Cornerstone Court West 
San Diego, CA 921219, USA 
(619) 457-2700 


Testing of this Ada implementation was conducted at the customer's site by 
a validation team from the AVF. 


3-1 








PROCESSING INFORMATION 


3.2 SUMMARY OF TEST RESULTS 

An Ada Inplementation passes a given ACVC version if it processes each test 
of the customized test suite in accordance with the Ada Programming 
Language Standard, whether the test is applicable or inapplicable; 
otherwise, the Ada Implementation fails the ACVC [Pro90] . 

For all processed tests (inapplicable and applicable), a result was 
obtained that conforms to the Ada Programming Language Standard. 


a) Total Number of Applicable Tests 3880 

b) Total Number of Withdrawn Tests 84 

c) Processed Inapplicable Tests 105 

d) Non-Processed I/O Tests 0 

e) Non-Processed Floating-Point 

Precision Tests 201 


f) Total Number of Inapplicable Tests 306 (c+d+e) 

g) Total Number of Tests for ACVC 1.11 4170 (a+b+f) 


All I/O tests of the test suite were processed because this in^lementation 
supports a file system. The above number of floating-point tests were not 
processed because they used floating-point precision exceeding that 
supported by the implementation. When this compiler was tested, the tests 
listed in section 2.1 had been withdrawn because of test errors. 


3.3 TEST EXECUTION 

Version 1.11 of the ACVC comprises 4170 tests. When this compiler was 
tested, the tests listed in section 2.1 had been withdrawn because of test 
errors. The AVF determined that 301 tests were inapplicable to this 
implementation. All inapplicable tests were processed during validation 
testing except for 201 executable tests that use floating-point precision 
exceeding that supported by the implementation. In addition, the modified 
tests mentioned in section 2.3 were also processed. 

A magnetic tape containing the customized test suite (see section 1.3) was 
ta)ten on-site by the validation team for processing. The contents of the 
magnetic tape were loaded directly onto the host computer. 

After the test files were loaded onto the host computer, the full set of 
tests was processed by the Ada implementation. 

The tests were compiled and lin)ced on the host computer system, as 
appropriate. The executable images were transferred to the target computer 
system by a serial communications link, and run. The results were captured 
on the host computer system. 

Test output, compiler and linker listings, and job logs were captured on a 
magnetic tape and archived at the AVF. The listings examined on-site by 
the validation team were also archived. 


3-2 




PROCESSING INFORMATION 


Testing wiiS performed using command scripts provided by the customer and 
reviewed by the validation team. See Appendix B for a complete listing of 
the processing options for this implementation. It also indicates the 
default options. The options invoked explicitly for validation testing 
during this test are given on the next page, which was supplied by the 
customer. 


3-3 






Compiler Option Information 


B TESTS: 

tsada/mips/ada/monitor/machine/enable/list <test name> 


option 

description 

tsada 

invoke Ada compilation system 

mips 

specify the mips target 

ada 

compile the test 

monitor 

verbose mode, output pass info during compilation 

machine 

generate assembly code listing 

enable 

enable traceback for unexpected errors 

<te8t name> name of Ada source file to be compiled 


All Executable TESTS; 

tsada/mips/ada/monitor/machine/bind <test_name> 


option 

description 

tsada 

invoke Ada compilation system 

mips 

specify the mips target 

ada 

compile the test 

monitor 

verbose mode, output pass info during compilation 

machine 

generate assembly code listing 

bind 

bind unit 

<test name> 

name of Ada source file to 


LINK: 

tsada/mips/link/execute form/monitor/map, opl = lmips.opt/ enable < main unit> 


option 

description 

tsada 

invoke Ada compilation system 

mips 

specify the mips target 

link 

link executable 

execute form specify output format 

monitor 

verbos mode, output pass info during compilation 

map 

generate link map listing 

opt 

specify linker options file 

enable 

enable traceback for unexpec ed 

<main unit> name of main compilation unit 


3-4 











APPENDIX A 


MACRO PARAMETERS 


This appendix contains the macro parameters used for customizing the ACVC. 
The meaning and purpose of these parameters are explained in [UG89]. The 
parameter values are presented in two tables. The first table lists the 
values that are defined in terms of the maximum input-line length, which is 
the value for $MAX_IN_LEN—also listed here. These values are expressed 
here as Ada string aggregates, where "V represents the maximum input-line 
length. 

Macro Parameter Macro Value 


SMAX_IN_LEN 

200 — 

Value of 

■ V 

SBIG_ID1 

(1..V-1 

=> 'A', 

f—1 

A 

II 

> 

$BIG_ID2 

(1..V-1 

=> 'A', 

< 

II 

V 

$B1G_ID3 

(1..V/2 

-> 'A') 

& ' 3' & 


(1. . 

.V-l-V/2 

II 

V 

> 

$BIG_ID4 

(1..V/2 

«> 'A') 

& ' 4' & 


<1. . 

, V-l-V/2 

< 

A 

II 

$BIG_INT_LIT 

<1..V-3 

u 

V 

o 

& "298" 

$BIG REAL LIT 

(1..V-5 

=> '0') 

& "690.0" 


$BIG STRINGl & (1..V/2 -> 'A') & 


$BIG_STRING2 & (1..V-1-V/2 -> 'A') & '1' & 

SBLANKS (1..V-20 => ' ' ) 

$MAX_LEN_INT_BAS ED_LITERAL 

”2;" & (1..V-5 “> '0') & "11: " 

$MAX_LEN_REAL_BASED_LITERAL 

"16:” & (1..V-7 => '0') & "F.E:" 

$MAX_STRING_LITERAL "CCCCCCC10CCCCCCCC20CCCCCCCC30CCCCCCCC40 

CCCCCCCC50CCCCCCCC 6 0CCCCCCCC7 OCCCCCCCC 8 0 
CCCCCCCC 9 OCCCCCCC100CCCCCCC110CCCCCCC120 
CCCCCCC130CCCCCCC140CCCCCCC150CCCCCCC160 
CCCCCCC170CCCCCCC180CCCCCCC190CCCCCC199" 


A-1 



MACRO PARAMETERS 


The followi.ig table lists all of the other macro parameters and their 
respective values. 

Macro Parameter Macro Value 

$ACC_S1ZE 32 

SALIGNMENT 4 

$COUNT_LAST 2_147_483_646 

$DEFAULT_MEM_SIZE 2147483647 

$DEFAULT_STOR_UNIT 8 

$DEFAULT_SYS_NAME TELEGEN2 

$DELTA_DOC 2#1.0#E-3l 

$ENTRY_ADDRESS INTERRUPTl 

$ENTRY_ADDRESS1 INTERRUPT2 

$ENTRY_ADDRESS2 INTERRUPTS 

SFIELD_LAST 1000 

$FILE_TERMINATOR ASCII.EOT 

$FIXED_NAME NO_SUCH_TYPE 

$FLOAT_NAME NO_SUCH_TYPE 

$FORM_STRING 

$FORM_STRING2 "CANNOT_RESTRICT_FILE_CAPACITY" 

$GREATER_THAN_DURATION 

100 _ 000.0 

SGREATER_THAN_DURATI0N_BASE_LAST 

131_073.0 

SGREATER_THAN_FL0AT_BASE_LAST 

3.9E+39 

$GREATER_T HAN_F LOAT_S AF E_LARGE 

1.0Et33 

$GREATER_THAN SHORT_FLOAT_SAFE_LARGE 

O .0 

SHiGh_PRIORITY 63 

$ILLEGAL EXTERNAL FILE NAMEl 


A-2 





MACRO PARAMETERS 


BADCHAR*"/% 

$ILLEGAL_EXTERNAL_FILE_NAME2 

/NONAME/DIRECTORY 

$INAPPROPRIATE_LINE_LENGTH 

-1 

SINAP P ROP RIATE_P AGE_LENGT H 

-1 

$INCLUDE_PRAGMA1 PRAGMA INCLUDE ("A28006D1.ADA") 

$INCLUDE PRAGMA2 PRAGMA INCLUDE ("B28006D1.ADA") 


$INTEGER_FIRST 

-2147483648 

$INTEGER_LAST 

2147483647 

$INTEGER_LAST_PLUS_1 

2147483648 

$INTERFACE_LANGUAGE 

C 

$LESS_THAN_DURATION 

-100_000.0 

$LESS THAN DURATION BASE FIRST 

-131_073.0 

S LINE_TERMINATOR 

ASCII.CR 

$LOW_PRIORITY 

0 

$MACHINE CODE STATEMENT 

MCI' <addi,r0,r0,0) ; 

SMACHINE_CODE_TYPE 

MCI 

$MANTISSA_DOC 

31 

SMAX_DIGITS 

15 

$MAX_INT 

2147483647 

$MAX_INT_PLUS_1 

2_147_483_648 

$MIN_INT 

-2147483648 

$NAME 

SHORT_SHORT_INTEGER 

$NAME_LIST 

TELEGEN2 

$NAME_SPECIFICATIONl 

/tmp/X2120A 

SNAME_SPECIFICATION2 

/tmp/X2120B 

SNAME_SPECIFICATION3 

/tmp/X3119A 


A-3 




MACRO PARAMETERS 


SNEG_BASED_INT 

16#FFFFFFFE# 

$NEW_MEM_SIZE 

2147483647 

$NEW_SYS_NAME 

TELEGEN2 

SPAGE_TERMINATOR 

ASCII.FF 

$RECORD_DEFrNITION 

RECORD NULL; END RECORD; 

SRECORD_NAME 

NO_SUCH_MACHINE_CODE_TYPE 

$TASK_SIZE 

32 

$ TAS K_S TORAGE_SIZ E 

4096 

STICK 

0.01 

$VARIABLE_ADDRESS 

ADDRESSl 

SVARIABLE_ADDRESS1' 

ADDRESS2 

$VARIABLE_ADDRESS2 

ADDRESS3 


A-4 




APPENDIX B 


COMPILATION SYSTEM AND LINKER OPTIONS 


The compiler and linker options of this Ada implementation, as described in 
this Appendix, are provided by the customer. Unless specifically noted 
otherwise, references in this appendix are to compiler documentation and not 
to this report. 


B-1 






TELESOFT 


TeleGen2 Ada Development System 

for VAX®/VMS® Systems 

to Embedded MIPS R2000/R3000 
Targets 


Compiler Command Options 


OPT-1744N-V1.1(VAX.MIPS) 16NOV90 


Version 4.01 



Copyright© 1990. TeleSoft. All rights reserved. 

TeieSoft* is a registered trademark of TeleSoft. 

TeleGen2’*^ is a trademark of TeleSoft. 

VAX* and VMS* are registered trademarks of Digital Equipment Corp * 


RESTRICTED RIGHTS LEGEND 

L sc. duplication, or disclosure by the Government is subject to restrictions as set forth in 
subparagraph (c) (1) (ii) of the rights in Technical Data and Computer Software clause at 
dear ZSZ-IIT'-OIS, or FAR 52.227-14, ALT III and/or FAR 52.227-19 as set forth in the 
applicable Government Contract. 


TeleSoft 

5'>5‘i> Cornerstone Court West 
San Diego. CA 92121-9819 
(619) 457-2700 
(Contractor) 





Chapter 1 Contents 


l Compiler command options 

1.1 ADA . 

l: bind. 

1.3 LINK .. 

1 4 Linker options file ... 

1.4.1 Options file format. 

1 4.2 Linker Options and their Qualifiers 

1.4 3 Required svTnbol assignments . 

1.4.4 E.xample options file . 


1-1 



1-32 

1-32 

l-.'3 

1-30 


1-40 













LINK 


TeleGen2 for VAX/VMS-MIPS 






1 

Compiler command options 


1.1. ADA 

[CompUer] 

Introduction 

After access to TeleGen2 has been established and a library has been 
created, you can invoke the Ada compiler via the ADA command. The 
general command format for compilation is 


TSADA/MIPS/ADA/[<qualifier>[,...)] <file> 


where 

<qualif ier> One of the qualifiers available tor the compiler 

<f ile> One in a possible series of file specifications. 

separated by commas, indicating the unu(s) to be 
compiled. If /I.VPLT_LIST is used. <fiie> is 
interpreted as a file containing a list of files to be 
compiled. The default source file type is .AD.A. 
and the default list file type is .LIS. A file name 
may be qualified with a location in standard 
VA.X/ VMS format. A source or input list file may 
reside on any directory in the system. 

The default qualifier settings are designed to allow for the simplest and 
most convenient use of the compiler. For most applications, no 
additional qualifier setting need be specified. However, optional 
qualifiers are provided to perform special functions. 


()KT-f44N.\ l.l(\ aX.MIPS) 16N()\9II 


II 







ADA 


Te eGena for VAX/VMS-MIPS 


Qualifiers 

/ABORT_COUNT=<n> 

/ABORT_COUNT=999 (default) 

The /AB0RT_C0L'NT qualifier is an execution control qualifier for 
the compiler. It allows you to set the maximum number of errors the 
compiler can locate before it aborts. This qualifier can be used with 
any combination of compiler options. The minimum value is 1 and the 
default value is 999. 

The compiler maintains separate counts of all symtactic errors, 
semantic errors, and warning messages issued during a compilation. If 
any of these counts becomes too great, you may want to abort the 
compilation. If the compiler does find errors, you can abort the 
compilation by entering control-Y ("Y) or you can wait until the 
checking is completed. The / ABORT_COUNT qualifier allows you to 
determine the number of errors that you believe is reasonable before 
the compiler aborts. 

/ASSEMBLY_COOE(= <file>] 

/NOASSEMBLY_CODE (default) 

With the /ASSEMBLY_CODE qualifier, you can obtain an assembly 
listing of compiler generated code for a unit or a collection. You can 
use this qualifier with the compiler, the binder and the optimizer in the 
same way. The listing is similar to that produced with the 
,'.VtACHLN'E_CODE qualifier, except that it will not contain location 
or offset information. The file produced with the 
/.ASSEMBLY CODE qualifier is suitable as input to an assembler In 
contrast, the fUe produced by / MACHlNE_CODE is more suitable 
for human readability. The default file name is the same as it would be 
for /.MACHINE CODE, i.e., the unit name being compiled. 

/ASSEMBLY_CODE and /MACHINE_CODE are mutuaUy 
exclusive. 

/BINDS < main >[<qualifier>] 

/NOBIND (default) 

This qualifier, when used with the compiler, enables you to bind a 
main program more efficiently by combining the binding process with 
the compilation proces.s This feature is especially useful when 
compiling single-unit test programs. The binding of more than one 
mam program is not supported, though programs that contain multiple 
compilation units may be bound 


()HT-r44\-\ l.ltVA.X.MIHS' IhSOX*^) 


Command options 


ADA 


Default settings for the qualifier values were chosen for the simplest 
and most convenient use of the binder. For most applications, no 
additional qualifiers are required. Optional qualifiers are provided, as 
shown in the following list: 


; DEBUG 


Bind the program for use with the 
debugger 


/PRORLE 


Bind the program for use with the 
profiler 


/UBRLE 


Specifv' a librarv other than the default 
LIBLST.ALB. ' 


/TEMPLIB 


Specify a librarv other than the default 
LIBLST..-M-B. ' 


/SHOW TASK_EXCEPnON Cause unhandled exceptions in tasks to 

be reported in the same manner as those 
that occur in the main program. 

/TASK_STACK_SIZE Set the default amount of stack to allocate 

from the Ada heap for each task. 

/STACK_GU,ARD_SIZE Specify- the amount of additional stack 

space to allocate (in addition to 
/TASK_STACK_S1ZE) for each task 


/TRACEBACK 


Set the depth of the run-time exception 
traceback report. 


/CONTEXT=<n> 

/CONTEXT=1 (default) 

When an error message is output, it is helpful to include the lines of 
the source program that surround the line containing the error. These 
lines provide a context for the error tn the source program and help to 
clarify the nature of the error. The .- CONTEXT qualifier controls the 
number of source lines that immediately precede and follow the error. 
The qualifier affects the error messages output on SYSSOUTPLT or 
in a listing. In a mixed listing, the context lines w ill be duplicated. I n a 
listing using /NOMIXED. the context lines will be included for each 
error listed after the complete source listing. The default setting for 
this qualifier is 1 


onr-rauN-vi.iiNxx.Mipsi 



ADA 


TeleGen2 for VAX/VMS-MIPS 


Note: The maLn program urtit must be located in the working sublibrary 
If this is not the case, reorder the sublibraries in the library file or 
use TSADA/MIPS/ MOVE or TSADA, .MIPS/ COPY to move 
or copy the unit to the working sublibrary. 

If these conditions are met. you may proceed to bind and link the 
program. 

/DEBUG 

/NODEBUG (default) 

To use the debugger, you must compile, bind, and link program units 
using the / DEBUG qualifier. This ensures that source debugging 
information and a link map are put into the Ada library for use by the 
debugger. The / DEBUG qualifier causes the compiler to save High 
Form for debugging purposes. It also causes the compiler to generate 
Debugging Information (DI) for any unit that is to be used with the 
debugger. 

Because this qualifier is positional, the debug information is generated 
only for the specified files. For e.xample. 

$ TSADA/MIPS/ADA A.B/DEBUG,C 

compiles .A.ADA and B.AD.A without debugging information, and 
compiles C.ADA with debugging information. For information on 
positional qualifiers, see the Oveniew. 

The default setting of this qualifier is /NODEBUG. The use of 
/DEBUG ensures that the High Form and debugger information for 
secondary units are not deleted. While the compilation time overhead 
generated by use of /DEBUG is minimal, retaining this optional 
information in the Ada Library increases the space overhead. To 
check if a compilation unit has been compiled using / DEBUG, use the 
TS.ADA/ MIPS/SHOW/E.XTENT)ED command for the unit. 

/DIAGNOSTICS[=<file>] 

/NOOIAGNOSTICS (default) 

If warnings or errors are encountered during compilation, this qualifier 
specifies that the compiler or binder is to produce a diagnostics file 
(with the file type DlA) This file contains information that allows 
you to use the VAX Language Sensitive Editor (LSE) to quickly 
correct source errors. .More information can be found in the LSE 
manual. 

This qualifier is positional, so the location ot the command and its 
parameters on the command line is important Only diagnostics files 
lor the specified files are generated. 


.4 


<)PT-|T44N-\ I.IA W.MIPm I AM )\ VO 




Command options 


ADA 


/ENABLETRACEBACK 
/NOENABLE TRACEBACK (default) 

In the unlikely event that you should receive an Unexpected Error 
Condition message, you should contact Customer Support. Customer 
Support may request that you provide additional intormation about the 
error condition by including the / ENABLE_TRACEBACK qualilier 
in the compiler invocation that tails. This qualilier allows the tool to 
display the exception traceback associated with the unexpected error 
condition. The information provided in the traceback will allow 
Customer Support to diagnose the problem more efficiently 

/GRAPH (=<file>] 

/NOGRAPH (default) 

The 'GR.APH qualifier is used with the optimizer while compiling, and 
it generates a textual representation call graph for the unit being 
compiled and optimized. This qualifier is positional, so the location of 
the command and its parameters on the command line is important. 
The specified parameters for /GRAPH are the graph files to be 
generated. For instance, the command 

tsada/mips/ada a.b/graph. c 

compiles A..ADA. then sends a graph to B.GRF, then compiles 
C..ADA. For information on positional qualifiers, see the Chenie^^ . 

The default setting is /NOGR,APH. If you specify graph, the following 
file specifications can result: 

<f iLe> .A name you specify for the file to which the 
generated graph is sent, 

<unit>. GRF .A name provided for the file by default, where 
< unit > is the name of the unit being compiled 
when optimizing during compilation. 

If multiple units are being compiled and optimized, and call graphs are 
desired. /GRAPH should be used without specifying a tile name. The 
graph for each unit will be located in a separate file named after the 
unit. If you specify a < file >. separate versions of the file will be 
created for each unit. 


<)fnr-rj4N-\I ii\a.\,mipsi 


IftNOXtWI 


1-5 






AO 4 


TeleGen2 for VAX/VMS-MIPS 


/INPUT UST 
/NOINPIiT UST (default) 

As a default, the file list specified in the TSAD.A, .MIPS command is 
the list of specifications of the files containing the .Ada units to be 
compiled. When you specify the , I.NTLT_L1ST qualifier, the compiler 
assumes that the command contains one file specification, and that this 
file contains a list of source files to be compiled. When this qualifier is 
used, the input file should contain the source file specifications, one 
per line. For example, to compile source files C.ALC_.ARJTH..ADA 
and CALC_ME.M.ADA in the current default directory and file 
CALC lO.ADA in directory [CIOSRC]. you could first prepare a file 
CALC_CO.MPILE.LIS containing the foLowmg text: 

CALC_ARITH 
CALC~MEM 
[CIOSRC]CALC_IO 

The command; 

$ TSADA/MIPS/ADA/INPUT_LIST CALC_COMPILE.LIS 
would then cause these three files to be compiled in sequence. 

In addition to the names of the source files, the input list may contain 
comments in Ada syntax, i.e,. aU text on a line including and following 
the comment marker ■ will be ignored. 

/LVPLT_LIST is a positional qualifier. The specified parameters are 
input lists, and all other parameters are source files. For example, the 
command line 

$ TSADA/MIPS/ADA A.B/INPUT_L1ST.C 

compiles A..ADA first. It then compiles ail files in B.LIS. and finally, it 
compiles C.ADA. 

/l.VPLT LIST has the same advantages and effects as a multi-file 
compilation specified on the command line. , INTLT_LIST is useful 
when a long list of files to compile has been readJy obtained from a 
directory listing or a TSADA, MIPS- SHOW library report. 

When the /INPLT LIST qualifier is used in conjunction with the 
default /UPDATE qualifier, the working sublibrary is updated after 
each unit that successfully compiles. If a unit in the list fails to compile 
due to errors, the sublibrary is still updated for all other successfully 
compiled umts before and after it in the list. If /NOUPDATE is used, 
the sublibrary is not updated tor any unit if one unit fails to compile. 


I h 


OHTrJ4N-\ 1 l-WN.MIPSi lf.M)\VO 







Command options 


ADA 


If the /BIND qualifier is used in conjunction with the , INTLT LIST 
qualifier, the mam program unit name may be given as the value ot the 
/BIND qualifier to identifv’ which unit in the list is the main program. 

If not specified, the last unit of the input list is assumed to be the mam 
program. 

/UBFILE=<rile> 

/UBFILE = UBLST.ALB (default) 

By default, the library file named LIBLST with a default type of .A.LB 
is used by the TeleGenZ tool set to determine which set of sublibraries 
are to be referenced durmg the operation of the tool. This file must be 
present in the working directory. With the /LIBFILE qualifier, you 
can specify- a library other than the default. LIBLST.ALB. TEMPLIB 
may also be used to create an alternative library. However, the 
, TEMPLIB and /LIBFILE qualifiers are mutually exclusive, only one 
or the other qualifier may be used at the same time. 

When you specify the /LIBnLE qualifier, you indicate the file 
specification of an alternative library file that contains the list of 
sublibraries and optional comments. If you do not specify a file type 
with the file name, the system uses the file type .ALB. 

For example, consider a library file named WORKLIB.ALB with the 
contents: 

Name: MYWORX 

Name: [CALCPROJ]CALCLIB 

Name; TSaDABMIPS;(LIB.R3000]RTL 


You could specify- 

S TSADA/KIPS/ADA/LIBFILE-WORKLIB 

.As an .alternative to usmg /LIBREE. you may assign the library file 
specification to the logical name LIBLST For example. 

S ASSIGN UORKLIB.ALB LIBLST 

/UST=<file> 

/NOUST=<tile> (default) 

The / LIST qualifier to the /.ADA compiler command produces a file 
containing a source listing with numbered lines and any error 
messages This qualifier is positional, so the location of the qualifier 
.ind its parameters on the command line is important. .A list will onlv 
be generated for the specified parameters. 

The compiler always outputs error messages to the device specified by 
S\ SSOLTPLT The , LIST qualifier causes the error listing to he 


<)PT-l*44\.\ l.l(\ AX.MIPSi I6N()\9(I 




ADA 


TeleGen2 for VAX/VMS-MIPS 


mcorporated in the source Listing file as well. The default listing 
contains the errors intermixed with the source code. 

You can provide a file specification to the /LIST qualifier which 
indicates the VMS file to receive the error output. 

The default is for /LIST is /NOLIST. The /NOLIST qualifier wUl 
suppress error output to the listing file. 

If the /LIST qualifier is used without a file specification, the error 
output is sent to the file named < file > LIS. where <file> is the name 
of the source file being compiled. If you provide a file specification, 
the output is sent to the specified fUe instead of < file > LIS. If your 
file specification does not include a file type, the system gives the file 
the type. LIS. 

If a file name is specified and multiple source files are being compiled, 
the listing for each file is output to a separate version of the file name 
specified. 

/MACHINE CODE[=:<tile>] 

/NOMACHINE COOE (default) 

The /MACHIN'E_C0DE qualifier aUows you to obtain an assembly 
listing of the code that the compiler generates for a unit or a collection. 
The listing consists of assembly code intermixed with source code as 
comments. Note that the listing generated by this qualifier is 
independent of the source/error listing generated by the / LIST 
qualifier. The default for this qualifier is/NOMACHIN'E CODE 

The listing output is sent to a file named <unit>_.S if the unit is a 
library unit, and < unit > S if the unit is a secondary unit. < unit > is the 
name of the compilation unit that is being listed . 

If multiple compilation units are being compiled and you have provided 
a file specification, the machine code listing for each compilation unit 
will be output to a different version of the same file name. 

If the compilation unit name is longer than 39 characters, the name will 
be truncated at 39 characters. .No listing will be generated if there are 
syntactic or semantic errors in the compilation. 


I-H 


on’-raasA I 1 (\a\.mipsi i6No\'>n 






Command options 


ADA 


/MONITOR 

/NOMONITOR (default) 

Normally, the only visible output produced by the TeleGenZ tool set 
during operation is error or warning messages The MONITOR 
qualifier enables the reporting of version numbers and messages that 
allow you to monitor the tool’s progress. Vv'hen you specify 
/MONITOR, the output is sent to standard output (SVSSOLTPLT), 

/OBJECT (default) 

/NOOBJECT 

The /NOOBJECT qualifier instructs the compiler to perform syntactic 
and semantic analysis of the source program without generatine object 
code. /NOOBJECT sets a default of /.NOSQL’EEZE to ensure that 
the High Form and Low Form are preserved for secondary units. The 
default setting is /OBJECT, which allows the generation of object 
code, 

/0PT1MI2E[= < option > [,...]]!< qualifier > ] 

/NOOPTIMIZE (default) 

The /OPTIMIZE qualifier causes the compiler to invoke the 
optimizer to optimize the Low Form generated by the middle pass tor 
the unit being compiled. The code generator takes the optimized Low’ 
Form as input and produces more efficient object code, 

/NOOPTIMIZE is the default. The /NOOPTIMIZE qualifier gives 
the quickest compilation turnaround, but does not perform many code 
optimizations. This results in code that may run slower and be larger 
than normal. Code intended for use with the Debugger must be 
compiled at this level of optimization. 

This qualifier is positional, so the location of the qualifier and its 
parameters is important. /OPTIMIZE wUJ only optimize the specified 
parameters. For example, the qualifier may appear on both on the 
verb that is changing the default and on one or more parameters. The 
verb qualifier indicates that all parameters w ill be optimized. The 
parameter qualifier indicates that Y is not to be optimized. 

$ TSADA/MIPS/ADA/OPTIMIZE X.Y/NOOPTIMIZE,Z 

The result is that the files in X.AD.A are compiled and optimized, 
followed by the file Y.ADA. The file.s in Z .ADA are compiled, but not 
optimized. 


i-y 


OPT I'aaN.Vl.liN A\.\|IPS» 16 N()\'^<> 




ADA 


TeleGen2 for VAX/VMS-MIPS 


There are rwo parameters that are used with / OPTINQZE. These are 

<option> Zero or more of optimizer options on the 
command line, separated by commas. 

<qualif ier> The qualif ier / NOGRAPH or 

/GRAPH[= <file>] /.N'OGRAPH is the default 
value. /GRAPH generates a call graph for the 
unit being compiled. The default output file is 
< unit > G RF when you do note specify a < file > 
(See the Global Optimizer for more information 
on this qualifier.) 

You can specify zero or more optimizer options to control 
optimization. These options are listed here briefly. For more 
information on these options, see the Optimize command in the 
Command Summary. 


Options 

Defaults 

Operation 

ALL 1 NONE 1 SAFE 

ALL 

Enable/disable certain 



optimizations, or permit 
only safe optimizations. 

[NOjALTOINLINE i 
[NO]INXINT(:<fae>] 

ALTOINXI.N'E 

INXINX 

Controls automatic inlining. 
Enables inline expansion of 

1 subprograms. 

[NOJPARALLEL 

parallel 

Subprograms may be called 
from paraUel tasks. 

[NOjRECLRSE ' 

RECLRSE 

Subprograms may be called 
recursively. 

[NO]SPEED 

SPEED 

Produce fastest code but 
slowest compilation speed. 


Depending on the amount of optimization you require, you can operate 
the compiler on one of three optimization levels. You would typically 
use / .NOOPTIMIZE during debueginu and development, while levels 
OPTIMIZE*NOSPEED o'r OPTIMIZE = SPEED would be used for 
final product development. The SPEED option instructs TeleGen2 to 
produce the fastest executable code, even at the expense of a slower 
compilation. 


I-KI 


<)rr-r44.\Ai.i(\A.v.\riPs< ksnovsni 




Command options 


AC A 


/PROFILE 

/NOPROFILE (default) 

The /PRORLE qualifier causes the code generation phase of 
compilation to place special profiler run-time code into the generated 
object module. This qualifier is a positional qualiiier uhen it is used 
with /ADA. /profile generates profile information only for 
specified files because of this characteristic. For information on 
positional qualifiers, see the Oven-ievv. For example. / PROFILE can 
take the following actions, depending on its location on the command 
line. 

. . . /ADa/PROFILE a , B , C produces profile info for .A B and C 

. . . /ADA A , B/PROFILE, C produces profile info only for C. 

. . . /ADa/PROFILE a . B/NOPROFILE. Cproduces profile info only for .A and C. 


/PROFILE can be used with the /OPTIMIZE option, which causes 
the code generator to include the profiler run-time code following the 
optimization. If you use the /BIND qualifier. /PROFILE instructs the 
binder to link in the profiler run-time support routines. If you have 
compiled any code in a program with the / PROFILE qualifier, then 
you must also supply the /PROFILE qualifier to the binder if the 
program is bound separately. 

The default for this qualifier is /NOPROFILE. 

/SQUEEZE (default) 

/NOSQUEEZE 

When you compile an Ada program, the compiler stores two 
intermediate code representations of the program in the library These 
code representations are known as High Form and Low Form. High 
Form must be retained for a library unit because it is required for the 
compilation of any units that reference it. For example, a compiled 
package specification's High Form are used by the corresponding 
package body when it is compiled. However, intermediate forms of a 
secondary unit, such as a package body, may frequently be discarded 
after its compilation. Discarding this information results in a 
significant decrease in library size (typically 50 to 70 percent for multi¬ 
unit programs). 

The /SQUEEZE qualifier can be used with the compiler or the 
optimizer (/OPn>iiIZE). Using the /SQUEEZE qualifier during 
compilation causes the intermediate forms to be discarded .ifter 
compilation, if possible, /.NOSQL'EEZE causes the lull iniermediate 
lorms to be saved in all cnse.s 


()KT-1744\-\ 1 1 i\A,\.MIPSi 16N()V9n 


111 




ADA 


TeleGen2 for VAX/VMS-MIPS 


Note: The optimizer (/OPTIVflZE). and cross-reterencer ( 'XREF) 
programs require unsqueezed units. If you are going to use one 
of these programs, you must compile the units using 
/NOSQUEEZE. 

The default for this qualifier is /SQUEEZE, with one exception. This 
is the / NOOBJECT qualifier which is commonly used when compiling 
units for collective optimization. In this case, the object code is not 
required, but unsqueezed units are. Thus, use of the /NOOBJECT 
qualifier also causes /NOSQUEEZE to be the default. In either of 
these cases, use of an explicit / SQUEEZE or , NOSQUEEZE 
qualifier overrides the default. 

To verify whether or not a unit has been squeezed, use the 
TSADA/MIPS/SHQW/E.XTEN'DED command for the unit. A unit 
has not been squeezed if and only if the attributes High_Form and 
Low_Form appear in the listing for that unit. 

/SUPPRESS[=< option ] 

/NOSUPPRESS (default) 

The /SUPPRESS qualifier allows you to suppress selected run-time 
checks and/or source line references in generated object code. 

The Ada language requires, as a default, a wide variety of run-time 
checks to ensure the validity of operations. For example, arithmetic 
overflow checks are required on all numeric operations, and range 
checks are required on all assignment statements that could result in 
an illegal value being assigned to a variable. While these checks are 
vital during development and an important asset of the language, they 
introduce a substantial overhead. This overhead may be prohibitive in 
time-critical applications. Thus, the Ada language provides a way to 
selectively suppress classes of checks via the Suppress pragma. 
However, use of the pragma requires modif ications to the .Ada source. 

The /SUPPRESS qualifier provides a functional alternative to the 
Suppress pragma. /SUPPRESS allows you to suppress checks in the 
compiler invocation command without modify ing the source code. The 
Suppress pragma is valid in any declarative region of a package and 
affects all nested regions. The /SUPPRESS qualifier is equivalent to 
adding pragma Suppress to the beginning of the declarative part of 
each compilation unit in a file. 

The compiler also stores source line and subprogram name 
information by default in the object code This information is used to 
display a source level traceback when an unhandled exception 
propagates to the outer level of a program This information is also 
p.irticularlv valuable during dc'.elopmenl as it proMdes a direct 


i-i: 


()PT-I'44N.\ Mi \ A\AtlPSi 16\()\V() 





Command options 


ADA 


indication of the source line at which the exception occurs and the 
subprogram calling chain that led to the line generating the exception. 

The source line information introduces an overhead of h cues for each 
line of source that causes code to be generated. Thus, a U 'OG-iine 
package may have up to 6000 bytes of source information For one 
compilation unit, the extra overhead (in byies). is the total length of ail 
subprogram names in the unit (including .Middle Pass generated 
subprograms), plus the length of the compilation unit name. For 
certain space-critical applications, this extra space mav he 
unacceptable and may be inhibited with the /SUPPRESS qualil’ier 
When the source line information is inhibited, the traceback inoicates 
the offset of the object code at which the exception occurs, instead of 
the source line number. When the subprogram name information is 
inhibited, the traceback indicates the offsets of the subprogram calls in 
the calling chain, instead of the subprogram names. 

When you specify an < option >, it represents one of a possible list of 
options separated by commas. These options indicate the features to 
be suppressed. The default setting is /NOSLTPRESS. 

The options and their actions are presented in the following table. The 
names of the options may be abbreviated as long as they remain unique 
within the set of options. .411 options except SOURCEJNFO and 
.4LL function as if a corresponding Suppress pragma were present in 
the Ada source. The e.xception is that 

SUPPRESS = (ELaBORATION_CHECK) differs from pragma 
Suppress(Elaborntion_Check). The switch suppresses elaboration 
checks made by other units on this unit. The pragma suppresses 
elaboration checks made on other units from this unit. The 
NA.ME_[NF0 option specifies that subprogram name information is 
to be suppressed in the object code. The SOURCE_INFO option 
specifies that source line information is to be suppressed in the object 
code. The ALL_CHECKS option suppresses all run-time checks listed 
in the table. The .ALU option specifies that subprogram name 
information, source line information, and all run-time checks in the 
table are to be suppressed. 

For example, the qualifier. 

/SUPPRESS-(SOURCE,ELAB) MY_FILE 

inhibits the generation of source Line information and elaboration 
checks in the object code of the units in file MY^FILE 


i-i.' 


I I | \ X\.\11PS» IhNON'N) 




AOA 


Tele'3en2 for VAX/VMS-MIPS 


ALL 

NONE 

SOURCE_INFO 

NA>JE_INFO 

ALL_CHECKS 

ELABORATION_CHECK 
OVERFLOW_CHECK 
STORAGE CHECK 


Suppress source line information and alJ run-time checks 
Usted below. 

Equivalent to 'N’OSUPPRESS 

Suppress source line information in object code. 

Suppress subprogram name information in object code. 

Suppress all access checks, discriminant checks, division 
checks, elaboration checks, index checks, length checks, 
overflow checks, range checks, and storage checks. 

Suppress ail elaboration checks. 

Suppress all overflow checks. 

Suppress all storage checks. 


/TASK_STACK SI2E=<n> 

/TASK_STACk 2SI2E = 4096 (default) 

The ,^T.A,SK_STACK_SIZE qualifier sets the default .amount of stack 
to allocate from the Ada heap for each task. The < n > you specify is 
the size of the task stack in bytes. 

/TEMPUB=<sublib >[,...] 

/UBFILE=UBLST.ALB (default) 

This qualifier allows you to define a temporary library consisting of a 
selection of sublibraries. The temporary library may be used tor the 
duration of a single command. In all uses, the / TE.VfPLIB and 
/LIBRLE options are mutually exclusive; only one or the other 
qualifier may be used at the same time. 

<sublib> Tfte name of the sublibrary. optionaUy prefixed 
with the specification of the VMS directory in 
which it resides. If no directory is specified, the 
current default directory is assumed. Multiple 
sublibrary file specifications are separated by 
commas in a list. 

Semantically, the argument string of this qualifier is the logical 
equivalent of a library tue cont.lining the listed sublibrtiries. one per 


114 


()PT-l'44N-\ I.li\AX.Mli'Si I^NDX'^II 





Command options 


ADA 


Line, in the order listed. Thus, we could list the sublibraries: 
/TEMPLIB-CMYVORK,[CaLCPROJ]CALCLIB,TSADASMIPS:[LIB.R3000]RTL, 

/TIME SUCE QUANTUM=<n> 

/TIME_SUCE“QUANTUM = 0 (default) 

This qualifier specifies the slice of time, in milliseconds, in which a task 
is allowed to execute before the run-time switches control to another 
ready task of equal priority. This timeslicing activity allows for 
periodic round-robin scheduling among equal-priority tasks. 

Timeslicing may or may not be implemented for a particular 
environment. 

The default value for /TIME_SLICE_QL’ANTUM is 0 (i.e.. 
timeslicing is disabled). No run-time overhead is incurred when 
timeslicing is disabled. 

/UPDATE (default) 

/[NOlUPDATE 

When multiple source files are being compiled, the /UPDATE 
qualifier instructs the compiler to update the library after each source 
file is compiled. The default setting is / UPDATE. 

If /NOU’PDATE is used, and an error occurs during compilation, the 
working sublibrary is not updated at all, for any unit, even for 
remaining units in the source file in error. Ail remaining source files 
will be compiled for syntactic and semantic errors only. The 
/NOUPDATE qualifier is advantageous to use when it is known that 
all the source files will compile without error and the user wishes to 
save the overhead time involved in updating the library for each source 
file. 

/VIRTUALSPACE = < n > 

/VIRTUAL_SPACE = 10000 (default) 

This qualifier specifies the number of Ikb pages that will be used in 
memory while the tool executes. Greater values will usually improve 
performance, but will result in more physical memory requirements. 


()rr.i-44\.\ i.kvax.mip.si 


lfiS()\ VO 


1-15 




ADA 


TeleGen2 for VAX/VMS-MIPS 





Comma, id options 


BIND 


1.2. BIND 

[Binder] 

introduction 

The object code files generated by the compiler are TeleGerC-defined 
Object Form files stored in the Ada library These files must be bound to 
create a linkable object. The binder program generates the code needed 
to elaborate the components in a consistent order. The hinder is in'.oked 
when you use the /BIND qualifier. 

The general command format of the bind step is 


TSADA/MIPS/BIND[<qualifier>,...] <main> 


where 


<main> indicates the name of the unit to be used as the 
mam program 

<quaiif ier> none or more binder qualifiers 

The foUowing diagram illustrates how to put qualifiers and parameters 
together into commands in order to invoke the binder 

Qualifiers 

/ASSEMBLY_COOE[= <file>] 

/NOASSEMBLY CODE (default) 

With the /ASSEMBLY_CODE qualifier, you can obtain an assembly 
listing of compiler generated code for a unit or a collection. You can 
use this qualifier with the compiler, the binder and the optimizer in the 
same way. The listing is similar to that produced with the 
/MACH1N'E_C0DE qualifier, except that it will not contain location 
or offset information. The file produced with the 
/assembly code qualifier is suitable as input to an assembler. In 
contrast, the fUe produced by /MACHlN'E_CODE is more suitable 
for human readability. The default file name is the same as it would be 
for /MACHINE_C0DE. i.e.. the unit name being compiled. 

/ASSEMBLY_C0DE and /MACHlNE_CODE are mutuaUy 
exclusive. 


(»PT-|:44N.M |i\a\.MIPS. 16N<)S'4(I 


i-r 






BIND 


TeleGen2 for VAX/VMS-MIPS 


/DEBUG 

/NODEBUG (default) 

To use the debugger, you must compile, bind, and link program units 
using the / DEBUG qualifier. This ensures that source debugguig 
information and a link map are put into the .Ada library for use by the 
debugger. The /DEBUG qualifier causes the binder to save the 
mtermediate forms of code for debugging purposes. 

TTie default setting of this qualifier is / NODEBUG. The use of 
, DEBUG ensures that the High Form and debugger information for 
secondary units are not deleted. WTiile the compilation time overhead 
generated by use of / DEBUG is minimal, retaining this optional 
information ui the .Ada Library increases the space overhead. To 
check if a compilation unit has been bound using /DEBUG, use the 
TSADA/MIPS/SH0W/EXTENT)ED command for the unit. 

/ENABLE_TRACEBACK 
/NOENABLE TRACEBACK (default) 

In the unlikely event that you should receive an Unexpected Error 
Condition message, you should contact Customer Support. Customer 
Support may request that you provide additional information about the 
error condition by including the /ENABLE_TRACEBACK qualifier 
in the compiler invocation that fails. This qualifier allows the tool to 
display the exception traceback associated with the unexpected error 
condition. The information provided in the traceback will allow 
Customer Support to diagnose the problem more efficiently. 

/UBFILE=<file> 

/UBFILE = UBLST.ALB (default) 

By default, the library file named LIBLST with a default type of ALB 
IS used by the TeleGen2 tool set to determine which set of sublibraries 
are to be referenced during the operation of the tool. This file must be 
present in the working directory. With the /LIBFILE qualifier, you 
can specify a library other than the default. LIBLST ALB. /TEMPLIB 
may also be used to create an alternative library. However, the 
/TEMPLIB and / LIBFILE qualifiers are mutually e.xclusive; only one 
or the other qualifier may be used at the same time. 

WFien you specify the / LIBFILE qualifier, you indicate the file 
specification of an alternative library file that contains the List of 
sublibraries and optional comments. If you do not specify a file type 
with the file name, the system uses the file type ALB. 

Fiir example, consiiler .1 library file named WORKL1B..ALB with the 
ci'ntenis 


■IH 


()PT |T44\-\ |.|(\ A,\.MlPSl IftNOVVU 





Command options 


BIMD 


Name: MYWORK 

Name: [CALCPROJ]CALCLIB 

Name: TSADA$MIPS:[LIB.R3000]RTL 

You could specify 

$ TSADA/MIPS/ADA/LIBFILE=WORKLIB 

As an alternative to using /LIBFILE. you may assign the library tile 
specification to the logical name LIBLST. For example. 

$ ASSIGN WORKLIB.ALB LIBLST 

/MACHINE_CODE[= <file>] 

/NOMACHINE CODE (default) 

The /MACHINE_C0DE qualifier allows you to obtain an assembly 
listing of the code that the compQer generates for a unit or a collection. 
The listing consists of assembly code intermixed with source code as 
comments. Note that the listing generated by this qualifier is 
independent of the source/error listing generated by the /LIST 
qualifier. The default for this qualifier is /NOMACHINE_CODE. 

The listing output is sent to a file named <unit>_.S if the unit is a 
library unit, and < unit > .S if the unit is a secondary unit. < unit > is the 
name of the compilation unit that is being listed . 

If multiple compilation units are being compiled and you have provided 
a file specification, the machine code listing for each compilation unit 
w ill be output to a different version of the same file name. 

If the compilation unit name is longer than 59 characters, the name will 
be truncated at 39 characters. No listing will be generated if there are 
syntactic or semantic errors in the compilation. 

/MONITOR 

/NOMONITOR (default) 

Normally, the only visible output produced by the TeleGenZ tool set 
during operation is error or warning messages. The / MONITOR 
qualifier enables the reporting of version numbers and messages that 
allow you to monitor the tools progress. Wlien you specify 
/MONITOR, the output is sent to standard output (SYSSOL’TPLT) 


()KT-I'44N.\ I lAAX.MIPSi 16N()\90 


MV 










BIND 


TeleGen2 for VAX/VMS*MIPS 


/PROFILE 

/NOPROFILE (default) 

If you are binding a previously compiled program, the PROFILE 
qualifier causes the binder to enable the elaboration calls for the target 
program to be profiled. 

Note: If one or more of the units to be bound have been compiled with 
the / PROFILE qualifier, then you must supply this qualilier to 
the binder. 

/TASK STACK_SI2E=<n> 

/TASK~STACK_SI2E = 4096 (default) 

The /TASK_STACK_SIZE qualifier sets the default amount of stack 
to allocate from the Ada heap for each task. The < n > you specify is 
the size of the task stack m bytes 

/TEMPUB=<sublib >[,...] 

/UBFILE = UBLST.ALB (default) 

This qualifier allows you to define a temporary library consisting of a 
selection of sublibraries. The temporary library may be used for the 
duration of a single command. In all uses, the ■'TEMPLIB and 
, LIBFILE options are mutually exclusive, only one or the other 
qualii'ier may be used at the same time. 

<sublib> The name of the sublibrary, optionallv prefixed 
with the specification of the VMS directory in 
which it resides. If no directory is specified, the 
current default directory is assumed. Multiple 
sublibrary file specifications are separated by 
commas in a list. 

Semantically, the argument strmg of this qualii'ier is the logical 
equivalent of a library file containing the listed sublibraries, one per 
line, in the order listed. Thus, we could list the sublibraries; 

/TEMPLIB-(MYWORK.(CALCPROJ]CALCLIB,TSADASMIPS:[LIB R3000)RTL) 

The /TEMPLIB qualifier applies to both compilation and binding, so 
it need be specified only once and may appear in any order on the 
command line when you use ' BI.NT) The binder needs to have 
present every compilation unit referenced by the main program. If a 
unit is missing, the binder will report the error and will not be invoked. 
Therefore, you should be sure that the set of sublibraries specified by 
the TE.V1PLIB qualifier cont.ims all the units belonging to the mam 
program. 


I ■:ii 


orrr-UNA 1 1(\A\.MIPS, u,\()\>^ll 





Command options 


BIND 


/TIME_SUCE_QUANTUM = < n > 

/TIME_SUCE_QUANTUM = 0 (detault) 

This qualifier specifies the slice of time, in milliseconds, in which a task 
is allowed to execute beiore the run-tim.e switches control to another 
ready’ task of equal priority. This timeslicing activity allows tor 
periodic round-robin scheduling among equal-priority tasks. 
Timeslicing may or may not be implemented for a particular 
environment. 

The default value for , TIME_SLICE_QL'.-\NTL'M is 0 (i.e.. 
timeslicing is disabled). No run-time overhead is incurred when 
timeslicing is disabled. 

/VIRTUALSPACE = < n > 

/VIRTUAL_SPACE = 5000 (default) 

This qualifier specifies the number of Ikb pages that will be used in 
memory while the tool executes. Greater values will usually improve 
performance, but will result in more physical memory requirements. 


OPT-ra-lNA I 1.\A\.MIH>i I6N()\'^I 


I-: I 






LINK 


TeleCien2 for VAX/VMS-MIPS 


1.3. LINK 

[Linker] 

Introduction 


The Ada Linker is a component of the TeleGenZ system that allows you to 
link compiled Ada programs in preparation for target execution. The 
linker resolves references within the Ada program, the bare target run¬ 
time support Library, and any imported non-Ada object code. To support 
the development of embedded applications, the linker is designed to 
operate in a variety of modes and to handle many types of output format. 

The linker links together OF modules to construct executable load 
modules. (See the "Linker " chapter in the User Guide for details) 
Optionally, the linker outputs symbol location information that is used by 
the debugger. The linker can also output information used by the profiler. 
.Ail unused subprograms will be eliminated from the executable image. 

The command syntax for the Ada Linker is; 

! $ TSADA/MIPS/LINK[<qualifier>] [<unic>] 


where 

<qual if ier> None or more of the command line qualifiers 
available with the linker. 

<unic> An optional command line parameter indicating 
the name of the Ada compilation unit to be linked 
as a main program. 

Not that the compilation unit must have been bound as a main program 
prior to linking. If you do not provide the unit name on the command line, 
then the unit is specified using the INPLT option in an options file. 

Linker directives are communicated to the linker as qualifiers on the VMS 
command line or as options entered via an options file or SYSSINTLT. 
Command line qualif iers are useful for controlling options that you are 
l:ke!'. to chance often. The def.ault qualifier settings are designed to allow 
tor the simplest and most converuent use of the linker. 


()PT-r44N-\ l.li\\\.MIPS. lhN()\9tt 





Command options 


LINK 


Command line qualifiers and parameters enable you to: 

• Specifv the name and format of the linked output file 

• Control the generation and format of listing map files 

• Specify an options file 

• Specify the starting memory location for the linked output 

• Specify' the library file containing the components to be linked 

• Control the output of debug symbol information for debugging 

• Monitor the linking process 

• Profile the Linking process 

More complicated linker options, such as the specif ication of memory 
locations for specific portions of the code or data for a program, are input 
via options in a linker options file. Linker options may be used to: 

• Specify the compilation units to be used as input to the Linker, 

the library search paths, and the usage of the input files 

• Specify the name and format of the linked output file 

• Control the generation and format of listing map files produced by 

the Linker. 

• Specify the location of named memory regions and reserved 

memory regions in physical memory 

• Specify the location of control sections in physical memory 

• Define symbol values 

• Specify the target machine on which the output is to be executed 

The linker qualifiers are illustrated in the diagram following this 
discussion. Each of the /LINX qualifiers is described in detail in the 
Qualifier section. Following the qualifier descriptions, there is a detailed 
discussion on linker options files and their qualifiers. 


()PT-r44N.\ l,li\AX.MIPS) 






LINK 


TeleGen2 for VAX/VMS-MIPS 


Qualifiers 

/BASE= < address > 

/BASE = 0 (default) 

This quiilil'ier is used with the linker to specify- the start location ot the 
linked output. The linker locates non-absolute control sections in 
consecutive memory locations. You can specify the address as an 
unsigned octal (^Ooctal), decimal (^Ddecimal). or he.xadecimaJ 
('Ti'Oiexadecimal) value in VMS format. The default is hexadecunaJ. 

If you specify neither the /BASE qualifier nor an options file 
LOCATE and the link is complete, the Linker uses the default location 
value of address 0. 

The ' BASE qualifier governs the location for any code, constant, or 
data section not covered by an options file LOCATE. This qualifier 
does not supercede any LOCATE options. The /BASE qualifier is 
equivalent to a LOCATE option with no control section or component 
name specified. 

/DEBUG 

/NOOEBUG (default) 

To use the debugger, you must compile, bind, and link program units 
using the /DEBUG qualifier. This ensures that source debugging 
information and a link map are put into the Ada library for use by the 
debugger. This qualifier controls the generation of debug symbol 
information for use with the debugger. The information is in the form 
of a link map that associates machine addresses with the symbol names 
found in a compilation unit. The debugger uses the link map to locate 
the address of the beginning of a compilation unit and the addresses of 
source lines and link names. 

■A program that you want to run with the debugger must be linked vvith 
the / DEBUG option. If supported by the chosen load module format. 
/DEBUG may also cause symbol information to be output in the load 
module. The qualifier is ignored if you select /OBJECT_FOR.M. In 
the standard configuration of the TeleGenZ system, none of the outputs 
support symbol information m the load module. The default is 
NODEBUG. 


•:4 


()PT-I*44N.\ l,l(\AX.MIPS i 



Command options 


LINK 


/ENABLETRACEBACK 
/NOENABLE TRACEBACK (default) 

In the unlikely event that you should receive an Unexpected Error 
Condition message, you should contact Customer Support. Cusiomer 
Support may request that you provide additional int'ormation about the 
error condition by including the /ENAJBLE_TR.ACEBaCK qualitier 
in the compiler invocation that tails. This qualifier allows the tool to 
display the e.xception traceback associated w-ith the unexpected error 
condition. The information provided in the traceback w ill allow 
Customer Support to diagnose the problem more efficiently. 

/EXCLUDED 

/NOEXCLUDED (default) 

The /EXCLUDED qualif ier is used with the linker to insert a list of 
excluded subprograms into the link map listing. The default is 

/noexclude’d. 

/EXCLUDED is also a subqualifier of the /MAP linker qualifier. The 
/.MAP qualifier controls the generation and format of the listing map 
files that the linker produces. With the /EXCLUDED subqualifier, 
the / MAP qualifier generates a section of the link map that lists Ada 
subprt grams that have been excluded from the linked object file. 

These subprograms were e.xcluded because they were not used in the 
call graph of the main program that is being linked. 

/EXECUTE_FORM (default) 

This qualifier is used with the linker (TSADA/MIPS/LINK). It is 
used to specify that the load module output of the linker should be 
Execute Form. Execute Form is the default output format generated 
by the Linker and is suitable for use as input to the download and 
receiver utilities. If you use /EXECUTE FORM, it must immediately 
follow TSADA/MIPS/LINK on the command line. 

The load module produced has the file type EF 

/IMAGE 

/NOIMAGE (default) 

The /l.VtAGE qualifier is used with the / .MAP qualifier or .VLAP 
option in the linker. /IMAGE generates a memory image lis.mg in 
addition to the link map listing generated by /MAP. TTie linker writes 
the image listing to the same file as the link map listing. This is the 
oniv optional section of the listing. The default is 'NOfMAGE. 


()HT-1'44N.\ I.IAaX.MIPSi 1(SN()\V<I 


1 






LINK 


TeleGen2 for VAX/VMS-MIPS 


In a memorv' image listing, each nonsequential section of the image in 
memory starts on a new page. The image listing contains the locations 
in memory that are printed as hexadecimal values. Each line in the 
listing is filled with the amount of data on a line that is a multiple of 16 
bsies and up to the specified or default WIDTH limit. 

Relocatable control sections are printed with a location that is relative 
to the start of the control section. 

/UBFlL£=<file> 

/UBF1LE = UBLST.ALB (default) 

By default, the library file named LIBLST with a default type of .ALB 
is used by the TeleGen2 tool set to determine which set of sublibraries 
are to be referenced during the operation of the tool This file must be 
present in the working directory. With the /LIBFILE qualifier, you 
can specify a library other than the default. LIBLST.ALB. /TE.VtPLIB 
may also be used to create an alternative library. However, the 
/TE* IPLIB and /LIERLE qualifiers are mutually e.xclusive, only one 
or the other qualifier may be used at the same time. 

When you specify the /LIBFILE qualifier, you indicate the file 
specification of an alternative library file that contains the list of 
sublibraries and optional comments. If you do not specify a file type 
with the file name, the system uses the file type .ALB. 

For example, consider a library file named W'ORKLIB .ALB with the 
contents: 

Name; MYWORK 

Name: [CALCPROJ]CALCLIB 

Name: TSADA$MIPS:[LIB.R3000]RTL 


You could specify 

$ TSADA/MIPS/ADA/LIBFILE-WORKLIB 

.As an alternative to using /LIBFILE. you may assign the library file 
specification to the logical name LIBLST. For example. 

$ ASSIGN WORXLIB.ALB LIBLST 

/LINES PER PAGE=<n> 

/LINES'pER'P.AGE = 66 (default) 

With the / UN'K command. /LINES PER_PAGE specifies the 
number of lines per listing page. The default is 66. >'ou may specify a 
positive integer greater than 10 


■ify 


oPT l’aaNA i.i.vwMIPsi ir,N()\>>n 




Command options 


LINK 


/LOAD_MODULE[= <tile>] 

/LOAD_MODULE= <main>.EF (default) 

This qualifier is used with the linker to specify the V'MS file name ter 
the load module output created by the linker. 

The <tLle> is the optional VMS file specification for the output If 
< fiie> does not include an file type, the linker will append a file rsre 
appropriate to the chosen load module format If you do not specify 
output file, the linker writes the linked output to: 

<113 in>. <type> 

The <main> is the .Ada name of the main program unit (if present';, 
the name specified as the command line parameter, or the name 
specified as the first INPLT option, modified as necessary to form a 
valid V.MS file specification. The <cype> is the appropriate file type 
for the selected load module format. 

You can use the / LOAD_.MODULE qualifier with the /OPTIONS 
qualifier. Any output file specification present in the options file is 
superceded by the specification on the command line. If the 
/LOAD_.MODL'LE qualifier is used with the /OBJECT FORM 
qualifier, both formats will be produced. 

/LOCALS 

/NOLOCALS (default) 

This qualifier includes local symbols in the link map symbol listing. 

/MAP(=<file>] 

/NOMAP (default) 

This qualifier is used to request and control a link map listing The 
format of the link map listing file is described in the User Guide 

When you specify this option, you can optionally list a < file > This is 
the optional VMS file specif ication for the output. If you do not 
specify a file type, the Linker uses a default file type of MAP If you 
do not specify' an output file, the Linker writes the listing to 

<unit>.MAP 

where 


<unit;> Represents the name of the main program unit i if 
present), the name specified as the command Line 
parameter, or the name specified as the first 
INTLT option, modified as necessary to form a 
s.ilid \ MS file specification. 


<)PT-l"44N-\ 1 li\ii\.\1IPSi IfiNONVU 



LINK 


TeleGen2 for VAX/VMS-MIPS 


You control the output of the MAP qualifier using one or more i''t the 
following qualifiers; 

/(NOllMAGE 
/[NOILOCALS 
/[NO)EXCLUDED 
/W1DTH=<132 1 S0> 

/LINES_PER_PAGE= <50 1 n> 

/IMAGE generates a memory image listing in addition to the map 
listing. The Linker writes the image listing to the same file as the link 
map listing. This is the only optional section of the listing. The default 
is /NOIMAGE. 

/LOCALS includes local symbols in the link map symbol listing The 
default is /NOLOC.ALS. 

/EXCLUDED inserts a list of excluded subprograms into the link map 
listing. The default is /NOEXCLUDED. 

/WIDTH specifies the width of the lines in the listing file. The default 
value is 132 characters. The alternate width is 80 characters. 

/LINES_PER_PAGE specifies the number of lines per listing page. 
The default is 50. You may specify a positive integer greater than 10 

.A command line /MAP qualifier supercedes any MAP options in an 
options file. The default is /NOMAP /NOMAJP can be used on the 
command line to suppress MAP options specified in an options file. 

/MIPS 

/EXECUTE FORM (default) 

Specifies that an object module in a format used by the MIPS is to be 
linked. If used, this qualifier must immediately follow 
TSADA/MIPS/LINK. The default output format for an object 
module is /EXECUTE FOR.M. 

/MONITOR 

/NOMONITOR (default) 

Normally, the only visible output produced by the TeleGenZ tool set 
during operation is error or warning messages The / .MONITOR 
qualif ier enables the reporting of version numbers and messages that 
allow you to monitor the tool's progress. When you specify 
/.MO.NITOR. the output is sent to standard output (SYSSOLTPUT). 


OPT-r44N.\ 1 . 1 |\ X\ MIPS: |hNO\<)n 




Command options 


LINK 


/OBJECT_FORM[= <lib_comp>] 

/NOOBJECT_FORM (default) 

This qualifier specifies that one output of the linker is to be linked OF 
Linked OF is suitable for incomplete modules and can be used 
subsequently as input to the Ada Linker. The linked OF is put into the 
library as an object form module (OFM) component. 

<Lib_comp> Represents a library component name. 

<unit> The Ada name of the mam program unit [ if 

present), the name specified as the command line 
parameter, or the name specified as the first 
LNPLT option. The output of the link is put into 
the library as the object form module called 
< unit > if you have not specified a library 
component name. 

Note that the object form module of < unit > is a library component 
separate from that of the specification or body of the unit. 

If an object form module library component with the specified name 
already exists in the current working sublibrary, that component is 
deleted and replaced by the new output. 

The /OBJECT_FORM qualifier may be used with the /OPTIONS 
qualifier. Any format or name present in the options file is superceded 
by the format and name specified on the command line. You may 
request /OBJECT FORM instead of the default 
/EXECLfTE_FOR.M. or in addition to a load module format. To 
obtain both an object form module and a load module, you must enter 
both qualifiers. 

/OPTlONS(=<file>] 

/NOOPTIONS (default) 

/OPTIONS specifies that the linker is to process additional options 
obtained interactively, or from a linker options file. 

<file> This is a valid VMS file specification. It 

represents a file that contains linker options. If no 
file type is present, the linker uses the default file 
type OPT. 

The default file specification is SYSSINTLT. The default is 
/NOOPTTONS. 


i-;v 


()PT-r44\.\ III SAX. MIPS) IfiSOS*^!) 





LINK 


TeleGen2 for VAX/VMS-MIPS 


The /LOAD_MODLXE qualifier and the , OBJECT_FORM 
qualifier may be used with the /OPTIONS qualifier. Any format 
present in the options file is superceded by the format specified on the 
command line when you use /LO.AD_MODL’LE with /OPTIONS. 

WTien / OBJECT_FORM is used with / OPTIONS, any output file 
specification present in the options file is superceded by the 
specification on the comm^^nd line. 

/SRECORDS 

/EXECUTE FORM (default) 

The / SRECORDS qualifier is used with the linker to specify that the 
output of the Linker should be Motorola S-Records. This output 
format is suitable for use as input to .Motorola-compatible simulators 
and monitors. If used, this qualifier must immediately follow 
TSADA/MIPS/ LI.NK,. The load module produced has the file type 
.SR. The default output format is E.xecute Form 
(/E.XECLTE_FOR.M). 

/TEMPUB=<sublib 
/UBFILE=UBLST.ALB (default) 

This qualifier allows you to define a temporary library consisting of a 
selection of sublibraries. The temporary library may be used for the 
duration of a single command. In all uses, the /TEMPLIB and 
/ LIBFILE options are mutually exclusive; only one or the other 
qualifier may be used at the same time. 

<suDlib> The name of the sublibrary, optionally prefixed 
with the specification of the VMS directory in 
which it resides. If no directory is specified, the 
current default directory is assumed. Multiple 
sublibrary file specifications are separated by 
commas in a list. 

Semantically, the argument string of this qualifier is the logical 
equivalent of a library file containing the listed sublibraries, one per 
line, in the order listed. Thus, we could list the sublibraries: 

/TEMPLIB-(MYWORX,[CALCPROJ]CALCLIB,TSADA$MIPS:[LIB.R3000]R7L) 

When used with the linker, this qualifier specifies a list of sublibraries 
to be used for a single run of the linker. If you do not specify 
LIBFILE or /TEMPLIB. the linker assumes that the library is 
specified by the library file named LIBLST.ALB in the current 
working directory. 


I-.to 


<)PT-r44N-M .li\ A.X.MIPSi 16 N«)\ VO 




Command options 


LINK 


/USER 

/MIPS (default) 

This qualifier specifies that a user-adapted object module file format is 
to be linked. This requires that you adapt the linker. See the MIPS 
Target Programmer User Guide for information on this adaptation. 

/VIRARS SI2E=<n> 

/V1RARS“SIZE=1000 (default) 

This qualifier specifies the amount of space, in kilobytes, of buffer 
space to be allocated for the linker. You must specify a value for the 
size when you use /V1RARS_SIZE. The default amount of space is 
1000 kilobytes. 

/VIRTUALSPACE = < n > 

/VIRTUAL SPACE = 1000 (default) 

This qualifier specifies the number of Ikb pages that will be used in 
memory while the tool executes. Greater values will usually improve 
performance, but will result in more physical memory requirements. 

/WIDTH = <n> 

/WIDTH = 132 (default) 

This qualifier, used with the linker, specifies the width of the lines in 
the listing file. The default value is 132 characters. The alternate 
width is 80 characters. 

<n> The width of the lines in the listing file. The value 
can be 132 or 80 characters. 


()HT-r44N.\ l.h\A\.\)IPS» 16\<)V9U 


IM 





LINK 


TeleGen2 for VAX/VMS-V1IPS 


1.4. Linker options file 

The /OPTIONS command Line qualifier is used to specify that the linker 
is to read in additional options trom an options file or from S'l'SSINTLT 
An options file is a text file that contains linker commands to be 
interpreted by TSADA/MIPS/ LINK. You specify the name of the 
options file on the command line with the /OPTIONS qualif ier The 
default file specification is SYSSI.NTLT, so the linker may read 
commands from a command file or from the terminal immediately after 
you enter the linker command line. If you are entering the options 
interactively, there are no prompts on the screen. To end your input, you 
enter an E.XIT command. Options cannot be entered both interactively 
and in an options file. 

There is a basic linker options file provided with this release. It is tailored 
to your target. You may obtain additional options files for more targets. 

1.4.1. Options file format 

You must enter each linker options on a separate line. To continue on the 
next line, use the standard VMS continuation character (-). Comments 
may be entered with the VMS comment (!) or the Ada comment (-). 
Options and qualifiers may be abbreviated to as few letters as needed to 
make a unique abbreviation. The linker reads and processes options until 
it finds an EXIT or QUIT command, or an end-of-file marker. 


I-.’: 


OPT-rUJNA 


1 (\ 



Command options 


LINK 


1.4.2. Linker Options and their Qualifiers 

The available Linker options and their qualifiers are summarized m the 
table below. Defaults are shown in italics. 


Linker Options and their QualiTiers 

DEFINE 

/ <svmbol> = < value > 

[/ADDRESS] 

-- Specify- link-time ••alues for 

EXIT 

-- Terminate options list 

INPUT 

(/MAIN I /SPEC I /BODY | /OFMj 
(/EXPORT DERNITIONS] 
(/PHANTOM I /WORKING SUBLIB] 
[/NOSEXRCHj <lib comp>~ 

-- Identify object modules to be linked jnd 
specify the search path. 


LOC.aTE -- Specify addresses for control sections 

(/CONTROL SECTION = CODE | DATA | LDATA | MAP] 

I/COMPONE'NT NAME= <lib_comp> 

[/SPEC I /BODY I /OFMj) 

[/AT = < address > I 
(/IN = < region > I 

(/AFTER = <control_section> [ <lib_comp>| 


(/ALIGN'MENT= < value >] ! 

MAP 

(/[.VOIIMAGE] 

(/(.VO [LOCALS] 
l/[.VO]EXCLL'DED] 

(/WIDTH = <;j: I 80>] 
[/LINES_PER_PAGE= <n>] (if?) (<file> 

• Control link map generation. 

I 

OUTPUT 

{/COMPLETE \ /INCOMPLETE) 

(/ LOAD_MODULE[ = < file > ] 
(/OBJECT_FORM(= <library comp>]] 

- Specify complete or incomplete output 
and Its format. 

QUIT 

- Abandon link operation. 

REGION 

LOW BOUND = <address> 

. HIGH_BOUND= < address> 
(/UNUSED] (<region>] 

-- Define and name memory regions. 


I - u 


()PT-r44S \ I 1 1 \ W.MIPSi 


I6N()\9<( 







LINK 


TeleGen2 for VAX/VMS-MIPS 


Defining Global Symbols: DEFINE 

With this option, you can define global symbols referenced in the Ada 
CGS and other imported OF modules. Multiple DEFIN'E options can be 
used. You can specify what the < symbol > is. or you can use one of the 
environment names that must be defined when the standard environment 
is used. You can specify a he.xadecimal value for < value >. or a 
hexadecimal based literal in Ada syntax (16#hexadecimal#). or an 
unsigned hexadecimal value in VMS format (*T:Xhexadecimal). 

/ADDRESS 1 specifies that the value input is to be used as an address 
rather than a signed long integer value. This qualifier is necessary only 
when address values are 16#80000000# or larger. 

Ending User Input: EXIT 

This option is used to speciK' the end of your interactive input, or the end 
of input from an options file. No options are processed after the EXIT 
option. The link operation is performed. An end-of-file is equivalent to 
the EXIT option. 

Specifying the Input: INPUT 

This option specifies the name of the Ada library component to be linked, 
its usage, and its search path. You may use multiple l.NTLT options. 

By default, the object associated with the specified name is included m the 
linked output. If the link is incomplete, the symbols defined in the OF 
modules will not be exported as gl'^bal definitions. The option line 
qualifier /EXPORT_DEFINTnONS may be used to override this default. 
In complete linkage, ail references are to be resolved, so the Linker does 
not export global definitions and ignores this qualifier The option line 
qualifiers /MAI.N and /PHANTOM may be used to specify’ special usage 
lor the input OF modules. 

The use of an INPLT option does not prevent an unreferenced .Ada unit 
from being excluded from the module because ot unused subprogram 
elimination. If an unreferenced unit needs to be included in the module, 
such as to provide an interrupt handler, it can be done by linking in two 
steps. First, include the unreferenced unit in an incomplete link. Then do 
a complete link that inputs the result of the incomplete link. 

When the detault search path for a specified library component is used, 
the linked output includes all compilation units comprising the extended 
family of the component that exist in the current librarv. The search path 
qualifiers /NOSEARCH and /WORKING_SUBLIB may be used to 
override the detault and include only the component itself or only those 
components ot the extended tamily in the working suhlibrarv 


-.'4 


()HT-l*44N-\ 1.1, WX.MIPSi IftNOV'Ki 





Command options 


LINK 


<lib comp> represents the library-component name. 

The following qualifiers specify- the kind of library component input 


qualifier 

library component 

/SPEC 

; library unit 

/BODY 

: secondary unit 

OEM 

: linked OE or imported OE 

/MAIN 1 

: main program library unit 


/SPEC should be used only for library units without bodies, since these 
are the only library units that have object associated with them. .Ail other 
compilation units should be included in the link using either BODY or 
/MAIN, if the unit is a main program unit. In a complete link, using 
/SPEC or /BODY only makes sense when combined with 
/WORKING SUBLIB since the library or secondary unit will 
automatically be brought into the link if needed and excluded if nor 
needed. /WORKING SLiBLIB instructs the linker to use the version of 
the library or secondary unit located in the working sublibrary rather than 
any other version in another sublibrary. 

/ Main specifies that the library component is to be the main program in 
the link. The library component must have been bound as a mam 
program using the TSADA/MIPS/BIND command. The library 
component name specified in the first INPUT option is used as the 
default OUTPUT and MAP name, unless you specify other names 
Specification of both /OEM and /MAIN is an error, 

/E.XPORT_DEFINTnONS is used with incomplete linking. It indicates 
that the global symbols defined in the input component are exported as 
global definitions. Thus, the mterface of the mcomplete linked output 
remains visible to you. TTie definitions of any imported units that are 
included by the library search are not exported as global definitions, 
however. The linker ignores this qualifier in complete linkages. 
/PHANTOM specifies that the symbols defined in the object associated 
with the input may be used to resolve references in the linked output. The 
linker does not generate executable object for the phantom module or 
include it in the linked output. The library component specified with a 
phantom input component must be an incomplete linked object that has 
no unresolved references. Using the /WORKING_SUBLlB qualifier 
with a phantom input file is an error The default search action for a 
phantom input file is / NOSEARCH. 

/WORKING SUBLIB specifies that only those extended family 
components in the current working subiibrary are to be included in the 
linked output. 


i-k' 


OPTI'UJN.VI.hVAX.MIPS) I6\()\V(I 






LINK 


TeleGen2 for VAX/VMS-MIPS 


/NOSEARCH specifies that only the specified input component is to be 
included in the linked output. For complete links, this qualifier is onlv 
effective for linked or imported OF, as when used in combination with 
/OFM. 


\V'hen the name of the OL'TPLT and MAP files are not specified, the 
linker names the files after the first INPLT option s named component. 

Specifying Locations of Control Sections; LOCATE 

This option specifies the location of a control section in physical memorv 
or w ithin a named region of physical memory. /CONTROL SECTIO.N' 
specifies the name of the control section to be located. The valid control 
section names for the .V1CS8100 are CODE. DATA. LTDATA and MAP. 

If a control section name is omitted and a component name is given, none 
of the control sections are explicitly located. 

/ C0.MP0N’ENT_N’A.ME specifies the name of the library component 
that is to be located and has one of the following qualifiers: 


Qualifier 

Library Component 

/SPEC 

library unit 

/BODY 

; secondary unit 

/OFM 

linked OF or imported unit 


The only Ada compilation units that have object associated with the 
library unit are body-less compilation units. Ail others should be located 
using the BODY qualifier If no /COMPOINENT .N'A.ME qualifier is 
used with the LOCATE option, the linker assumes that LOCATE refers 
to all compilation units not explicitly located by other LOCATE 
commands. 

/AT specifies that the image is to be located at the specified memory 
location. The address specified must be a valid vu-tual R2000/R3000 
memory location. The < address > can be specified bv usuig a decimal 
value, a hexadecimal based literal in Ada syntax (16#hexadecimal#), or 
an unsigned hexadecimal value in VMS format (TXhexadecimal). 

IN specifies that the image is to be located in the first available location 
in the named memory region. The memory region. < region > must have 
been defined by a previous REGIO.N command. This qualifier may be 
used in conjunction with the /AFTER qualifier to locate compilation units 
in a specific order in a memory region and/or with the /ALIGNMENT 
qualifier to specify alignment. 

/AFTER specifies that the image is to be located immediately after the 
specified control section or compilation unit (using default alignment 
or /.ALIGNMENT/ The specified control section or compilation unit 
must have been located explicitly m .1 previous LOC.ATE command 


l -.’6 


()(»T l'44N.\ l.l.X AX.XtlPSi l(S\<)\UO 



Command options 


LINK 


/ALIGiVNlENT specifies the byie alignment of the image, if any. If no 
alignment is specified, control sections on the MIPS are word-aligned. 

The qualifiers / IN. /.AFTER, and /ALIG.N'MENT can be used in any 
combination. The use of / IN. /.AFTER, or .ALIGNMENT in the same 
LOCATE command as the /.AT qualifier is an error. 

A LOCATE option with no component name and no control section name 
is equivalent to a / BASE command line qualifier, i.e.. ail non-located 
sections are located starting at the base specified. 

Control sections not designated in a LOCATE command are placed at the 
first available location after the default location, if any. An incomplete 
link with no default location will cause the control sections in the output to 
remain relocatable. 

Producing a Link Map Listing: MAP 

This option is used to request and control a link map listing. The M.AP 
option operates in the same way as the /.MAP command line qualifier. 

/LOCALS includes local symbols in the link map symbol Listing. The 
default is / NOLOCALS. 

/E.XCLUDED inserts a list of excluded subproerams into the link map 
listing. The default is /NOEXCLUDED. 

/WIDTH specifies the width of the lines in the listing file. The default 
value is 132 characters. The alternate width is SO characters. 

/LINES PER_PAGE specifies the number of lines per listing page. The 
default is 50. You can specify a positive integer greater than 10. 

A command line / MAP qualifier supercedes any MAP options in an 
options file. The default is /NOMAP. /NOMAP can be used to suppress 
MAP options specified in an options file. 

Specifying the output: OUTPUT 

This option specifies the type, format, and name of the linked output. 

Only one OLTPLT option may be used. /CO.MPLETE specifies that 
complete modules are to be generated, and is the default. When the 
output type is complete. TSADA/MIPS/LIN'K reports any unresolved 
references as errors, 

/INCOMPLETE specifies ihat <m incomplete module is to be generated, 
either as a load module or .is OF .A linked OF module is incomplete if it 
( 1) contains unresolved references that will be resolved in subsequent 


()HT1"44\-\ I.IiVaX.MIHSi IftNON'^U 


1 -.’* 




LINK 


TeleGen2 for VAX/VMS-MIPS 


TSADA/MIPS/LINK operations or (2) is a fully resolved module that 
does not contain an entry point. A module that is incomplete because it 
does not contain an entry point may be output as a load module or as OF 
Incomplete modules with unresolved references must be output in OF. 

LOAD_.MODL'LE. the default, specifies that one output of the Linker 
should be an executable load module. <file> is the optional VMS file 
specification for the output. If <file> does not include an file type, the 
Linker appends a file type appropriate to the chosen format (as defined 
below) to the file specification. If you do not specify an output file, the 
linker writes the output of the link to 

<unit>.<file_cype> 
where: 

<unit> The Ada name of the main program unit (if 

present), the name specified as the command line 
parameter, or the name specified as the first 
INPUT option, modified as necessary to form a 
valid VMS file specification, 

<f ile__cype> The chosen load module format determines this 

file type. Load modules can be in Execute Form 
( EF) OCS88 common file format (.588), or in S 
Record file format ( SR). 

The / OBJECT FORM option specifies that the output of the linker is to 
be linked OF Linked OF is output in the Ada library as an object form 
module component. < lib_comp> is any valid library component name. If 
you do not specify a library component, the linker puts the output of the 
link into the library as the object form module: 

<unit> 

where 

<unic> The Ada name of the mam program (if present), the name 

specified as the command line parameter, or the name specif ied 
as the first I.NTLT option. Incomplete linked OF files may be 
used as input in subsequent TSaDA/MIPS/LINK operations. 

The linker can generate a load module, an OF module, or both For 
example, incomplete objects that will be used as phantoms must be output 
both as a load module for downloading and as Object Form for 
subsequent linkage. 

Specification of both /COMPLETE and /INCOMPLETE is an error 


l-JX 


()PT l744N-\ l.lAAX.MIPSi ISNON'ill 




Command options 


LINK 


Terminating Options File Input and Unking: QUIT 

This option is used to terminate interactive options input and abort the 
TSADA/MIPS/LINK operation. 

Specifying a Range of Memory: REGION 

This option names a memory region and specifies its location in physical 
memory. This named memory region may be used in subsequent 
LOCATE options. In addition, the REGION option may be used to 
specify an unused region of memory. Multiple REGION options may be 
used. /LOW_BOUND and /HIGH_BOUNT) are the bounds of the 
memory region. These qualifiers and associated values are mandatory. 

An < address > can be specified as a decimal value, a hexadecimal based 
literal in Ada syntax (16#hexadecimal#), or an unsigned hexadecimal 
value in VMS format (^Xnexadecimal). 

/UNUSED is an optional qualifier used to specify that the Linker is not 
to use this memory region. Unused memory regions do not need to be 
named. 

< region > is a name that you use to designate a region of memory. 

1.4.3. Required symbol assignments 

The following symbols must hae values assigned to them in the options 
file. 

ada_USER_STACK_LOCaTION This symbol represents the base location for the 

main subprogram s stack. 

ADA_INTERRUPT_STACK_LOCATION This symbol represents the base location for the 

interrupt stack. This stack is used during Ada nad 
Machine exception procession. 

ADA_HEAP_LOCATION This symbol represents the base location for the 

run-time heap. 

ADA_USER_STACK_SIZE This symbol represents the size of the main 

subprogram’s stack. The value associated with this 
symbol will be added to the 
ada_USER_STack_LOCATION to determine the 
top of this stack (the stack grows from high to low 
addresses). 

aDa_INTERRUPT_STACK_SIZE This symbol represents the size of sthe interrupt 

stack. The value associated with this symbol will 
he added to the ADA INTERRUPT STACK to 


IA\{)V9U 






LINK 


TeleGen2 for VAX/VMS-MIPS 


determine the top of this stack (the stack grows 
from high to low' addresses). 

ADA HEAP_SIZE This symbol represents the size of the run-time 
heap. The value associated with this symbol w ill 
be added to the ADA_HEAP_L0CATI0N value to 
define the heap boundaries in memory 

ENV_raM_DISK_AREA This symbol represents the location of a Ram Disk 

that can be used as an internal storage device. 
When a non-zero value is assigned to this symbol. 
64k of memory will be set aside for the Ram Disk 
to use. Specifying a zero value will disable the Ram 
Disk and cause no memory to be allocated. 


ADA STATUS_WORD This symbol represents the default setting for the 
CpO status register. 

ADA_BOARD_DEBUG A non-zero value assigned to this symbol allows 

the use of the board prom debugger. A zero value 
disables use of the board prom debugger. 

ADA_TIMER_ENABLE A non-zero value assigned to this symbol allows 

the timer to be enabled. A zero value disbables 
the timer. 


ADA_SLICE_QUANTUM This value indicates the number of timer interrupts 

that constitute a time slice quantum. A value of 
zero disables time slicing. 


1.4.4. Example options file 


Here is an example of a typical options file. 


TARGET MIPS 

’ Execute the program out of kseg I. Specify all addresses as 

' virtual addresses. 

I Locate the component ENVMIPS at 16fla00c_0000il. ENVMIPS is 

' the startup routine. Locate the rest of the program at 

' I6/M00c_'000/1 and higher. 

I 

LOCATE/COMPONENT_NAME-ENVM1PS/OFM/AT-XXAOOCOOOO 

LOCATE/AT-XXAO0C50O0 

t 

' Generate a link map and include in that map a list of the 

' local symbols as well as a hexadeci.mai display of the execura 


l-4lt 


()PT-r44\.M.li\A\.MIFSi 16N()\9<I 






Command options 


LINK 


MAP/LOCAL/IMAGE 

! Locate the base address of the tiain stack at 16';a008_0CCCi--. 

! the base address of the interrupt stack at I6i^aOC9_OCOOif. ar. 

' the heap at 16?/a009_5000#. 

DEFINE/ADDRESS/ADA_USER_STACK_LOCATION=*4XA0080000 
DEFINE/ADDRESS/ADA~INTERRUPT_STACK_LOCATION=r.XA0090000 
DEFINE/ADDRES S/ADA~HEAP_LOCATION-%XAOO 9 5000 

I 

! Specify the size of the main stack to be 16>/f000)/ placing 

! the top of the main stack at 16»>a008_5000f>. 

I 

! Specify the size of the interrupt stack to be 16)>4000'> placi 

! the top of the interrupt stack at 16/^a009_4000^/ 

I 

! Specify the size of the heap. The heap will occupy memory 

! between 16//a009_5000// to L6//a00a_5000?/. 

t 

DEFINE/ADA USER_STACK_SIZE-XXOOOOFOOO 

DEFINE/ADA~INTERRUPT_STACK_SIZE-%X00004000 

DEFINE/ADA~HEAP_SIZE-2XOOOIOOOO 

I 

' Disable use of a Ram Disk. 

f 

DEFINE/ENV_RAM_DISK_AREA-0 

I 

' Define the initial value of the CpO status register. 

f 

DEFINE/ADA_STATUS_UORD-r,x3000BF01 

I 

' Enable use of the board prom debugger. 

f 

DEFINE/ADA_BOARD_DEBUG-r.x00000001 

I 

' Enable the timer. 

f 

DEFINE/ADA_TIMER_ENABLE-5;x00000001 
' Disable time slicing. 

DEFINE/ADA_SLICE_QUANTUM-%x000O0000 


()PT-r44N-M.l,\X\.\||PSl 16S()V9<t 


1-41 






TeleGen2 for VAX-MIPS 


2.2.2. Enumeration type attributes 

'Extended_Image 

Usage : 

X'Extended_Image(Item.Width,Uppercase) 


Returns the image associated with Item as defined in Text_IO.Enumeration_IO. 
The Text_IO definition states that given an enumeration Literal, it will output the 
value of the enumeration literal (either an identifier or a character literal). The 
character case parameter is ignored for character literals. (LRM 14.3.9:9) 

For a prefix X that is a discrete type or subtype; this attribute is a function that 
may have more that one parameter. The parameter Item must be an enumeration 
value. The image of an enumeration value is the corresponding identifier, which 
may have character case and return string width specified. 


Parameter descriptions : 


Item 

The item for which you want the image; it is passed to the 
function. Required 

Width 

The minimum number c. characters to be in the struig that is 
returned. If no width is specified, the default (0) is assumed. 

If the Width specified is larger tha.n the image of Item, the re¬ 
turn string is padded with trailing spaces. If the Width 
specified is smaller than the image of Item, the default is as¬ 
sumed and the image of the enumeration value is output com¬ 
pletely. Optional 

Uppercase 

An indication of whether the returned string is in uppercase 
characters. In the case of an enumeration type where the 
enumeration literals are character literals. Uppercase is ig¬ 
nored and the case specified by the type definition is taken. If 
no preference is specified, the default (true) is assumed. Op¬ 
tional 

--- 


N()TE-r.^2-\l.HV\\.NtlPSi 


16 N()\‘X» 










VAX-MIPS Validation information 


Examples : 

Suppose the following types were declared 

type X is (red, green, blue, purple); 
type Y is ('a', 'B'. 'c', 'D'); 

Then the following would be true 


X'Extended_Image(red) 

- 

"RED" 

X'Extended_Image(red, 4) 

- 

"RED 

X'Extended_Image(red,2) 

- 

"RED" 

X'Extended_Image(red,0,false) 

- 

"red" 

X'Extended_Image(red,10,false) 

- 

"red 

Y'Extended_Image('a') 

- 

" ' a'" 

Y'Extended_Image('B') 

- 

ti f g»It 

Y'Extended_Image('a',6) 

= 

It »a» 

Y'Extended_Image('a',0,true) 

- 

" ' a' " 


’Extended Value 


Usage : 

X'Extended_Value(Item) 

Returns the image associated with Item as defined in Text_10.Enumeration_IO. 
TTie Text_IO definition states that it reads an enumeration value from the 
beginning of the given string and returns the value of the enumeration literal that 
corresponds to the sequence input. (LRM 14.3.9:11) 

For a prefix X that is a discrete type or subtype; this attribute is a function with a 
single parameter. The actual parameter Item must be of predefined type string. 
Any leading or trailing spaces in the string X are ignored. In the case where an 
illegal string is passed, a Constraint_Error is raised. 


Parameter descriptions: 


Item 

A parameter of the predefined type string; it is passed to the 


function. The type of the returned value is the base tvpe of .X. 


Required 


Examples : 

Suppose the following t%pe were declared 

type X is (red. green, blue, purple); 

Then the following would be true 

X'Extended_Value("red") = red 

X'Extended_Value(" green”) = green 


N<)Tt-r.^:.vi.i(\x\.MiPSi i6\()\vo 








TeleGen2 for VAX-MIPS 


X'Extended_Value(" Purple") » purple 
X'Extended_Value(" GreEn ") » green 

’Extended_Width 

Usage : 

X'Extended Width 


Returns the width for subtype of X. 

For a prefix X that is a discrete type or subtype; this attribute is a function. This 
attribute yields the maximum image length over all values of the enumeration type 
or subtype X. 

Parameter descriptions: 


There are no parameters to this function. This function returns the width of the 
largest (width) enumeration literal in the enumeration type specified by X. 

Examples : 

Suppose the following types were declared 

type X Is (red, green, blue, purple); 
type Z is (XI, X12, X123, X1234); 

Then the following would be true 

X'Extended_Width =6 -- "purple" 

Z'Extended“width - 5 -"X1234" 


:4 


NOTt-l’.^’A 1,|(\A,\.MIPS| 


16N()\V() 





VAX-MIPS Validation Information 


2.2.3. Floating point attributes 

’Extended_Iinage 

Usage : 

X'Extended_Image(Item,Fore,Aft,Exp,Base,Based) 


Returns the image associated with Item as defined in TexT_IO.Float lO. The 
Text_IO definition states that it outputs the value of the parameter Item as a 
decimal literal with the format defined by the other parameters. If the value is 
negative, a minus sign is included in the integer part of the value of Item. If Exp is 
0, the integer part of the output has as many digits as are needed to represent the 
integer part of the value of Item or is zero if the value of Item has no integer part. 
(LRM 14.3.8:13, 14.3.8:15) 

Item must be a Real value. The resulting string is without underlines or trailing 
spaces. 


Parameter descriptions : 


Item 

The item for which you want the image; it is passed to the 
function. Required 

Fore 

The minimum number of characters for the integer part of the 
decimal representation in the return string. This includes a 
minus sign if the value is negative and the base with the ’#’ if 
based notation is specified. If the integer part to be output has 
fewer characters than specified by Fore, leading spaces are 
output first to make up the difference. If no Fore is specified, 
the default value (2) is assumed. Optional 

Aft 

The minimum number of decimal digits after the decimal 
point to accommodate the precision desired. If the delta of 
the type or subtype is greater than 0.1. then Aft is 1. If no Aft 
is specified, the default (X‘Digits-1) is assumed. If based nota¬ 
tion is specified, the trailing #’ is included in Aft. Optional 

Exp 

The minimum number of digits in the exponent. The exponent 
consists of a sign and the exponent, possibly with leading 
zeros. If no Exp is specified, the default (3 ) is assumed. If 

Exp is 0, no exponent is used. Optional 

Base 

The base that the image is to be displayed in. If no base is 
specified, the default (10) is assumed. Optional 

Based 

An indication of whether you want the string returned to be m 
based notation or not. If no preference is specified, the de¬ 
fault (false) is a.ssumed. Optioiuil 


N()TE-1732.V 1.1 ( VA.X.M IPS) 16NO\ 










TeleGen2 for VAX-MIPS 


Examples : 


Suppose the following type were declared 

type X is digits 5 range -10.0 .. 16.0; 

Then the following would be true 

X'Extended_Image(5.0) 

X'Extended_Image(5.0,1) 

X'Extended_Image(-5.0,1) 

X'Extended_Image(5.0,2,0) 

X'Extended_Image(5.0,2,0,0) 

X'Extended_Image(5.0,2,0,0,2) 

X'Extended_Image(5.0,2,0,0,2,True) 

X'Extended_Image(5.0,2,2,3,2,True) 


" 5.0000E+00" 
"5 .OOOOE+00" 
"-5 .OOOOE+00" 
” 5.0E+00" 

" 5.0" 

" 101 . 0 " 

"2/nOl.Of/" 

”2/n-iy/E+02" 


’Extended Value 


Usage : 

X'Extended_Value(Item) 


Returns the value associated with Item as defined in Text lO.Float lO. The 
Text_IO definition states that it skips any leading zeros, then reads a plus or 
minus sign if present then reads the string according to the syntax of a real literal. 
The return value is that which corresponds to the sequence input. (LR.M 14.3.8;9, 
14.3.8:10) 

For a prefix X that is a discrete type or subtype; this attribute is a function with a 
single parameter. The actual parameter Item must be of predefined type string. 
Any leading or trailing spaces in the string X are ignored. In the case where an 
illegal string is passed, a Constraint_Error is raised. 


Parameter descriptions : 


Item 

A parameter of the predefined type string; it is passed to the 


function. The type of the returned value is the base tvpe of the 


input string. Required 


Examples: 

Suppose the tollowing type were declared 

type X is digits 5 range -10.0 .. 16.0; 
Then the tollowmg would he true 

X’Extended Value("5 0") = 50 


If, 


n()TE-it^:-m.iiva\.\iifs» i^nowu 





VAX-MIPS Validation Information 


X'Extended_VaLue("0.5El") =5.0 

X'Extended Value . 0L//E2") = 5.0 


’Extended Digits 

Usage : 

X'Extended_Digits(Base) 

Returns the number of digits using base in the mantissa of model numbers of the 
subtype X. 

Parameter descriptions : 


Base 


The base that the subnpe is defined in. If no base is specified, 
the default (10) is assumed. Optional 


E.xamples : 

Suppose the following type were declared 

type X is digits 5 range -10.0 .. 16.0; 

Then the following would be true 
X'Excended_Digits » 5 

2.2.4. Fixed-point attributes 

’Extended_Iniage 

Usage : 

X'Extended_Image(Item.Fore,Aft.Exp,Base.Based) 


Returns the image associated with Item as defined in Text_IO.FLxed_IO. The 
Text_IO definition states that it outputs the value of the parameter Item as a 
decimal literal with the format defined by the other parameters. If the value is 
negative, a minus sign is included in the integer part of the value of Item. If E.xp is 
0, the integer part of the output has as many digits as are needed to represent the 
integer part of the value of Item or is zero if the value of Item has no integer part. 
(LRM 14.3.8:13, 14,3.8:15) 

For a prefix ,X that is a discrete tvpe or subtype; this attribute is a function that 
m.i\ have more than one parameter. The parameter Item must be a Rea! value. 
The resulting string is without underlines or trailing spaces. 


N<)Tt-r3:-M.l(\A.\.MIPSi 16\()\9n 







TeleGen2 for VAX-MIPS 


Parameter descriptions : 


Item 

The item for which you want the image; it is passed to the 
function. Required 

Fore 

The minimum number of characters for the integer part of the 
decimal representation in the return string. This includes a 
minus sign if the value is negative and the base with the '#’ if 
based notation is specified. If the integer part to be output has 
fewer characters than specified by Fore, leading spaces are 
output first to make up the difference. If no Fore is specified, 
the default value (2) is assumed. Opiionai 

Aft 

The minimum number of decimal digits after the decimal 
point to accommodate the precision desired. If the delta of 
the type or subtype is greater than 0.1. then Aft is 1. If no Aft 
is specified, the default (X’Digits-1) is assumed. If based no¬ 
tation is specified, the trailing ’#’ is included in Aft. Opnonal 

Exp 

The minimum number of digits in the exponent; the exponent 
consists of a sign and the exponent, possibly with leading 
zeros. If no Exp is specified, the default (3 ) is assumed. If 

Exp is 0. no exponent is used. Optional 

Base 

The base in which the image is to be displayed. If no base is 
specified, the default (10) is assumed.- Optional 

Based 

An indication of whether you want the string returned to be in 
based notation or not. If no preference is specified, the de¬ 
fault (false) is assumed. Optional 


:,s 


N<)TE-r3:-M.li\AXMIPS) 


















VAX-MIPS Validation Information 


Examples : 


Suppose the following type were declared 


type X is delta 0.1 range -10.0 .. 17.0; 


Then the following would be true 

X'Extended_Image(5.0) 
X'Extended_Image(5 0,1) 

X'Extended_Image(-5.0,1) 
X'Extended_Image(5.0,2,0) 
X'Extended_Image(5.0,2,0,0) 

X'Extended_Image(5.0,2,0,0.2) 

X ’ Extended_Iinage (5.0,2,0.0,2. True) 
X'Excended_Image(5.0,2,2,3,2,True) 


" 5.00E+00" 
"5.00E+00" 
"-5.OOE+OO” 

” 5.0E+00" 

" 5.0" 

" 101 . 0 " 

"unoi.oir 

"2/n.l#E+02" 


'Extended Value 


Usage : 

X'Extended_Value(Image) 


Returns the value associated with Item as defined in Text_IO.Fixed_IO. The 
Text lO definition states that it skips any leading zeros, reads a plus or minus sign 
if present, then reads the string according to the syntax of a real literal. The 
return value is that which corresponds to the sequence input. (LRM 14.3.8:9, 
14.3.8:10) 

For a prefix X that is a discrete type or subtype; this attribute is a function with a 
single parameter. The actual parameter Item must be of predefined type string. 
.'\ny leading or trailing spaces in the string X are ignored. In the case where an 
illegal string is passed, a Constraint_Error is raised. 


Parameter descriptions : 


Image 


Parameter of the predefined type string. The type of the re¬ 
turned value is the base type of the input string. Required 


Examples : 

Suppose the following type were declared 

type X is delta 0.1 range -10 0 . 17.0; 

Then the following would be true 

X'Extended_Value('’5.0”) » 5 0 

X'Extended Value(”0.5E1") - 50 




I h\A.\.MIPSi I6N()V9(I 






TeleGen2 for VAX-MIPS 


X'Extended_Value("2#1.01//E2”) - 5.0 
’Extended_Fore 

Usage : 

X'Extended_Fore(Base,Based) 

Returns the minimum number of characters required for the integer part of the 
based representation of X. 


Parameter descriptions : 


Base 

The base in which the subtype is to be displayed. If no base is 
specified, the default (10) is assumed. Optional 

Based 

An indication of whether you want the string returned to be in 
based notation or not. If no preference is specified, the de¬ 
fault (false) is assumed. Optional 


Examples : 

Suppose the following type were declared 

type X is delta O.L range -10.0 .. 17.1; 

Then the following would be true 

X'Extended_Fore - 3 -- "-10" 

X'Extended_Fore(2) =6 " 10001" 

’Extended_.\n 

Usage : 

X'Extended_Aft(Base,Based) 

Returns the minimum number of characters required for the fractional part of the 
based representation of X. 


>(» 


N()TE-r3:-\ l.lAA.X.MIHSi I6\()\'>n 







VAX-MIPS Validation Information 


Parameter descriptions: 


Base 

The base in which the subtype is to be displayed. If no base is j 
specified, the default (10) is assumed. Optional 

Based 

An indication of whether you want the string returned to be in 
based notation or not. If no preference is specified, the de¬ 
fault (false) is assumed. Optional 


Examples : 

Suppose the following type were declared 

type X is delta 0.1 range -10.0 .. 17.1; 

Then the following would be true 

X'Extended_Af t - 1 -“1" from 0.1 

X'Extended_Aft(2) - A - "OOOrfrom 2i*O.OOOM 




n()TE-i'j:-vi.1(\\x.mipsi ianovw 









TeleGen2 for VAX-MIPS 


3. Package System 

The current specification of package System is provided by the following, 
with Unchecked_Conversion; 

package System is 


-- CUSTOMIZABLE VALUES 


type Name is (TeleGenZ); 


System_Name 


constant name :=■ TeleGenZ; 


Memory_Size 

Tick 


constant ;= (2 ** 31) -1; --Available memory, in storage units 
constant := 1.0 / 100.0; --Basic clock rate, in seconds 


type Task_Data is 
record 
null; 

end record; 


-- Adaptation-specific customization information 
-- for task objects. 


NON-CUSTOMIZABLE, IMPLEMENTATION-DEPENDENT VALUES 


Storage_Unit 

Min_Int 

Max_Int 

Max_Digits 

Max_Mantissa 

Fine Delta 


constant 

constant 

constant 

constant 

constant 

constant 


8 ; 

-(2 ** 31) ; 
(2 ** 31) - 
15; 

31; 

1.0 / (2 ** 


1 ; 


Max Mantissa) ; 


subtype Priority is Integer Range 0 .. 63; 


-- ADDRESS TYPE SUPPORT 


type Memory is private; 

type Address is access Memory; 

-- Ensures compatibility between addresses and access types 
-- Also provides implicit NULL initial value. 


NOTt-rilA 1,1(\AX.\IIPS| 16N(>\V<I 








VAX-MIPS Validation Information 


NulI_Address: constant Address :» null; 

-• Initial value for any Address object 


type Address_Value is range -(2**31)..(2**31)-1; 


-- A numeric representation of logical 


addresses for use in address clauses 


Hex_80000000 

Hex~90000000 

Hex~A0000000 

Hex~B0000000 

Hex“c0000000 

Hex~D0000000 

Hex~E0000000 

Hex~F0000000 


constant Address_Value 

- - 16#80000000# 

constant Address_Value 

- - 16#70000000# 

constant Address_Value 

- - 16#60000000# 

constant Address_Value 

- - 16#50000000# 

constant Address_Value 

- - 16#40000000# 

constant Address_Value 

- - 16#30000000# 

constant Address_Value 

- - 16#20000000# 

constant Address_Value 

- - I6#10000000# 


-- Define nvimeric offsets to aid in Address calculations 
-• Example: 

for Hardware use at Location (Hex_F0000000 + 16#2345678y/) ; 


function Location is new Unchecked_Conversion (Address_Value, Address); 
-- May be used in address clauses: 

Object: Sorae_Type; 

for Object use at Location (16)74000#); 


function Label (Name; String) return Address; 
pragma Interface (META, Label); 

-- The LABEL meta-function allows a link name to be specified as address 
-- for an imported object in an address clause: 

Object: Some_Type; 

-- for Object use at Label("OBJECT$$LINK_NAME"); 

-- System.Label returns Null_Address for non-literal parameters. 


-- CALL SUPPORT 


type Subprogram_Vaiue IS 
record 




N()TE-I7.12-V|.I(\ A.X.MIPSi I6V()\9() 






TeleGen2 for VAX-MIPS 


Proc_addr : Address; 

Parent_frame : Address; 
end record; 

-- Value returned by the implementation-defined 'Subprogram_Value 
-- attribute. The attribute is not defined for subprograms with 
-- parameters, or functions. 


private 

type Memory is 
record 
null; 

end record; 
end System; 

3.1. System.Label 

The System.Label meta-function is provided to allow users to address objects by a 
linker-recognized label name. This function takes a single string literal as a 
parameter and returns a value of System.Address. The function simply returns 
the run-time address of the appropriate resolved link name, the primary purpose 
being to address objects created and referenced from other languages. 

• When used in an address clause, System.Label indicates that the .A.da 
object or subprogram is to be referenced by a label name. The actual 
and this capability simply allows the user to import that object and 
reference it in Ada. 

• When used in an expression, System.Label provides the link time 
address of any name; a name that might be for an object, a subprogram, 
etc. 


N()TE-r.^2-\ l.l(\A\.\1IPSi 16N()\VU 






TeleGen2 for VAX/VMS-MIPS 


0KT-I'44N.\ I 1i \ aX.MIFSi 







APPENDIX C 


APPE2TOIX F OF THE Ada STANDARD 


The only allowed implementation dependencies correspond to 

implementation-dependent pragmas, to certain machine-dependent conventions 
as mentioned in Chapter 13 of the Ada Standard, and to certain allowed 
restrictions on representation clauses. The implementation-dependent 
characteristics of this Ada implementation, as described in this Appendix, 
are provided by the customer. Unless specifically noted otherwise, 
references in this Appendix are to compiler documentation and not to this 
report. Iit^lementation-specific portions of the package STANDARD, which 
are not a part of Appendix F, are given on the following page. 


C-1 





ATTACHMENT F: PACKAGE STANDARD INFORMATION 

For this target system the numeric types and their properties are as follows 

INTEGER: 

size — 32 

first = -2147483648 

last = *2147483647 

SHORT INTEGER: 

size = 16 
first = -32768 
last = -r32767 

SHORT SHORT INTEGER: 


size = 8 
first = -128 
last = +127 

FLOAT: 

size = 32 
digits = 6 

’first = -1.70141E^-38 
’last = -rl.7014lE-+38 
machine_radix = 2 
machine_mantissa = 24 
machineemin = -125 
machineemax = -rl27 

LONG FLOAT: 

size = 64 
digits = 15 

•first = -8.98846567431158E*307 
•last = -8.98846567431158E-307 
machine radix ^ 2 
machine mantissa = 53 
machine emin = -1021 
machine emax = -1023 

DURATION: 

size = 32 

delta = 6.10351562500000E-005 
first = -86400 
last = -86400 


C-2 






Table of Contents 


1 Implementation-defined pragmas. 3 

1.1 Pragma Comment . 4 

1.2 Pragma Export. 4 

1.3 Pragma Images. 6 

1.4 Pragma Interface_Information. 6 

1.5 Pragma Interrupt. 9 

1.6 Pragma Linkname. 13 

1.7 Pragma No_Suppress. 14 

1.8 Pragma Preserve_Layout . 14 

1.9 Pragma Suppress All. 15 

2 Implementation-dependent attributes . 16 

2.1 ’Address and’Offset. 16 

2.2 Extended attributes for scalar types . 16 

2.2.1 Integer attributes. 18 

2.2.2 Enumeration type attributes. 22 

2.2.3 Floating point attributes. 25 

2.2.4 Fixed-point attributes . 27 

3 Package System. 32 

3.1 System. Label. 34 





























LRM Appendix F for TeleGen2 


The Ada language definition allows for certain target dependencies. These dependencies 
must be described in the reference manual for each implementation, in an ‘Appendix F” that 
addresses each point listed in LRM Appendix F. Table 1-1 constitutes Appendix F for this 
implementation. Points that require further clarification are addressed in sections referenced 
in the table. 


N()TE-1T3:.Vi iiWX.MIPS) IfiNOVW 




TeleGen2 for VAX-MIPS 


Table 1-1. LRM Appendix F for TeieGen2 


(1) Implementation-Dependent Prag¬ 
mas 

j 

(a) Implementation-defined pragmas: Comment, Im- j 
ages, Interface_Information. Interrupt, Linkname. ] 
No Suppress, Preserve Layout, and Suppress All 
(refer to Section 1). 

(b) Predefined pragmas with implementation- depen- i 

dent characteristics; 1 

• Interface (assembly) | 

• List and Page (in context of source/error 
compiler listings.) 

• Pack. 

Other supported predefined pragmas: 

Controlled Shared Suppress 

Elaborate Priority Inline 

Predefined pragmas partly supponed 

Memory_Sii; Storage_Unit System_Name 

These pragmas are allowed if the argument is the 
same as the value specified in the System package. 

Not supported: Optimize 

(2) Implementation-Dependent Attri¬ 
butes 

The predefined attribute Address is not supported for 
packages. 

Extendedlmage ’Extended_Fore 

'Extended_Value Subprogram Value 

'Extended Width Address 

'Exiended_Aft Offset (in .MCI) 

'Extended Digits 

Refer to Section 2 for information on the 
implementation-defined extended attributes listed 
above. 

(3) Package System 

Refer to Section 3 | 

1 

1 (4) Restrictions on Representation 

1 Clauses 

1 

1_ 

Supported except as indicated in the following (LR.M i 
13.2 - 13.5). Pragma Pack is supported, except for i 

dynamically sized components. 

'! 

. Continued on next pa^e . 

i 

----- --- - . . ■ ■ >1 


N()TE-r3:-M.I(VA\.MIPS) I6N()V9<) 



















w itt»w 


Table 1-1. LR.M Appendix F for TeleGen2 (Contd) 


i . Connnued from prev ious paqe . 

I 

(5) Implementation-Generated 
.Names 

.None 

(6) Address Clause Expression In¬ 
terpretation 

An expression that appears in an object addrc^t' 

IS interpreted as the address of the first storjc-r -r.: : 
the object. 


(") Restrictions on Unchecked 
Conversions 


(8) Implementation-Dependent 

Characteristics of the 1, 0 Pack¬ 
ages. 


Supported except for the case vvhere the destunut;cr. 
type is an unconstrained record or arrav r.pe 


1. In Text lO. the type Count is defined as fciiov.> 
type Count is range 0..(2 ’* 31)-2 

2. In Text_IO. the type Field is defined as follovss 

subtype Field is integer range 0,.1000 


3. In Text_IO, the Form parameter of procedure^ 
Create and Open is not supported. (If sou supns 
a Form parameter with either procedure, it o ig¬ 
nored.) 

4. The standard library contains preinstantiatec '.cr- 
sions of Text IO.Integer_IO for types 
Short_Integer and Integer, and of 
Text_10.Float_10 for types Float and 
Long_Float. Vve suggest that you use the 

ing to eliminate multiple instantiations of tnese 
packages: 

Integer_Te’a_IO Short Inieaer Tj\i !<.' 

Float Text 10 Long_Floai T.m K > 


1. Implementation-defined pragmas 

There are nine implementation-defined pragmas m TeleGenZ pragmas 
Comment, Export. Images. Interface Information. Interrupt. Lmkname. 
.No Suppress. Preserve_Layout. and Suppress_All 


N()Tt r.i:-\ I l(\xX.MIPSi iriNOVun 














TeleGen2 for VAX-Ml PS 


1.1. Pragma Comment 

Pragma Comment is used for embedding a comment into the object code. Its 
syntax is 


pragma Comment ( <string_Literal> ); 


where “ < string_literal > ” represents the characters to be embedded in the object 
code. Pragma Comment is allowed only within a declarative part or immediately 
within a package specification. Any number of comments may be entered into the 
object code by use of pragma Comment. 

1.2. Pragma Export 

Pragma Export allows you to call an Ada subprogram or reference an Ada object 
within an Ada program from program that is written in non-Ada code. The syntax 
of this pragma is 


pragma Export ( [ Name ■> ] <subprogram> | <object_simple_name> 
[, [ Link_Name -> ] <string_literal> ] 

[. [ Language «> ] <identifier> ] 

[. ( Form »> ] <string_literal> ] ); 


where: 


Name The simple name of an Ada subprogram or object, within 
the restrictions of this pragma. 

Link_Name An optional string literal that defines the link name that 
external languages will use to access the named 
subprogram or object. 


Language An optional identifier that defines the name of the foreign 
language that will access the subprogram or object. 
Supported languages include Assembly, C and 

fortran 


Form An optional string literal used to encode information about 
how to pass parameters or about the kind of storage to use 
for objects. This target dependent argument is ignored in 
the MIPS R2000/R3000 implementation of TeleGen2. 

The pragma Export can be given tor a library subprogram or a nonderived 
subprogram. It is also allowed to be given for an object that is declared 
immediately within a package specitication or body, and i.s declared within another 
subnrogram. task, or generic unit 


4 


N()TE-I7?2.V1,1«\aX.MIHS) I6\()\'<n 



VAX-MIPS Validation Information 


The pragma Export may be used only once for a given object or subprogram 
name. It must be given immediately within the same specification or generic pan 
that contains the declaration of the object or subprogram. In the case of a library 
subprogram, the pragma must immediately following the subprogram declaration. 
If the name corresponds to more than one subprogram declared earlier within the 
same package specification or declarative part, the compiler issues a warning and 
the pragma is ignored. 

The arguments for pragma Export are defined here. 

Name The name argument should be the simple name of a 

subprogram or object, and must not be a name declared 
by an object renaming declaration. The name also must 
not refer to an object that is not statically sized. If your 
object requires dynamic storage allocation, you can 
declare another object with the type System.Address that 
could initialized to the address of the dynamic object. You 
may then export the address object. 

The name is allowed to be a name given by a subprogram 
renaming only if the renaming declaration occurs 
immediately within the same package specification or 
declarative part as the subprogram that is renamed, and an 
Export pragma does not otherwise apply to the 
subprogram. By applying pragma Export to a renamed 
subprogram, it is possible to export one or more 
subprograms from among a set of overloaded declarations. 

The name must not denote a subprogram for which you 
have specified pragma Interface. Similarly, pragma 
Interface must not be used with a subprogram for which 
you have specified pragma Export. 

Link Name The link name is used by external languages to access the 
named subprogram or object. If you do not explicitly state 
a link name, the simple name of the subprogram or obj^xt 
is used by default. 

Language This optional argument defines the name of the foreign 

language that will access the subprogram or object. If you 
do not specify a value for this argument for a subprogram, 
the TeleGen2 implementation uses the default calling 
convention for external calls to the subprogram. 

This argument is not normally specified when using 
praema Export for objects This useage depends on the 
special allocations and .iccess needs specific to a particui.ir 
iangu.ige 


NOTE-1'.tl-V 1.1 (VAX. Ml PS I 16N()V9(t 




TeleGen2 for VAX-MIPS 


Form This argument is currently ignored in the VQPS 
R2000/R3000 implementation of TeleGen2. 

1.3. Pragma Images 

Pragma Images controls the creation and allocation of the image and index tables 
for a specified enumeration type. The image table is a literal string consisting of 
enumeration literals catenated together. The index table is an array of integers 
specifying the location of each literal within the image table. The length of the 
index table is therefore the sum of the lengths of the literals of the enumeration 
type; the length of the index table is one greater than the number of Literals. 

The syntax of this pragma is 

pragma Images(<en\imeracion_cype>. Deferred); 

-or- 

pragma Images(<enumeratlon_type>. Immediate); 


The “deferred” option saves space in the literal pool by not creating image and 
index tables for an enumeration type unless the ’Image, ’Value, or ‘Width attribute 
for the type is used. If one of these attributes is used, the tables are generated in 
the literal pool of the compilation unit in which the attribute appears. If the 
attributes are used in more than one compilation unit, more than one set of tables 
is generated, eliminating the benefits of deferring the table. In this case, the 
"immediate” option saves space by causing a single image table to be generated in 
the literal pool of the unit declaring the enumeration type. For the .VOPS 
R2000/R3000 , “immediate” is the default option. 

For a very large enumeration type, the length of the image table will exceed 
Integer’Last (the maximum length of a string). In this case, using either 

pragma Images(<en\imeracioii_type>, Immediate); 

or the ’Image, ’Value, or 'Width attribute for the type will result in an error 
message from the compiler. Therefore, use the “deferred” option, and avoid 
using ’Image, ’Value, or Width in this case. 

1.4. Pragma Interface information 

The existing Ada interface pragma only allows specification of a language name. 

In some cases, the optimizing code generator will need more information than can 
he derived from the language name. Therefore there is a need for an 
implement;ition-specific pragma, Interface_lnformation. 

There is an extended usage of this pragma for machine code insertion ( MCI) 
prtK'edures which does not use preceding pragma Interface. Other than that 
case, a pragma Interface Information is always a.ssociated with a Pragma 


6 


N<)TE-r.^2-M.l(NA\.MIPSi l6\()\Vt) 







VAX-MIPS Validation Information 


Interface. The syntax is 

pragma Interface_Information (Name, 

Link_Name, 

Mechanism, 

Parameters, 

CLobbered_Regs); 

where 

name 

Link_name 
mechanism 
parameters 
clobbered_regs 

Scope 

Pragma Interface_Information is allowed wherever the standard pragma Interface 
is allowed, and must be immediately preceded by a pragma Interface referring to 
the same Ada subprogram, in the same declarative part or package specification; 
no intervening declaration is allowed between the Interface and 
Interface Information pragmas. Unlike pragma Interface, this pragma is not 
allowed for overloaded subprograms (it specifies information that pertain to one 
specific body of non-Ada code). If the user wishes to use overloaded Ada names, 
the Interface_Information pragma may be applied to unique renaming 
declarations. 

The pragma is also allowed for a library unit; in that case, the pragma must occur 
immediately after the corresponding Interface pragma, and before any subsequent 
compilation unit. 

This pragma may be applied to any interfaced subprogram, regardless of the 
language or system named in the interface pragma. The code generator is 
responsible for rejecting or ignoring illegal or redundant interface information. 

The optimizing code generator will process and check the legality of such 
interfaced subprograms at the time of the spec compilation, instead of waiting for 
an actual use of the interfaced subprogram. This will save the user from extensive 
recompilation of the offensive specification and all its dependents should an illegal 
pragma have been used. 

This pragma is also used for MCI procedures. In that case, the “mechanism" 
should be set to “mci." This allows the user to specify detailed parameter 
characteristics for the call and inlined call to the MCI procedure. When used in 
conjunction with pragma Inline, this allows the user to directly insert a minimal set 
of instructions into the call location. 


— ada_stibprogram_identif ier , required 

— string, default - 

— string, default » "" 

“ string, default « "" 

-- string, default - "" 


N()TE-r.i:-\ I.KN A.X.MIPSi I6N()V9<) 




TeleGen2 for VAX-MIPS 


Parameters 

Name: Ada subprogram identifier . The rule detailed in LRM 13.9 for a 
subprogram named in a pragma Interface apply here as well. As explained above, 
the subprogram must have been named in an immediately preceding Interface 
pragma. 

This is the only required parameter. Since the other parameters are optional, 
positional association may only be used if all parameters are specified, or only the 
rightmost ones are defaulted. 

Link Name: string literal . When specified, this parameter indicates the name the 
code generator must use to reference the named subprogram. This string name 
may contain any characters allowed in an Ada string and must be passed 
unchanged (in particular, not case-mapped) to the code generator. The code 
generator will reject names that are illegal in the particular language or system 
being targeted. 

If this parameter is not specified, it defaults to a null string. The code generator 
will interpret a default link_name differently, depending on the target 
language/system (the default is generally the Ada name, or is derived from it, for 
example, “ Ada name” for C calls). 

Mechanism: string literal . The only mechanism currently implemented is the 
"mci" mechanism used strictly in conjunction with MCI procedures. 

Parameters: string literal . This string, when present, tells the code generator 
where to pass each parameter. This string is interpreted as a positional aggregate 
where each position refers to a parameter of the interfaced subprogram. Each 
position may be one of the following: null, the name of a register, or the word 
■‘stack.” Null arguments imply standard conventions. Thus the string ‘‘r3, stack, 
r5” specifies that the first parameter is to be passed in register r3, the second 
parameter is to be put on the stack in the parameter block (in the proper position 
of the second parameter), and the third parameter is to be passed in register r5. 

Clobbered Regs . These are the registers (comma-separated list) that are 
destroyed by this operation. The code generator will save anything valuable in 
these registers at the point of the call. 


s 


N()TE-l".^2-M KVaX.MIPSi 


i6N()\'#n 





VAX-MIPS Validation Information 


A simple example of the use of pragma Interface_Information is 

procedure Do_Something (Addr: System.Address; Len: Integer); 

pragma Interface (Assembly, Do_Something); 

pragma Interface_Information ( Name => Do_Something, 

Link_Naine => "DOIT", 
Parameters => "R3.R5"); 


1.5. Pragma Interrupt 

The Ada LRM provides for interrupt handlers written in Ada. The approach is to 
associate a task entry with an interrupt source by means of an address clause. 

Such an entry is referred to as an “interrupt entry” (LRM 13.5.1). A task 
containing an interrupt entry is referred to in this section as an “interrupt task.” 
When an interrupt occurs, it is handled as if an entry call had been made by the 
hardware to the entry associated with that interrupt. For example (according to 
the LRM) 

task Interrupc_Handler is 
entry Done; 

for Done use at 16#40)f/; -- Assume that System.Address is 

--an integer type 

end Interrupt_Handler; 

In tl is example, the interrupt entry Done is associated with the interrupt vector at 
hexadecimal address 40. \S^en a physical device causes an interrupt through that 
vector, an entry call is made to Done, which can handle the interrupt in an accept 
statement. 

The AEE provides the facilities required by the LRM and goes substantially 
beyond those requirements to meet the needs of realistic systems. This section 
describes the interrupt-related facilities of the AEE and contrasts them with the 
minimal mechanism defined by the LRM. 

In the TeleGen2 approach, the address clause designating an interrupt entry refers 
to the address of an interrupt descriptor, rather than to fhe address of the physical 
interrupt source. The Interrupt package provides a private descriptor type for this 
purpose. 

type Descriptor is private; 

TTie descriptor type Descriptor is used to associate an Ada task entry with an 
interrupt source. 

If a suitable de.scriptor object of type Descriptor is declared, the LRM example 
then appears as follows; 

Device Interrupt.Descriptor; 


N()TE-1732A l.KVAX .MIPS) lANOVVt) 





TeleGen2 for VAX-MIPS 


task Interrupt_Handiar is 
entry Done; 

for Done use at Device'Address; 
end Interrupt_Handler; 

Package Mips_Signals contains the definitions of all the Mips machine exceptions, 
including hardware and software interrupts. This package also contains 
definitions for all other possible machine exceptions including syscall and break 
exceptions. The machine exception types defined in this package are extendible to 
meet your requirements. For example, interrupts are currently defined to be six 
hardware and two software interrupts. However, if an application is to execute on 
a particular hardware configuration that uses an interrupt decoder, and this 
decoder extends the interrupts to 64 distinct signals, then the type definition for 
package Mips_Signals can be extended to 64 objects. 

In order to associate a handler with a specific Mips machine exception, the 
function Source in package Interrupt must be executed. Function Source takes the 
Mips exception name as a parameter for task handlers, as that name is defined in 
the package Mips_Signals. The function returns an object of type Descriptor. 

function Source( Sig ; in Interrupt_Signcls ) return Descriptor 

For task entries, a call to this function can be used to initialize a Descriptor object, 
such as Device in the preceding example. For instance 

Device : Interirupt.Descriptor Interrupt.Source( IntO ); 

In the following example, a user-implemented Interrupt_Setup package localizes 
the descriptor objects and their interrupt sources. 

with Mips_Signals, Interrupt; 

use Mips_Signals; 

package Interrupt_Setup is 

Actuator : Interrupt.Descriptor Interrupt.Source( IntO ); 
end Interrupt_Setup; 

•A program might then contain a driver task that provides 'he handler 
( interrupt entry) for this interrupt. 

with Interrupt_Setup, System; 
procedure £xampIe_AppIicacion is 

task Actuator_Driver is 
entry Devtce_Ready; 

for Device Ready use at Interrupt_Secup.Actuator'Addre 
end Actuator Driver; 


begin 
nul 1 , 

end Example_Application; 

The cntr\ Device_Ready handles the h.trdw.ire interrupt ( interrupt 0 ) 


It) 


N()TE-r3:-Vl .l(\ AX.MIPSi 





VAX-MIPS Validation Information 


request to which the actuator device is attached. 


Optimized interrupt entries 

The facilities described so far are sufficient to implement interrupt handlers in 
Ada. However, the process of handling an interrupt in this fashion is potentially 
complicated and time-consuming. Ada does not restrict the language features that 
can be used inside the body of an accept statement. Therefore, an interrupt 
handler could contain entry calls to other tasks or even delay statements. 
Furthermore, in the general case, a full Ada context switch must be made to the 
interrupt handler task and then a full context switch back to the interrupted task 
(or potentially some other ready task) when the rendezvous is completed. 

In some cases, the properties of fully general Ada interrupt handlers may suit the 
intended application. In other cases, however, it may be necessary to trade a 
reduction in generality for an increase in performance in order to meet 
application requirements. The AEE addresses these needs by allowing 
programmers to select one of two optimized constructs by which task entries can 
handle interrupts: 

• Synchronization Optimizations 

The interrupt serves only to cause the handler task to become ready to 
execute without requiring an actual context switch as part of servicing the 
interrupt. 

• Function-Mapped Optimizations 

All processing associated with handling the interrupt occurs during the 
rendezvous (in the body of the accept statement) and no interactions 
with other tasks occur during the rendezvous. 


Synchronization optimizations 

A synchronization optimization corresponds to having an empty accept body that 
simply puts the interrupt handler on a ready queue. This optimization is always 
applied when appropriate, without explicit programmer request. For example 

cask body Accuacor_Driver is 
begin 

accept Device_Ready; 

-- Actions responding to the device-ready signal 
end Actuator Driver; 


Occurrence of the sighup signal causes Actuator_Driver to be placed in the ready 
queue. It is activated subsequently when its priority relative to other competing 
tasks so indicates. 


11 


N()TE-I732 VI.1(VAX.MIPS| I6N(>VV(( 






TeleGen2 for VAX-MIPS 


Function-mapped optimizations 

In a function-mapped optimization, all the interrupt handling work is done inside 
the accept body during the rendezvous. When this optimization is invoked, the 
compiler maps the accept body into a function that can be directly called from the 
signal handler. This kind of optimization is restricted to accept statements that do 
not interact with other tasks during the rendezvous. Consider, for example, the 
following fragment 

task body Actuator_Driver Is 
begin 

pragma Interrupt (Function_Mapping); 
accept Device_Ready do 

-- Actions responding to the Device_Ready interrupt, 
end Device_Ready; 
end Actuator Driver; 


The pragma Interrupt applies to the statement immediately following it, which 
must be one of the following three constructs: 

1. A simple accept statement, as described in the preceding. 

2. A while loop directly enclosing only a single accept statement, discussed 
in the following. 

3. A select statement that includes an interrupt accept alternative. 

For reasons related to the loop optimization discussed in the following, the server 
task with a function-mapped accept cannot have a user-specified priority. 

The body of the accept statement handling the interrupt is executed in the 
environment of the interrupted current task. Note that the function-mapped body 
acts much like a classic interrupt procedure and requires no context switch even 
though it acts in the proper lexical environment. 

The interrupt server often executes a small or null amount of non-handler code 
between accepting interrupt entry calls. The interrupt support is designed to take 
advantage of this occurrence to minunize latency in the driver and execute another 
handler with the minimum number of task switches. The best special case for this 
is an accept statement directly embedded inside a loop. For instance, the actuator 
driver is presented with a buffer of actuator commands. The driver contains a 
loop that waits on successive occurrences of the Device_Ready interrupt and 
issues commands out of the buffer. The function-mapping optimization caters to 
thi.s po.ssibility a.s well. Consider the following fragment 


12 


N()TE-I732-V1.I(Va\.MH>S. 1A\()V9<» 






VAX-MIPS Validation Information 


task body Actuator_Driver is 
begin 

pragma Interrupt (Function_mapping); 
while More_Commands loop 
accept Device_Ready do 

-- Issue the next command 
end Device_Ready; 
end loop; 

end Actuator Driver; 


This example shows the second class of constructs to which the function-mapping 
optimization can be applied—a while loop that immediately contains (and onty 
contains) an accept statement for an interrupt entry. The accept statement must 
meet the constraint described earlier (i.e., contain no interactions with other 
tasks). 

1.6. Pragma Linkname 

Pragma Linkname is used to provide interface to any routine whose name cannot 
be specified by an Ada string literal. This allows access to routines whose 
identifiers do not conform to Ada identifier rules. 

Pragma Linkname takes two arguments. The first is a subprogram name that has 
been previously specified in a pragma Interface statement. The second is a string 
literal specifying the exact link name to be employed by the code generator in 
emitting calls to the associated subprogram. The syntax is 


pragma Interface ( assembly. <subprogram_name> ); 
pragma Linkname < <subprogram_name>, <string_literal> ); 

If pragma Linkname does not immediately follow the pragma Interface for the 
associated program, a warning will be issued saying that the pragma has no effect. 

A simple example of the use of pragma Linkname is 

procedure Dummy_Access( Dummy_Arg : System.Address ); 
pragma Interface (assembly, D\jmmy_Access ); 
pragma Linkname (Dummy_Access, "_access'’); 

\nte: It is preferable that the user use pragma Interface_lntormation for this 
functionality. 


I < 


N<)TF.-l732.V|.|(\A.\.MIPSt I6N()\9(I 





TeleGen2 for VAX-MIPS 


1.7. Pragma No_Suppress 

No Suppress is a TeleGen2-defined pragma that prevents the suppression of 
checks within a particular scope. It can be used to override pragma Suppress in 
an enclosing scope. No_Suppress is particularly useful when you have a section of 
code that relies upon predefined checks to execute correctly, but you need to 
suppress checks in the rest of the compilation unit for performance reasons. 

Pragma No_Suppress has the same syntax as pragma Suppress and may occur in 
the same places in the source. TTie syntax is 

pragma No_Suppress (<idencifier> [, [ON =>] <name>]); 
where: 

< identifier > The type of check you want to suppress. Checks that may 
be suppressed are Access_Check. Discriminant_Check, 
Index Check. Length_Check. Range_Check, 

Division Check, Overflow_Check, Elaboration_Check, 
and Storage_Check (refer to LRM 11.7). 

< name> The name of the object, type/subtype, task unit, generic 
unit, or subprogram within which the check is to be 
suppressed; <name> is optional. 

If neither Suppress nor No_Suppress is present in a 
program, checks will not be suppressed. You may 
override this default at the command level, by compiling 
the file with the /SUPPRESS qualifier and specifying the 
type of checks you want to suppress. For more 
information on /SUPPRESS, refer to other TeleGenZ 
documentation. 

If either Suppress or No Suppress are present, the compiler uses the pragma that 
applies to the specific check in order to determine whether that check is to be 
made. If both Suppress and No_Suppress are present in the same scope, the 
pragma declared last takes precedence. The presence of pragma Suppress or 
No Suppress in the source takes precedence over a /SUPPRESS qualifier 
provided during compilation. 

1.8. Pragma Preserve_Layout 

The TeleGen2 compiler reorders record components to minimize gaps within 
records. Pragma Preserve Liyout forces the compiler to maintain the Ada source 
order of components of a given record type, thereby preventing the compiler from 
performing this record layout optimization. 


14 


\()TE-I732-VI.I(NAX.M1PS) 1(SN()V9<» 







VAX-MIPS Validation information 


The syntax of this pragma is 

Pragma Preserve_Layout ( ON «> Record_Type_Name ) 


Preserve Layout must appear before any forcing occurrences of the record type 
and must be in the same declarative part, package specification, or task 
specification. This pragma can be applied to a record type that has been packed. 
If Preserve Layout is applied to a record type that has a record representation 
clause, the pragma only applies to the components that do not have component 
clauses. These components will appear in Ada source order after the components 
with component clauses. 

1.9. Pragma Suppress AII 

Suppress All is a TeleGen2-defined pragma that will suppress all checks in a 
given scope. Pragma Suppress_All contains no arguments and can be placed in 
the same scopes as pragma Suppress. 

In the absence of pragma Suppress_All or any other suppress pragma, the scope 
which contains the pragma will have checking turned off. This pragma should be 
used in a safe piece of time critical code to allow for better performance. 


N<)TE-I7.^2.\ |.1(\A.\.MIHS) 


lftN()\90 


15 









TeleGen2 for VAX-MIPS 


2. Implementation-dependent attributes 

2.1. ’Address and ’Offset 

For MCI users who need to access Ada objects other than register parameters, 
two attributes are utilized, ’Address and ’Offset. These attributes allow you to 
access compiler information on the location of variables. 'Address is a language- 
defined attribute that has implementation-specific characteristics; Offset is an 
implementation-defined attribute. 

’Address 

This attribute is normally used to access some global control variable or 
composite structure. ’Address is also used in conjunction with local labels. See 
details in the following sections on usage of ’Address in the actual code 
statements. Note that no special code is generated automatically; this attribute 
simply provides the appropriate value for the absolute address. 

’Offset 

This attribute yields the offset of an Ada object from its parent frame. For a 
global object, this is the offset from the base of the compilation unit data section 
(although ’Address is the preferred way to access globals). For objects inside 
subprograms, Offset yields the offset in the local stack frame. This is primarily 
for usage with parameters that are not passed in registers. A secondary usage is 
to code an MCI “function” where an Ada function is wrapped around an .MCI 
procedure declaration and then calls the MCI procedure with inlining, provides 
an efficient way to overcome the language limitation that MCI subprograms can 
only be procedures. 

2.2. Extended attributes for scalar types 

The extended attributes extend the concept behind the Text_10 attributes ’Image. 
'Value, and 'Width to give the user more power and flexibility when displaying 
values of scalars. Extended attributes diff'er in two respects from their predefined 
counterparts; 

1. Extended attributes take more parameters and allow control of the 
format of the output string. 

2. Extended attributes are defined for aU scalar types, including fixed and 
floating point types. 


16 


N()TE-I7.12-VI.1(\\X.MIPS) 16N()\9n 





VAX’MIPS Validation Information 


Extended versions of predefined attributes are provided for integer, enumeration, 
floating point, and fixed point types: 


Integer; 
Enumeration: 
Floating Point: 
Fixed Point; 


’Extended_Image, 

’Extended_Image, 

’Extended_Image, 

’Extended_Image, 
'Extended Aft 


’Extended_v'3lue, 
’Extended_Value, 
'Extended Value, 
'Extended V'alue, 


■Extended_Width 
’Extended_Width 
'Extended_Digits 
’Extended Fore, 


The extended attributes can be used without the overhead of including Text_10 in 
the linked program. The following are examples that illustrates the difference 
between instantiating Text_IO.Float_IO to convert a float value to a string and 
using Float’Extended_Image: 

with Text_IO; 

function Convert_To_String ( FI : Float ) return String is 
Tenip_Str : String (1 .. 6 + Float'Digits ); 

package Flt_IO is new Text^IO.Float_IO (Float); 

begin 

Flt_IO.Put ( Temp_Str, FI ); 
return Tenjp_Scr; 

end Convert_To_String; 


function Convert_To_String_No_Text_IO( FI : Float ) return String is 
begin 

return Float'Extended_Image ( FI ); 
end Convert_To_String_No_Text_IO; 


with Text_IO, Convert_To_String. Convert_To_String_No_Texc_IO; 
procedure Show_Different_Conversions is 

Value : Float 10.03376; 

begin 

Text_I0.Put_Line ( "Using the Convert_To_String. the value of the variable 
is : " & Convert_To_String ( Value ) ); 

Text_I0.Put_Line ( "Using the Convert_To_String_No_Text_IO, the value 
is : " & Convert_To_String_No_Text_IC ( Value ) ); 

end Show Different Conversions; 


N()TE-I73:.V1.|(VAX.MIP.S) I6N()\9*» 


17 






TeleGen2 for VAX-MIPS 


2.2.1. Integer attributes 

’Extended Image 

Usage: 


X'Extended_Iniage(Item.Width,Base,Based,Space_If _Pos itive) 

Returns the image associated with Item as defined in Text_IO.Integer lO. The 
Text_IO definition states that the value of Item is an integer Literal with no 
underlines, no exponent, no leading zeros (but a single zero for the zero value), 
and a minus sign if negative. If the resulting sequence of characters to be output 
has fewer than Width characters, leading spaces are first output to make up the 
difference. (LRM 14.3.7:10,14.3.7:11) 

For a prefix ,X that is a discrete type or subtype; this attribute is a function that 
may have more than one parameter. The parameter Item must be an integer 
value. The resulting string is without underlines, leading zeros, or trailing spaces. 


Parameter descriptions : 


Item 

I 

The item for which you want the image; it is passed to the 
function. Required 

Width 

The minimum number of characters to be in the string that is 
returned. If no width is specified, the default (0) is assumed. 
OptionaJ 

Base 

The base in which the image is to be displayed. If no base is 
specified, the default (10) is assumed. Optional 

Based 

An indication of whether you want the string returned to be in 
base notation or not. If no preference is specified, the default 
(false) is assumed. Optional 

Space_lf Positive 

An indication of whether or not a positive integer should be 
prefixed with a space in the string returned. If no preference 

IS specified, the default (false) is assumed. Optional 


Examples : 

Suppose the following subtype were declared 

subtype X is Integer Range -10. . 16. 

N()TE-1732-VI.|(VA\.MIPS) I6N<)VW 






VAX-MIPS Validation Information 


Then the following would be true 


X'Extended_Image(5) 

X'Extended_Image(5,0) 

X'Extended_Image(5,2) 

X'Extended_Image(5,0,2) 

X'Extended_Image(5,4,2) 
X'Extended_Iniage(5,0,2 ,True) 
X'Extended_Image(5,0,10,False) 
X'Extended_Image(5,0,10,False,True) 
X'Extended_Image(-l,0,10,False,False) 
X'Extended_Image(-1,0,10,False,True) 

X ’ Extended_Iinage (-1,1,10, False, True ) 
X'Extended_Image(-1,0,2.True,True) 

X'Extended_Image(-1,10,2,True,True) 


= "S" 



tt ^ If 

" 101 " 

" 101 " 
"ZiUOW" 

"5" 

II ^ ff 
If ^ ^ If 
ff ^ ^ If 

"-2inir 

-inu” 


'Extended Value 


Usage : 

X'Extended_Value(Item) 

Returns the value associated with Item as defined in Text_IO.Integer_IO. The 
Text_IO definition states that given a string, it reads an integer value from the 
beginning of the string. The value returned corresponds to the sequence input. 
(LRM 14.3.7:14) 

For a prefix X that is a discrete type or subtype, this attribute is a function with a 
single parameter. The actual parameter Item must be of predefined type string. 
Any leading or trailing spaces in the string X are ignored. In the case where an 
illegal string is passed, a Constraint_Error is raised. 


Parameter description : 


Item 


A parameter of the predefined tvpe string; it is passed to the 
function. The type of the returned value is the base type X. 
Required 


NOTE l7.i:-\ I.KVaX.MIFS) I6N0V9() 








TeieGen2 for VAX-MIPS 


Examples: 

Suppose the following subtype were declared 

Subtype X is Integer Range -10..16; 


Then the following would be true 

X'Extended_Value("5") - 5 

X'Ejctended_Value(" 5") - 5 

X'Extended_Value("2y*101/r') - 5 

X'Extended_Value("-L") - -1 

X'Extended“value(" -1") - -1 


’Extended Width 

Usage : 

X'Extended_Width(Base.Based.Space_If_Positive) 

Returns the width for subtype of X. 

For a prefix X that is a discrete subtype, this attribute is a function that may have 
multiple parameters. This attribute yields the maximum image length over all 
values of the type or subtype X. 




N()TE-I732-V1.1(\A,\.V1IPS) IftNOV^d 







VAX-MIPS Validation Information 


Parameter descriptions : 


Base 

The base for which the width will be calculated. If no base is j 
specified, the default (10) is assumed. Optional 

Based 

An indication of whether the subtype is stated in based nota¬ 
tion. If no value for based is specified, the default (false) is as¬ 
sumed. Optional 

Space If Positive 

An indication of whether or not the sign bit of a positive in¬ 
teger is included in the string returned. If no preference Ls 
specified, the default (false) is assumed. Optional 


Examples : 

Suppose the following subtype were declared 


Subcype X is Integer Range -10..16; 


Then the following would be true 


X'Extended__Widch 
X’Extended“width(10) 
X'Extended__Width(2) 
X'Extended__Width(10 .True) 

X'Extended_^Width(2 .True) 
X'Extended_Width<10.False.True) 
X'Extended_Width(10.True.False) 
X'Extended_Wtdth(10.True.True) 
X'Extended_Width(2.True.True) 
X'Extended__Width(2 .False .True) 


- 3 

- 3 - WO" 

- 5 -"10000" 

- 7 

- 8 - " 2 * 10000 *" 

= 3 - " 16" 

- 7 -".10*10*" 

- 7 -"10*16*" 

- 9 -"2*10000*' 

-6 - " 10000 " 


N()TEI7?:.V|.1(\AX.MIPS) 


I6N()V9«) 


:i 










