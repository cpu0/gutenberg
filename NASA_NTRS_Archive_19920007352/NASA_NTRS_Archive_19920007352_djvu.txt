ENHANCED USE OF CLIPS 
AT 

THE LOS ALAMOS NATIONAL LABORATORY 


Q 



by 

K. H. Duerre 
W. J. Parkinson 
Group MEE-9 
and 

J. J. Osowski 
Group MEE-4 

Los Alamos National Laboratory 
Los Alamos, NM 87545 


ABSTRACT 

Early efforts in producing Expert Systems for engineering applications used a 
limited subset of CLIPS features. In this paper we discuss the implementation 
details of previous Expert Systems and of the current Expert System, which is 
used for training operators in the control of the Isotope Separation System. 


INTRODUCTION 

Three CLI PS-based Expert Systems 1 were developed to assist in solving 
engineering problems at the Los Alamos National Laboratory (LANL). These 
systems were justified by The Laboratory’s need to save corporate knowledge that 
might be lost by personnel attrition and by the requirement to transfer the 
technology to industry. Two of the systems were advisors designed to aid in the 

selection of the "best'' equation of state models for process design 2 , and to screen 
enhanced oil recovery methods 3 . These advisors were not used for control nor did 

they include explanation facilities. The third Expert System 4 to assist in the 
production of silicon carbide whiskers is similar in function to that of our current 
system. As can be seen in Fig. 1 , whisker growth is a complex process. Although 
whisker growth is difficult, if not impossible, to model mathematically, "excellent" 
whiskers can be grown by a human expert. 

The LANL Materials Science and Technology Group MST-3 is responsible for 
research and development of systems and equipment for the handling and 
processing tritium, the heavy radioactive isotope of hydrogen. The group runs 
the Tritium Systems Test Assembly (TSTA) in which equipment and processes 
are tested for use with a fusion reactor fuel cycle. 


25 



The Isotope Separation System (ISS) shown schematically in Fig. 2, is one 
of the systems housed in the TSTA. It utilizes cryogenic distillation columns to 
separate hydrogen isotopes (protium, deuterium and tritium) into pure component 
streams. Controllers, which are conventional and of 10 year-old technology, 
require frequent manual adjustments of setpoints to accommodate the non- 
steady state nature of the ISS. A large amount of data must be monitored by 
operating personnel. System interactions are complex, making optimum 
operation difficult to attain. 

The operation and control of the system is an art that is understood by only a 
few technical personnel who have long experience with the system. Even these 
experienced personnel have problems assimilating and reconciling variables in a 
timely manner. It was decided that an Expert System should be developed to 
collect and document the knowledge of the few experts in the ISS operation. 

This system could then be used to assist the technicians who normally operate 
the system and to train new personnel. 

The success of earlier Expert Systems was largely instrumental in 
considering the use of an expert advisor for this system. The Whisker Production 
Advisor is currently being transferred to industry. 


DESIGN CONSIDERATIONS 
Whisker Production Advisor 

We felt that any usable expert system should be executable with an 
inexpensive shell and an easily available computer. The PC version of CLIPS 
was chosen for this task. The search trees associated with production run setup 
and run control had five levels, so they required a good search algorithm in order 
to obtain a reasonable response. CLIPS’s RETTE algorithm was adequate for the 
task. 

ISS Advisor 

Since the resident experts were approaching retirement age, the knowledge 
base constructed should be easy to maintain and should be as complete as 
possible. The operators had considerable experience in seeing the data appear 
on graphic devices and, although an easy interface was not top priority, we soon 
learned that it made acceptance of this tool much easier. Available hardware was 
limited to the IBM AT class of personal computers. The size of program 
developed should fit in available memory (<640 kbytes). Finally, the program 
should be easy to maintain. 


26 



THE PROGRAMS 


The Whisker Advisor 

Figure 3 shows the organization of the whisker advisor. The two parts, run 
setup and control system, were developed separately, and each was embedded 
in the CLIPS shell. The operator interacts with the system through the computer 
keyboard and screen. Figure 4 illustrates a partial sample dialog for a 
hypothetical run. 

The ISS Advisor 

The structure and information flow of the ISS advisor is shown in Fig. 5. 
The main program is written in ANSI C. It provides the user interface, whether 
the interface is textual or graphics, obtains the initial conditions, and asserts the 
facts obtained in the main program, to the embedded CLIPS rules. The main 
program retrieves the advice generated by CLIPS and displays it to the operator. 

The program begins by giving the user a brief description of the program’s 
purpose. The CLIPS environment is then initialized and rules from the file 
ISS.CLP are loaded into the system. The program now has the “brain" necessary 
to make decisions based on data to be input later. The user then enters the main 
loop of the program. 

The main loop initially gives the user a list of possible options pertaining to 
the type of problem to be solved. Depending on the users answer, the program 
searches for data pertaining to the specified problem. The user is also permitted 
to input fresh data via Option 6. The program loads in data and the user is 
permitted to make adjustments. The user is also permitted to input “no data 
available" for any combination of data cells. Figure 6, shows the data for a 
default scenario, the cursor is positioned at the data cell to be changed and new 
data can replace that shown. Compare this with the elicitation scheme shown in 
Fig. 4. 


Once data is available, it is asserted to the rule base (brain) and the 
appropriate action is determined based on the given information. Figure 7 
illustrates the types of rules created from the asserted information (could be 
specified or measured). If blanks are input into the data, the value “99999“ is 
asserted to the rule base. This number is used to numerically mark (becomes a 
flag) to indicate “no data available.* Any rule finding “99999* as data will not 
fire. As rules fire, a queue is filled containing text or display information that is 
sent back to the main C driver program from the rulebase, placed on a stack, 
and sorted. The text statements or display information is then shown as 
suggestions to the user. This completes a pass through the main loop of the 
program; however, the user is permitted to cycle through the loop as many times 


27 



as requested with new and/or reused data. 

Three versions of the ISS advisor exist: (1) ISS.EXE (a color text version); 
(2) ISSL.EXE (a black and white version for lap-top personal computers); and (3) 
ISSIS.EXE (a graphics version which has proven to be the most popular of the 
three versions). 

Figure 8 is a sample screen produced by the advisor. The amount of 
information presented is much greater and more compact than simple textual 
dialog. 


CONCLUSIONS 


A friendlier interface was obtained by embedding CLIPS inside a main C 
program than for our earlier versions of Expert Systems. Preliminary versions of 
the ISS advisor have shown that the memory limitation has been avoided by the 
careful use of files for the verbose advice indexed by the "fired" rules and also by 
placing the initial conditions for various scenarios in data files. The use of 
templates has helped in the documentation of the rules and has generally 
improved the readability of the code. 

It would have been helpful if rounded floating point data were available to 
be passed back in string form to the main program. CLIPS version 5.0 was 
received too late for use in this project. 

Although testing the advisor against the actual operation of the Isotope 
Separation System has been limited, the use of graphics has greatly enhanced 
the acceptance of the advisor. 


REFERENCES 

1. W. J. Parkinson, G. F. Luger, and R. E. Bretz, “Three CLIPS-Based Expert 
Systems for Solving Engineering Problems, “ Proceedings of The First Annual 
CLIPS User’s Conference, Houston, Texas, Vol. 1, pp. 3-17, August 13-15, 
1990. 

2. W. J. Parkinson, G. F. Luger, and R. E. Bretz, "Using PC-Based Shells to 
Write an Expert Assistant for Use with the ASPEN Computer Code,“ Paper 
presented at the AlChE Annual Meeting, Session on Applications of Artificial 
Intelligence in Chemical Engineering, April 2-6, 1989, Houston, Texas. 


28 



3. W. J. Parkinson, G. F. Luger, R. E. Bretz, and, J. J. Osowski, H An Expert 
System for Screening Enhanced Oil Recovery Methods," Paper presented at 
The 1990 Summer National Meeting of The American Institute of Chemical 
Engineers, San Diego, California, August 19-22, 1990. 

4. W. J. Parkinson, P. D. Shalek, E. J. Peterson, and G. F. Luger, "Designing an 
Expert System for the Production of Silicon Carbide Whiskers," Paper 
presented at the TMS Annual Meeting, Symposium-Expert System 
Applications in Materials Processing & Manufacturing, February 19-22, 1990, 
Anaheim, California. 


29 




PROCESS 
GAS IN 


Figure 1 . Los Alamos Silicon Carbide 
Whisker Production Reactor. 



co 


Feed from 

Neutral Beam interface 



Waste to 

Tritium Waste Treatment 



Figure 2. Isotope Separation System Schematic. 




PHASE I 


PHASE II 


WHISKER 

GROWTH 

CONSULTANT 


KNOWLEDGE 

BASE 


OPERATOR 


SYSTEM/ 

OPERATOR 


Figure 3. Whiskers Expert System. 




What is the desired average whisker length ? 

(in inches 0. to 3.5) 

3.0 

We recommend reactor type B, which will you use ? 

(A or B) 

B 

What is the desired average whisker diameter ? 

(in microns, 0to12) 

10 

We recommend the manganese based catalyst, which 
one will you choose ? (manganese or iron) 

manganese 


We recommend that you vary the CO concentration according to 
time-concentration profile A. What profile will you use ? 

(A, B, C, or D) 

A 


Figure 4. Sample Dialog for The Whiskers Advisor. 


33 




Show 

Sort 

i 

CLIPS Rules 
(ISS.CLP) 

Results 

i 

Output 

(Advise) 

i 

t 


i 


Verbose Advise 
(ISS.TXT) 


Figure 5. ISS Advisor Structure. 




ISOTOPE SEPARATION SYSTEM EDITOR 




I 



H 


D 

T 

1 Pressure 

(torr) 

■ 

■ 

700 



600 

500 

400 

Diff . Pressure (nn) 

• 

• 

12 



12 

12 

12 

Flo«-CL(n)C ( 1/nin) 

• 

■ 

8 



4 

2 

1 

Reboi ler 

level ( cm) 

■ 

• 

15 



15 

15 

15 

Reboi ler 

Set (cn) 

• 

■ 

9 



9 

9 

9 ! 

M-CLIC 

Coup (n.f. 

He H2 DT 

T2> 


.2 


.2 .2 

. 2 

M-CLHC 

Conp (n.f. 

D2 DT ) 



.5 


.4 


M-CLDC 

Conp (n. f . 

D2> 



.9 




M-CLTC 

Conp < n . f. 

T2> 



.9 




R-CLHA 

Rad iat ion 

(ci/n-3) 

■ • 


. Ol 




F-D2IN 

NBI flow 

C 1/nin. > 



5 





Mould you like to 

change 

these 

settings ( y or n> ? 




Figure 6. ISS Input Editor Display Screen. 





Figure 7. ISS Rulebase. 











ISOTOPE SEPARATION SYSTEM 

Flow Data 


► TUT 

► MBPA2 

► MBPB1 


N8I 

) 0,8 ' 1,8 

F-CLI A F-CLHA 

4.6 1/m in 0.4 1/m in 


► O -> T 


0,3 i,3 i 2,3 

F-CLI B F-CLHB | r F-CLD8 

3.3 I/m in 3.7 l/nin j 1.8 1/m in 


0,1 

Nornal H2AHa lava Is. 2,8 

Rasat 

F-CLDA Flow. 


0,3 

Resat 

F-CLI B Flow. 3.3 

Rasat 

F-CLTB Flow. 


O, 8 

Rasat 

F-CLIA Flow. 3,8 

Rasat 

F-CLTA Flow. 


1.3 

Rasat 

F-CLHB Flow. 




1,8 

Rasat 

F-CLHA Flow. 




1,9 

Nornal radiation in TUT straan. 




2, 3 

Rasat 

F-CLDB Flow. 




1 nit x: 

Uuit, FI : Uerboso, T 2 : Data, F3 

. . Fio: 

Results, (17: 

Dead) 


Figure 8. iSS Sample Output Graphics Display. 


GPK55NAL PAGE IS 
OF P00« QUALITY 





2,8 3,8 

F-CLDA F-CLTA 

0.2 l/nin 0.1 l/nin 



