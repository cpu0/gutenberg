AD-A284 912 


A TRIDENT SCHOLAR' 
PROJECT REPORT 

NO. 217 



"MICROCOMPUTER PROCESSING AND INTERPRETATION OF SIDE-SCAN 
SONAR DATA, MID CHESAPEAKE BAY" 



DTK: '1 

ELECT iiK" ' 

SEP 2 7 '’54 i I 



UNITED STATES NAVAL ACADEMY 
ANNAPOUS, MARYLAND 



34-30788 



Thia dooiment baa been approved for public I 
rcleaae and aale; ita distribution ia unlimited. I 

O' 







U.S.N.A. - Trident Scholar project report; no. 217 (1994) 


"MICROCOMPUTER PROCESSING AND INTERPRETATION OF SIDE-SCAN 
SONAR DATA, MID CHESAPEAKE BAY" 

by 

Midshipman Christopher A. Linder, Class of 1994 
U. S. Naval Academy 
Annapolis, Maryland 



Adviser. Associate Professor Peter L. Guth 
Oceanography Department 


Accepted for Trident Scholar Committee 


Chair . 

Date 


Acco'.ion For 

NTIS CRA4I 
OTIC TAB i;n 

Um<(IiI101II1Cl‘C| [ J 


By 

L' 4' ibiitiO'i / 



A y. li.i; .'illy COflf'S 



USNA-1531-2 








REPORT DOCUMENTATION PAGE 


Fonri Approved 
0MB no. 0704-0188 


PvOUC reporting feurttan for tlita coMactton of lnf<frMiltan ll MtlMtMl to «v«r»n* I ttour of rpoponoo. Including tho tiau for rovtnwii\g in«t rwc I i«nt, ••arching •■Itting iMt4 tnurcM, 
gathdcing and MtntolnIng U»« «lat« n»KWl, *«■! loaplating and rcvloving tn* colidction of tn'orMtlon. t«nd c«A4Mi» rogarding thli burcian ••(inato o* ottwi of thii 

colldctton of inforwllMii including •ugimttoni for rochKing thii taurdan, I* Mihinglnn H04d9(«rl«r» SdrvicM, Dlc*rtnraio fur tnforwt in aparatlani aivf lii inj ru. 1715 Mft*r«an 
Bavio kdtU IlM, Arlington. VV laioa-'iXU. And to t’« offtco m ManagMunl and Budgati )»4«orworii dodyrtli Oiojoct uatMngton Dc loM). 


1. AGENCY USE ONLY (L*av« blattk) 2. REPORT DATE 3. REPORT TYPE AND DATES COVERED 

19 Mav 1994 

TITLE AND SUBTITLE Microcomputer processing and 
interpretation of side^scan sonar data, mid- 
Chesapeake Bay 

S. FUNDING NUMBERS 

6. AUTH0R(S> 

Christopher A. Linder 

7. PERFORMING ORGANIZATIONS NAME(S) AND ADDR£SS(ES) 

U.S. Naval Academy. Annapolis. MD 

8. PERFORMING ORGANIZATION 

REPORT NUMBER USNA 

Trident Scholar 
project report; no. 
217 (1994) 

9. SPONSORING/MONITORINO AGENCY NAME(S) AND ADDRESS(ES) 

10. SPONSORING/MONITORINO AGENCY 
REPORT NUMBER 

11. SUPPLEMENTARY NOTES 

Accepted by the U.S. Trident Scholar Committee 

12t. DISTRIBUTION/AVAILABILITY STATEMENT 

This document has been approved for public 
release; its distribution is UNLIMITED. 

12b. DISTRIBUTION CODE 


I 13. ABSTPACT (Maximum 200 -ordt) -p^e EG&G Model 260-TH side-scan sonar is a high resolution 
shallow water mapping instrument which produces detailed images(ij^ the seafloor over 
which it is towed. Side-scan sonar is used for a variety of applications, including 
geologic surveying and minehunting. Raw side-scan data, stored on digital tape, 
contains many geometric and radiometric errors. Post-processing is necessary to 
correct these errors and maximize the usefulness of the data. The Borland Pascal 
program SIDESCAN has been developed for sonograph display and analysis. The program 
runs on standard MS-DOS microcomputers and displays fully corrected image segments and 
mosaics. Merging satellite navigation data with the side scan imagery yields ground 
registered images, allowing a user to accurately locate (in latitude/longitude 
coordinates) and measure any bottom feature or overlay bathymetric contours. Digital 
mosaics of the Chesapeake Bay bottom near the Severn River demonstrate the power the 
of the process. Images of mud f lat.s, sandy regions, and oyster bars show the 
variability of sediment types in the Bay, Many features, both natural and man made, 
have also been identified, including buoys, the wreckage of a barge, ridges and 
mounds, a deep channel, submarine cables, and trawl marks. 


u. SUBJECT TERMS gicje-scan sonar. Chesapeake 
digital image processing 

Bay. microcomputer 

15. NUMBER OK PAGES 

16. PRICE CODE 

17. SECURITY classification 

10. security classification of 

19. SECURITY CLASSIFICATION OF 

20. LIHITATATION OF 

OF REPORT 

THIS PAGE 

ABSTRACT 

ABSTRA.CT 

UNCIASSIFIED 

UNCLArSIFIED 

UNCLASSIFIED 

UNCLASSIFIED 


NSN 754(M)1-280-5500 Standard Form 298 (Rev,2-89) 


I 
























Abstract. The EG&G Model 260-TH side-scan sonar is a high resolution shallow 
water mapping instrument which produces detailed images of the seafloor over which it is 
towed. Side-scan sonar is used for a variety of applications, including geologic sur\'eying 
and minehunting. Raw side-scan data, stored on digital tape, contains many geometric 
and radiometric errors. Post-processing is necessary to correct these errors and maximize 
the usefulness of the data. 

The Borland Pascal program SIDESCAN has been developed for sonnoraph 
display and analysis. The program runs on standard MS-DOS microcomputers and 
displays fully corrected image segments and mosaics. Merging satellite navigation data 
with the side scan imagery yields ground registered images, allowing a user to accurately 
locate (in latitude/longitude coordinates) and measure any bottom feature or overlay 
bathymetric contours. Digital mosaics of the Chesapeake Bay bottom near the Severn 
River demonstrate the power of the process. 

Images of mud flats, sandy regions, and oyster bars show the variability of 
sediment types in the Bay. Many features, both natural and man made, have also been 
identified, including buoys, the wreckage of a barge, ridges and mounds, a deep channel, 
submarine cables, and trawl marks. 

Keywords; Side-scan sonar. Chesapeake Bay. microcomputer digital image 


processing 








Contents 


List of Tables 4 

List of Figures 5 

1. Introduction 8 

1.1. History of Side-Scan Sonar 8 

1.2. Side-Scan Sonar Applications 9 

1.3. Operating Principles 12 

1.4. Interpreting the Sonograph 14 

1.5. Imaging Errors 14 

2. Data Collection 16 

2.1. Equipment Specifications 16 

2.2. Study Area 19 

3. Microcomputer Side-Scan Sonar Image Processing 20 

3.1. Digital Image Processing 20 

3.2. SIDESCAN Program Overview 20 

3.3. Image Rectification 21 

3.3.1. Geometric Corrections 21 

3.3.2. Radiometric Corrections 24 

3.3.3. Bottom Tracking Problems 25 

3.4. Ground Registration 26 

3.5. Image Enhancement 27 

3.6. Digital Mosaicking 28 

4. Characteristics of the mid Chesapeake Bay 31 

4.1, Bathymetr>' 31 

4.2. Sediment 'I'ypes 


33 









3 


5. Sonograph/Mosaic Interpretations 

35 

S.l. LiU'ge Scale Bathymetric Features 

35 

5.2. Sediment Types 

37 

5.3. Bedforms and Man Made Features 

39 

5.4. Surface Influence 

40 

6. Conclusions 

41 

6.1. Results 

41 

6.2. Future Research 

42 

Acknowledgments 

44 

Tables 

45 

Figures 

50 

References 

108 

Appendices 

112 

A. Using SIDESCAN 

112 

B. SIDESCAN Help Files 

114 


C. SIDESCAN Borland Pascal code 


117 



List of Tables 


4 


Table 1. Model 272‘TD towfish specifications. 45 

Table 2. Summary of raw EG&G data files collected. 46 

Table 3. Features of program SIDESCAN. 47 

Table 4. Summary of digital mosaics. 47 

Table 5. Sediment sample statistics. 48 

Table 6. Side-scan image histogram statistics. 49 




List of Figures 


Figure 1. Side-scan sonar data collection. 50 

Figure 2. Example of raw sonograph. 51 

Figure 3. Relationships of hardware used. 52 

Figure 4. Study areas. 53 

Figure 5. Uncorrected sonograph. 54 

Figure 6, Typical return strength vs. distance graph. 55 

Figure 7. Sonograph with water column removed. 56 

Figure 8. Slant range pixel placement error. 57 

Figure 9. Geometrically corrected sonograph. 58 

Figure 10. Average DN vs. distance before and after radiometric corrections. 59 

Figure 11. Fully corrected sonograph. 60 

Figure 12. Flow chart of geometric and radiometric corrections in SIDESCAN. 61 

Figure 13. Sonograph ofbuoy and wreck suffering from poor bottom tracking. 62 

Figure 14. Comparison of port and starboard return strength graphs. 63 

Figure 15. Comparison of calculated fish height based on different transducers. 64 

Figure 16. Raw sonograph showing clutter in starboard water column. 65 

Figure 17. Corrected sonograph using port transducer for bottom tracking. 66 

Figure 18. Speed through water and speed over ground along track spacing. 67 

Figure 19. Flow chart of ground registration in SIDESCAN. 68 

Figure 20. Outlines of fully corrected and ground registered image files. 69 

Figure 21. Unfiltered sonograph of barge wreckage. 70 

Figure 22. 3x3 smoothing filter applied to image of barge wreckage. 71 

Figure 23. 5 x 5 smoothing filter applied to image of barge 'vreckage. 72 

figure 24. Edge filler applied to image of barge wreckage. 73 


'^1 




6 


Figure 25, Sonograph of 180“ turn over Thomas Point oyster bar. 74 

Figure 26. Figure 25 sonograpli plotted on UTM projection. 75 

Figure 27. SW look angle mosaic of mid Chesapeake Bay. 76 

Figure 28. Outlines of mosaics created in SIDESCAN. 77 

Figure 29. Digital elevation model of study area. 78 

Figure 30. Tertiary diagram from Kerhin et al. [1988] for mid Chesapeake Bay. 79 

Figure 31. Natural oyster bar map. 80 

Figure 32. Map of sediment sample locations. 81 

Figure 33. Tertiary diagram of sediment samples. 82 

Figure 34. Mud and oyster sediment samples plotted on Tolly Point mosaic. 83 

Figure 35. NE look angle mosaic of the mid bay overlaid with 2 foot contours. 84 

Figure 36. Mosaic of southern edge of Tolly Point oyster bar. 85 

Figure 37. Oblique view of Tolly Point oyster bar. 86 

Figure 38. Mosaic of Susquehanna River thalweg. 87 

Figure 39. Oblique view of the thalweg. 88 

Figure 40 Sonograph of the Thomas Point oyster bar, showing mud and oysters, 89 

Figure 41. Sonograph of sandy Delaware Bay bottom. 90 

Figure 42. Mud reflectance histograms. 91 

Figure 43. Sand reflectance histograms. 92 

Figure 44, Oyster reflectance histograms. 93 

Figure 45. Comparison of three general sediment type reflectances. 94 

Figure 46. Power spectra of three sediment types, 95 

Figure 47. Semivario. ram of spatial correlation of mud, sand, and oysters. 96 

Figure 48, Summary of bottom features identified. 97 

Figure 49. Two buoys in the Severn River. 98 

Figure 50. Mounds in the Severn River. 99 



7 


Figure 51. Mounds and ridges in the Severn River. 100 

Figure 52. Two submarine cables. 101 

Figure 53. Detail of cables crossing. 102 

Figure 54. Trawl or dredge marks. 103 

Figure 55. Barge wreckage and warning buoy. 104 

Figure 56. Detail of barge. 105 

Figure 57. Surface wave interference. 106 

Figure 58. Ship wake influence. 107 





1. Introduci on 


8 


1.1. History of Side-Scan Sonar 

Prior to the 1950s, scientists could only speculate on the nature of the bottoms of 
the oceans and deep lakes. Primitive sounding devices provided a vague picture of 
seafloor morphology, while isolated bottom samples hinted at sediment composition. 
Based on this meager data, researchers pictured the ocean floor as a mainly flat, 
featureless plain blanketed with a layer of sediment. 

Several developments in the 1960s sparked intense interest in the examination of 
the ocean bottoms. The Vine and Matthews seafloor spreading hypothesis, through its 
widespread acceptance, shattered the belief Aat the ocean floors were passive, flat basins. 
Deep Sea Drilling Project core data and narrow beam echosounder bathymetry data 
continued to provide evidence that the seafloor was a dynamic surface dotted with a 
variety of features and sediment types. Finally, firsthand glimpses of submarine ridges 
through the portholes of submersibles intrigued scientists and inspired a clamor for more 
detailed and complete exploration. Study of the deep ocean floor required a tool which 
could quickly and accurately map large portions of the bottom [Johnson and Helferiy, 
1990]. 

Since the 1800s, scientists have known of the excellent transmission of acoustic 
energy in seawater. This knowledge* coupled with new electronic technology, led 
researchers to develop the first sonars (SOound Navigation And Ranging). Although 
these systems had been used widely in World War 1 to track enemy ships and submarines, 
it was impractical to use them to chart ocean bathymetry. Starting in World War 11. 
however. Many Hess used echosounder data collected by Navy warships to support what 
later became his plate tectonics theories. In the 1950s. British and German mariners 










invented the first sonars which imaged large swaths of seafloor to chart dangerous shoal 
areas. The images, or sonographs, formed by the interaction of sound pulses with the 
bottom, were blocky and difficult to interpret [Stride, 1992]. 

EG&G Marine Instruments researcher Dr. Harold "Doc" Edgerton used a similar 
technique in 1967. By turning his "sub bottom profiler" so that the beam of sound energy 
would strike the bottom at an angle, instead of straight down, he found that he could 
identify anomalies on the bottom far away from the ship, perpendicular to the ship's track. 
Hard targets reflected the most energy back towards the transducer, thus producing the 
brightest images. This simple experiment formed the framework for the future 
development of high resolution shallow water mapping instruments [Thekkethala and 
Spruance, 1992], 

In the 1970s and 1980s, engineers further improved side-scan sonar resolution 
until sonographs resembled photographs of the bottom. However, even some of the most 
modem side-scan sonographs still contain geometric and radiometric errors (spatial and 
return strength errors, respectively) because of the side looking nature of the sonar and 
the behavior of sound in the water column. Image processing techniques must be applied 
to side-scan data in order for features to retain their correct undistorted shapes. Corrected 
and enhanced digital side-scan sonar mosaics enable scientists or military tacticians to 
examine a large area of seafloor projected on a map grid for bathymetric features, 
sediment types, or man made objects [Johnson and Helferty, 1990], 

1.2. Side-Scan Sonar Applications 

High resolution side-scan sonars have a wide array of military, commercial, and 
scientific uses. They are especially useful to one of the fastest growing Naval 
communities, the mine warfare force, because of their ability to quickly scan large swaths 







10 


of seabed and water column. They have been used extensively by salvage companies for 
locating shipwrecks and downed aircraft. Geologists use the sonar to analyze bottom 
topography and fjatures, sedimentological framework, biological bottom communities, 
bed roughness propenies, sand waveforms, and hunicane effects. Finally, marine 
biologists can use the sonar to detect and quantify communities of benthic organisms 
such as oysters. 

One of the deadliest threats to surface shipping since the 1700s has been the mine. 
Mine damage to U.S.S. Tripoli and V.S.S. Princeton during Desert Storm highlights the 
importance of this warfare area. The former Soviet Union, with an inventory of as many 
as 450,000 mines, is a concern not only because of current political instabilivy, but also 
because of imscrupulous selling practices. Many Third World nations have recognized 
the brutally effective value of the mine, and some nations have already stockpiled more 
than 100,000 mines [Murphy, 1993]. One of the fundamental tools in use among the 
minehunting forces of the world is high resolution side-scan sonar. These sonars can 
identify both bottom and floating mines. A database, compiled during peacetime, of 
normal side-scan returns in a given area greatly assists the mineh'inting process in a 
wartime situation [Thekkethala and Spruance, 1992]. As the focus of naval warfare shifts 
to regional conflicts in littoral areas, more accurate and reliable side-scan systems will be 
called upon to neutralize the mine threat. 

The U.S. Navy also uses side-scan sonars in diving and salvage operations. CDR 
Green (personal communication, 1994) of the Deep Submergence Unit in Coronado, 
California stressed the importance of their side-scan sonar in locating downed aircraft and 
submarines. By pinpointing the location of wreckage before starting salvage operations, 
critical underw'aler time is saved. 

Geologists have used side-scan sonars for a variety of applications. In Buzzards 
Bay. Mencie et al [1982] used an EG&G SMS 960 side-scan sonar to study a dump site 


located in 7-18 m of water. One-meter features were clearly discerned with tlie sonar. 
The topography was classified into six major topographic regions, including flat areas, 
wave forms, and cratered bottom areas. In addition, they used the sonar to identity 
sediment types and stages of benthic biologic succession. 

Bothner et al. [ 1992] mapped the textural and morphological variations in the 
western Massachusetts Bay region to determine a suitable spot for treated sewage release 
from Boston. They predicted paths for contaminant transport and also studied the 
habitats of sediment dependent marine organisms. Their data, comprised of bathymetric 
maps, geologic maps, and side-scan mosaics, was stored on CD-ROM. Knebel et al. 
[1992] also used a shallow water side-scan to study this area, focusing on Boston Harbor. 

Side-scan sonar data was also used to help classify bottom types in the Potomac 
River estuary [Knehel et al, 1981], the Delaware Bay [Knebel, 1989], the continental 
shelf waters off the coast of Maine [Kelley et al, 1989], and a nearshore zone along the 
Rhode Island coast [Morang and McMaster, 1980; Knebel et al, 1982]. From this data, 
geologic histories of the areas were constructed. 

In a study of the bed roughness in the lower Ciiesapeake Bay and the inner 
continental shelf. Wright et al. [1987] classified the bottom into ten different types. They 
relied primarily upon a 100 kHz fully corrected side-scan sonar for their conclusions, 
They validated their interpretations with in situ observations by divers. Wave ripples, 
biological roughness elements such as oyster colonies, and gravelly sediments were all 
clearly revealed with the side-scan system. From these observations, they made further 
conclusions about the water flow across these bottom types. Hohb.s [1986] conducted 
similar experiments in the southern Chesapeake Bay. He focused on the ability of the 
high resolution side-scan to resolve small patches of differing sediments. 

Green [1986] used a high resolution side-scan sonar to map sand wave 
morphology near Duck. North Car^^lina. on the Southern Bight. By matching features. 









Green constructed a mosaic of the sand ridge area and identified bedforms including sand 
ridges, megaripples, and smaller wave ripples. Harris and Collins [1984] also studied 
sand waves, though they concentrated on the variations in sand waves imaged in the 
Bristol Channel due to storm events. Mann et al [1981] classified sandy bedforms based 
on EG&G side-scan data from Nantucket Shoals. 

Severe weather events, such as a hurricane, can cause severe damage to the 
environment Mearns et al [1988] compared side-scan sonar sonographs of Onslow Bay, 
North Carolina, produced before and after Hurricane Diana, and concluded that the 
seafloor itself suffered no drastic changes as a result of the storm. As side-scan sonar 
data continues to accumulate, seasonal and annual seafloor changes can be analyzed more 
accurately. 

The oyster bars of the Chesapeake Bay have afforded an excellent opportunity to 
apply the capabilities of side-scan imaging. Concentrations of oysters, due to their high 
population density, shell hardness, and shell roughness, appear as extremely high energy 
returns on a sonograph. Hobbs [1988] used a seismic profiler to identify and quantify an 
oyster bar in the Tangier and Pocomoke Sounds of the Chesapeake Bay. The main 
limitation to his method was his lack of data coverage. Coupling an echo sounder and a 
100 kHz Klien side-scan system, Dealferis [1988] found that oyster reefs of oyster 
density 91/m^ (confirmed with oyster tongs) were easily discerned. He demonstrated the 
feasibility of the oyster reei'mapping in three tributaries of the Chesapeake Bay. 

1.3. Operating Principles 

Like any other sonar system, side-scan sonars operate on the principle of timed 
sound propagation in water. While echo sounders use a single transducer for transmitting 
and receiving sound energy, the side-scan sonar uses a linear array of interconnected 









13 


transducers mounted on each side of the torpedo shaped "towfish." Thus, two beams that 
are wide in the across track dimension but narrow in the along track dimension are 
produced. These fan-shaped sound pulses, or echoes, propagate outward and down, 
where they strike the bottom and are either backscattered (reflected back) to the 
transducers, absorbed by the water column or bottom, specularly reflected away from the 
transducers, or dissipated through attenuation. After being received by the array of 
transducers, the echo is transformed into an electric voltage and transmitted to the Model 
260-TH processing unit aboard the survey vessel \ Johnson and Helferty, 1990]. Figure 1 
illustrates how a side-scan sonar collects data. The strength of the returned energy 
depends upon its angle of incidence with the bottom (bathymetry), type of acoustic 
reflector (sediment hardness), and the surface rouglmess at the scale of energy used 
(microtopography). Slopes angled towards the towfish produce strong acoustic returns 
because more of the energy is reflected back at the transducers. Likewise, hard objects, 
which are more reflective to sound energy, show up as stronger rettims than soft bottoms, 
which tend to absorb sound energy. Finally, the surface roughness, or microtopography, 
affects the return by reflecting acoustic energy hack to or away from the towfish. A 
smooth bottom, like a mirror, produces a specular reflection in which the angle of 
incidence equals the angle of reflection. Thus, the majority of energy incident on a 
smooth bottom will be reflected away. Rougher bottoms correspond to stronger returns 
because some portions of the surface will be angled towards the towfish [Gardner et ai. 
1991], Finally, some low-frequency, long-range systems such as the Geological Long 
Range Inclined Asdic (GLORIA) have been known to penetrate the bottom slightly, 
revealing information about sediment thickness [Mitchell. 1993], The data, or sonograph. 
stored and printed aboard the research vessel shows the track line of the towfish. the 
water column, and two greyscale pictures of swaths of the bottom, one on either side of 
the towfish [fXlAG Marine Instruments, 1991 j. 







1.4. Interpreting the Sonograph 


14 


A side-scan record, or row of data, is produced by the integration of hundreds of 
returned echoes from the water column and seafloor. Many variables affect the quality of 
side-scan sonar data in addition to those which produce an image, including 
environmental conditions (winds, waves, currents, and water density variations), survey 
vessel course and speed, acoustic noise, towfish depth, range setting, and frequency 
setting, Figure 2 is an uncorrected side-scan sonograph from the mouth of the Severn 
River. It shov/s the vessel track line and two channels of data representing the water 
column and bottom features to the port and starboard sides of the towfish. White shades 
represent the strongest returns and black shades the weakest returns. Many other side- 
scan systems, including the EG&G thermal printer, use an opposite color convention. 
Occasionally, fish or random particulate matter (collectively known as "sea clutter") 
produce slightly stronger returns in the water column. The first bottom return is usually 
discernible as the light line bordering the outside edge of the water column [Chavez, 

1986]. Features appear as varying shades of grey on either side of the trackline. Acoustic 
shadows aie dark regions where ensonifying energy cannot penetrate. Typically they arc 
found on the sides of elevated features which face away from the towfish. Features in 
Figure 2 include small round mounds and two ridges. Long dark marks along the sides of 
the ridges are acoustic shadows, formed as a result of the height of the ridges [Teleki et 
al., 1981]. 

1.5. Imaging Errors 


Interpretations of sonographs produced by modem side-scan sonars must he 
tempered with caution. Raw sonographs contain many geometric (shape) and radiometric 










(return strength) errors. Geometric errors include slant range distortion, anamorphic 
distortion, and speed variation distortion. Slant range error is introduced in the image 
because the side-scan circuitry records the returning echoes as a function of the time of 
travel (yielding the slant distance from the towfish to the bottom), and not the horizontal 
distance from the nadir of the towfish to the object. Thus, objects appear farther away 
from the trackline than they should be. The Pythagorean Theorem will be used to correct 
for this error [Paluzzi et al ., 1976; Burrett e/ a/., 1991 ]. 

Since sound pulses are transmitted at regular intervals dependent upon the 
selected range, the along-track dimension of the side-scan image is dependent upon the 
speed of the ship. The resulting image usually does not have the same along and across 
track dimensions (known as anamorphic or aspect ratio distortion), To correct for this, an 
algorithm must be included in the display software that will repeat or omit the necessary 
number of rows to force the along-track resolution to match the across-track resolution 
(typically along track data must be repeated three times to produce a square pixel) 
[Chavez, 1986; Searte et at., 1990], 

In addition, because the side-scan sonar uses a speed log (measuring the speed of 
the survey vessel and towfish through the water) to generate its speed data, this may 
cause distortion if a current is adding to or subtracting from the speed of the towfish over 
the ground [Paluzzi et at., 1981]. For example, a towfish being pushed ahead by a current 
will image more of the bottom than the speed log would indicate. This produces an 
image which is incorrectly compressed in the along-track direction. This error is 
compensated for by using .speed over ground instead of speed through the water. The 
speed over ground is calculated by introducing satellite derived (GPS) position data into 
the side-scan records. 

Radiometric errors are those which affect the return strength, or digital number 
(DN) of a pixel. A fully geometrically corrected image still may be difficult to interpret 




16 


due to the follov/ing radiometric errors: far range power drop off (undercorrection of the 
towfish's time varied gain, TVG), speckle noise, and striping noise [Chavez, 1986], 

Due to the attenuation of sound as it travels through the water, images become 
degraded near the edges. The time varied gain circuitry within the towfish automatically 
applies a correction factor which partially compensates for the attenuation of sound 
[SeaHe et al, 1990]. 

A common problem in both radar and sonar digital images is the presence of 
"speckle noise." Speckle noise is the random sprinkling of contrasting individual data 
points in an image. It gives the image a grainy appearance which further complicates 
feature identification [Chavez, 1986]. 

2. Data Collection 

2.1. Equipment Specifications 

An EG&G Model 272-TD side-scan "towfish," a torpedo shaped instrument 
towed behind the survey vessel (YP686), was used to image the mid Chesapeake Bay. 
Typically the towfish depth is several meters below the water surface, although this varies 
depending on the amount of cable deployed (usually 25 m) and the speed of YP686 
(usually 4-6 knots). The EG&G Model 272-TD towfish's specifications are listed in 
Table 1. Its lower frequency ("100 kHz") mode was used for this project because strong 
signal attenuation associated with the higher frequency caused image degradation at 
ranges in excess of 100 m. This frequency plays an important role in determining 
resolution, effective range, and image quality [EG&G Marine Instruments, 1990; 

Johnson and Helferty. 1990]. 

Side-scan image resolution is the ability of the side-scan to distinguish between 





17 


adjacent features, and is ultimately dependent upon the size of the "footprint" of the 
individual side-scan ping. The maximum across track resolution possible is dependent 
upon the pulse length and angle between the sound path and the horizontal (Resolution = 
dt * c / [2 * cos(©)]). For a 0.1 ms pulse length, an assumed sound velocity in water of 
1500 m/s, and a 20° look angle, the across track resolution is 8.0 cm. The closer features 
are to the towfish (bigger 0), the more difficult they will be to resolve because the 
"footprint" of the sonar ping will be larger. The maximum across track resolution (© = 0° 
) is dt * c/2, or 7.5 cm. The ideal along track resolution is mainly dependent upon the 
ping rate. Assuming that only one ping will be in the water column at any time, the 
maximum ping rate can be calculated. Assuming a speed of sound in water of 1500 m/s, 
it takes a sonar ping 0.267 seconds to travel to the edge of a 200 m range and back. If the 
speed of the YP is 6 knots (3.05 m/s), it would cover 

0.81 m in the time it takes a ping to depart and return. This along track resolution further 
degrades with range because the horizontal beam is not constant, but actually spreads 
(1.2'’) with distance from the towfish. Thus, the "footprint" expands in the along track 
dimension with increasing distance from the towfish (Along track "footprint" = beam 
spreading angle * range). For a 200 m swath width, this yields a 1.0 m resolution 100 m 
from the centerline and a 4.2 m resolution at the edge of the image. These resolutions 
represent the theoretical resolving power of the sonar. Typically, when side-scan sonar 
images are displayed, resolution degrades fuilher [Johnson and Helfariy, 1990; 
Malinverno et al., 1990]. 

The sonar stores the raw 6-bit 64 DN range backscatter data in 884 bins across 
track, although this includes data from the water column and beyond the swath width. 
Both channels of side-scan data are printed with geometric corrections for slant range and 
anamorphic distortion based on speed through the water on a thermal printer aboard the 
towing vessel. YP686, In addition, uncorrected side-scan data can be stoicJ un Snim 




18 


digital tapes for post-processing. The thermal printer displays 800 pixels per channel per 
line, thus producing a display resolution of 0.50 m for a 200 m range. The true resolution 
will actually be worse than this because of ping "footprint" size. Only 16 grey tones can 
be displayed with the thermal printer. 

The 8mm digital tape data was converted to DOS format with NOVA tape utility 
software. The data can also be copied to 9 track using DEC MicroVax or to DOS format 
with Exacopy Software for CR2 Development. The data stored on tape is in raw form, 
uncorrected geometrically or radiometrically except for TVG applied within the towi'ish 
circuitry [EG&G Marine Instruments, 1991]. 

After collection, the side-scan data was read and processed with a Borland Pascal 
[Borland International, 1992] program, SIDESCAN, on a standard 486 MS-DOS 
microcomputer with a super VGA monitor and Exabyte tape drive. There are several 
advantages to this method. The processing becomes repeatable and very convenient. As 
new image processing techniques are developed, digital rectification and mosaicking can 
become even faster and more reliable [Paluzzi et al, 1981]. Also, converting the side- 
scan data to digital images allows the user to add navigation data, use many image 
enhancement techniques, or overlay bathymetric contours [Tekki el al. ,1981], With the 
SVGA monitor, 1024 pixels may be displayed across the screen. If just one channel is 
displayed, every data point of the original 884 bins can be displayed at least once, 
although water column data and data beyond the range limit will normally be discarded. 
If both channels are displayed, the resolution is slightly degraded, but not beyond the 
typical "footprint" resolution (512 pixels per channel, or an across track resolution of 
0,40 m). Also, the pixels are displayed using 64 grey scales, allowing for vastly 
improved contrast. This contrast can be improved further with many image enhancement 
techniques, 

Odom Echotrac DM200 depth readings and Magellan NavPro 1000 hand-held 





19 


GPS satellite navigation data were used with the side-scan system. The fathometer 
readings provided an accurate measure of depth (to 0.1 feet or 0.03 m), and the GPS 
provided a measure of position. The GPS, a standard hand-held civilian unit, is subject to 
satellite selective availability (intentional degradation by the U. S. military for security 
purposes). However, position data may be considered to be accurate to within 100 m 
[Odom Hydrographic Systems, \9%y, Magellan Systems Corporation, 1990]. Position 
and depth data for each survey run were stored in microcomputer files. Figure 3 shows 
the relationships between the equipment used and the initial processing steps. 

2.2. Study Area 

The focus of the side-scan study was the mid Chesapeake Bay region near the 
mouth of the Severn River. This area was further broken down into five major focus 
areas: the mouth of the Severn River, the Tolly Point natural oyster bar, the Thomas 
Point natural oyster bar, the middle region of the Chesapeake Bay, and the axis of the old 
Susquehanna riverbed in the eastern third of the Chesapeake Bay. These five main 
survey areas arc shown, along with the adjacent coastlines, in Figure 4. None of these 
areas has ever been the subject of a side-scan study. 

At 200 m range. EG&G side-scan data is collected at a rate of 0.36 MB per 
minute. At 100 m range, since the sonar is transmitting twice as often, the data collection 
rate is 0,72 MB per minute [EG&G Marine Instruments, 1991], Files as large as 72 MB 
have been collected. Breaking up the original files into smaller straight .segments aids in 
decreasing processing time because data can be written to the virtual drive, if the 
computer has enough random access memory (RAM). In addition, straight segments arc 
preferred bccatuse data overlap occurs on the inside channel and data gaps on the outside 
channel during u sharp turn, 'fable 2 lists the FG&G data files which have been 







20 


converted to DOS format and split into straight segments. 

3. Microcomputer Side-Scan Sonar Image 
Processing 

3.1. Digital Image Processing 

Digital image processing techniques >vere first developed for optical images in the 
early 1960s. The transition to processing acoustic images has been rather slow in 
catching up. Digital sonogratih image processing is currently at a point where optical 
image processing was 20 years ago. Acoustic images are limited to using shades of grey 
to represent return strengths and also lack the resolution of optical images [Johnson and 
Helferty, 1990], 

Two broad fields of image processing have been applied to the side*suan sonar 
imagery with SIDESCAN. The first is image rectification, which is the correction of 
errors inherent to side-scan data. These include both geometric, or pixel placement, and 
radiometric, or pixel strength, errors. The second area is image enhancement. Image 
enhancement techniques such as filtering can be used to produce images which are more 
easily interpreted by the human operator [Hall, 1979]. 

3.2. SIDESCAN Program Overview 

Associate Professor P. L. Guth of the United States Naval Academy 
Oceanography Department de\ ped a prototype SIDESCAN program for side-scan data 
display. His program included a number of other graphical options, including backscalter 
and fish height plotting routines, A subset feature allowed the user to break up large data 






flies. Geometric and radiometric errors were not corrected for, limiting the usefulness of 
the sonograph display. Basic procedures and capabilities of the original program are 
listed in Table 3. 

New additions to SIDESCAN are also listed in Table 3. The program can now 
display multiple raw images on a screen, invert the images, and display the data in 
multiple columns. In addition, all geometric corrections are automatically applied. The 
user has an option to apply the radiometric corrections, which slows down the display 
speed. The user also now can choose the digital number (DN) of the first bottom value 
and the transducer used for determining the fish height (previously, an average was used). 
A ground registration routine has been implemented, so position coordinates and track 
headings can be written to side-scan records. Thus, positions and distances can be 
retrieved while displaying data files. While displaying to the screen, fully corrected 
images can be copied to a standard raster image file for image enhancement. Also, with 
the digital mosaicking routine, several files can be written to a map projection, or existing 
mosaics combined. The step by step procedure for the beginning user to rectify and 
enhance raw side-scan data is provided in Appendix A. The help files, which explain 
SIDESCAN's menu choices, are listed in Appendix B. and a complete listing of the new 
SIDESCAN code can be found in Appendix C. 

3.3. Image Rectification 

3.3.1. Geometric Corrections 

To show the results of applying corrections for geometric and radiometric errors, 
a single image will be rectified step by step. Figure 5, displayed using the original 
SIDESCAN, is an image of a buoy and berm in the mouth of the Severn River suffering 



from all side-scan errors. The buoy and its anchoring chain are indistinguishable due to 
geometric and radiometric errors. 

The two most prevalent geometric errors in shallow water side-scan imagery are 
those caused by the slant range and the display aspect ratio. Before these can be 
corrected for, however, the towfish height must be corrected and the water column data 
must be removed. 

The distance from the centerline to the first bottom return can be used to find the 
towfish height above the bottom. First, a bottom value is selected. This is the digital 
number value which is strong enough to qualify as tlie first bottom reading, and is 
carefully chosen through examination of average return strength graphs. On Figure 6, 
showing average return strengths from the mid Chesapeake Bay, the average DN near the 
centerline is 0, representing the water column returns. The quick increase in DN from 0 
to 15 represents the transition from the water column to the bottom. Before displaying a 
line of data, the computer counts through each return strength value for the whole row 
until a value exceeding the chosen bottom strength constant is reached. The pixel number 
is saved. Then, when SIDESCAN displays the data, it starts not from the centerline pixel 
number, but the first bottom value pixel number, eliminating the water column and 
producing a geometrically correct view of the bottom. The fish height can be computed 
using the following equation: 

I st bottom return col # * Cwater 

Fish Height - _ 

Maximum U columns * 2 

Unless changed by the user, SIDESCAN automatically uses the average fish height based 
equally on the returns from each transducer. The benn and buoy image following water 
column removal is shown in Figure 7. 

The slant range error (shown in Figure 8) can be solved by means of the distance. 






rate, and time relationship, and the Pythagorean theorem. First, the height of the fish 
above the bottom is determined. Next, the slant range distance of each data point from 0 
to 883 on each channel is computed with the formula Distance - Rate * Time. Rate is the 
speed of sound in water (assumed to be 1500 m/s) and time is the one way travel time of 
a single pulse in the water (transmit period). The true distance is then calculated by using 
the Pythagorean Theorem; the slant range is the longest leg of the triangle and the fish 
height is the shortest. SIDESCAN then displays the pixel using the true distance, rather 
than the slant distance, from the centerline. This procedure assumes that the sea floor is a 
flat horizontal plane surface. While this is hardly ever truly the case, the depth in the 
Chesapeake Bay varies only slightly over a few hundred meters of lateral distance, 
making the approximation a valid one. 

Following slant range correction, the anamorphic correction adjusts the aspect 
ratio across and along track. In most cases the along track dimension is compressed, and 
must be stretched out by repeating pixel rows, The true distance of each pixel in the 
across track dimension has already been computed during the slant range portion of the 
program. Based on the vessel's speed, the distance traveled during each pulse can be 
found by multiplying the vessel speed by the round trip transmit period, Then, the 
number of times to display each row of pixels is computed by dividing the speed interval 
(in m) by the across track pixel size (in m/pixel). The computer keeps track of the 
number of rows to repeat or skip, depending on the vessel speed. Obviously, if the vessel 
travels quickly, the number of rows to repeat increases. The opposite is true for a slowly 
moving vessel. The resultant image contains pixels which represent the same amount of 
real distance in the across and along track dimensions. At the same time, the algorithm 
also corrects for small speed deviations. These geometric corrections allow the u.ser to 
view the bottom as it would look to someone peering over the side of the vessel [(Vinvce. 
1986; Searlc, 1990], They can be seen applied to the berm and buoy image in Figure 9, 








24 


A few factors leading to further geometric enors have been neglected due to the 
short range and high frequency of the EG&G Model 272-TD. These factors, including 
ray bending caused by sound velocity gradients and towfish instabilities, cause major 
problems for long range imaging systems such as GLORIA. The small scale nature of 
this study reduces these errors so that correction is not warranted [Cohra et al, 1992; 
Searle, 1990; Miller el ai, 1991]. 

3.3.2. Radiometric Corrections 

As one can see from Figure 10, the average returned energy from the file 
containing the berm and buoy (8NOVS1) clearly drops off with distance despite the 
automatic towfish correction (TVG). This backscatter drop off can also be seen in Figure 
6. The energy increases rapidly near the tovvfish when the bottom is first reached and 
then gradually decreases until the end of the swath width is reached. Correcting the 
across track signal strength inconsistencies are also relatively simple. First, SIDESCAN 
reads ever>' record in a chosen file and computes the average digital number for each 
across track column, excluding the water return,':. These averages are stored for future 
use. When the user wishes to display the data in radiometrically corrected mode, the 
digital number for each pixel is adjusted to compensate for over or under ensonification. 
Digital numbers are ai. red according to the following empirical formula (using the value 
of 32 as a target reference strength because it is half of the possible 64 DN range): 

DNold(ij) * 32 

_ 

DNavg(i) 

The across track variation in pixel shading is removed by dividing the averaged pixel 
strength into the actual pixel strength at the same range. Th.- equation forces columns 










25 


with DN averages above 32 (generally those near the centerline) to be scaled down and 
columns with DN averages below 32 (generally those at extreme ranges) to be scaled up. 
It forces uniformity in the image color across track without blending colors together 
[Chavez, 1986; Searle et ai, 1990]. The effect this has on the across track average is 
shown in Figure 10 and the effect this has on the image is shown in Figiue 11. Miller et 
al. [1991] used the same power drop off correction procedure with a function called 
PRDROP. Figure 12 shows the steps by which SIDESCAN corrects all of the side-scan 
errors. 

3.3.3. Bottom Tracking Problems 

In one case, across track distortion resulted due to miscalculation of the fish 
height. From the deep channel region. Figure 13 shows patches of shifted pixels 
contaminating the sonograph. Both the across track DN average vs. distance from 
centerline graph (Figure 14) and the computed fish height graph vs. position in the file 
(Figure 15) revealed significant differences between the port and starboard transducers 
throughout the entire file. This problem arose during a data run (31MAR94) over the 
deep channel region of the mid Chesapeake Bay. Foi this data, when the .starboard 
channel was used for fish height computations, the curve was extremely scattered, while 
when the port channel was used, the fish height plot was very smooth. The fish height 
’'lot is dependent upon the chosen DN to represent the strength of the bottom (bottom 
value) and the individual across track DN values. Thus, fish height is also dependent 
upon the performance of the t.ansduccr. Th« nost likely explanation for this aberration is 
that the starboard i.ansducer underwent some frequency variation, while the port 
transducer operated at a constant frequency. Figure 16 shows the presence of an 
abnormal amount of noise in the starboard transducer water column. A DN in the water 










26 


column which exceeds the chosen bottom value will produce a very shallow fish height. 
To alleviate this problem, which causes errors in the across track pixel shift table creation 
because of the abnormal fish heights, the user is permitted to choose which channel, or an 
average of both, to use for bottom tracking. In this case, choosing the port channel for 
bottom tracking fixed the problem. Figure 17 shows no pixel shifting. 

3.4. Ground Registration 

Ground registration, or correlating image locations with coordinates, is useful for 
several reasons. To the user displaying raw images and mosaics, a ground registered 
image allows the true speed of the towfish over ground to be used, eliminating any along 
track compression or expansion due to currents. Figure 18 illustrates the speed through 
water vs. speed over ground error. One sonograph was displayed using the speed through 
water and the other using the speed over ground. A 1 knot current was pushing the 
towfish at the time. Thus, the speed through water, being less than the speed over 
ground, is underestimating the bottom area imaged in the along track dimension by 1 
knot, producing along track compression. Because towfish speeds are usually 5-6 knots, 
a 1 kni t current can produce a 20% difference between speed through water and speed 
over ground. A ground registered image also allows the user to acquire the location in 
universal transverse mercator (UTM) and latitude and longitude coordinates of any pixel 
on an image. The Naval applications of this feature are obvious. With this display 
software, mines or wi'eckage could be easily identified and assigned a latitude and 
longitude. These coordinates could be quickly disseminated to mine disposal or salvage 
units, which would aid in decreasing response times. 

Ground registering is perhaps the most important addition to SIDESCAN. Side- 
scan data and GPS time and position data from the towing vessel arc the only necessary 









27 


components. The side-scan unit has an internal clock, which starts at 0:00 when the unit 
is turned on, Assuming a second of side-scan time is the same as a second of GPS time, 
once the offset is known, the times can be altered on the side-scan records. Then, by 
simultaneously reading the side-scan records and GPS times, matches are found. Once a 
match is found, the GPS UTM coordinates and headings are written to blank data blocks 
on the side-scan records, The coordinates of any feature to the side of the centerline can 
be found by using the heading and simple geometry. The distance offset between the 
location of the GPS unit and the location of the towfish (based on towing cable length of 
25 m) is also applied. A How chart (Figure 19) demonstrates how SIDESCAN ground 
registers side-scan data. 

3.5. Image Enhancement 

Once a side-scan sonogtaph is fully rectified, it may be analyzed using standard 
image analysis software, such as that created by Guth [1991], However, first the side- 
scan data must be written to image files. An option in SIDESCAN allows the user to 
copy side-scan data to a raster image file, stored by rows from the upper left corner of the 
image. SIDESCAN creates the image file (.BNl suffix) and an index text file which 
contains the dimensions of the image (.IDX suffix). Finally, the coordinates of the 
comers of the image are written to a text file (.XY suffix) so the outlines may be plotted. 
The outlines of fully corrected side-scan data which has been written to image files arc 
shown in Figure 20. The image files can then be graphically selected and enhanced using 
image processing routines. 

Side-scan data, like other remote sensing data, contains a certain amount of both 
Gaussian and non-Gaussian speckle noise. Figure 21, an image of the vvTeckage of a 
barge, shows how speckle noise pervades side-scan images. Filtering is an image 










enhancement technique which alters the overall texture of an image. Smoothing filters 
work by reassigning the pixel digital numbers based on an equally weighted average of 
the points around them. The size of the filter determines the amount of smoothing. For 
example, a simple 3x3 averaging filter averages a 3 x 3 box of nine points and places the 
result in the middle of the box. The process continues throughout the entire image. As 
the size of the filter increases, so does the number of points which are averaged, and with 
it the blurring of the image. Thus, a dilemma exists: the addition of more filtering 
removes speckle noise, but it also degrades the resolution of the image. The 3x3 
averaging filter produced the best results for the side-scan image files. The speckle noise 
was lessened considerably without overly degrading the detail of the image. A 3 x 3 filter 
applied to Figure 21 results in Figure 22. Although more speckle noise was removed 
with the 5 x 5 (Figure 23) and 7x7 filters, the negative aspect of the resolution 
degradation outweighed the positive aspect of the speckle noise removal. After the 
averaging, a contrast stretch was automatically applied to restore the range of grey scales 
to the image. 

Other filters can be used to modify a side-scan image. Unlike smoothing filters, 
median filters merely sort the data points, instead of averaging them. This method helps 
to preserve sharp transitions while also removing speckle noise. Edge filters are useful 
when applied to areas where anomalous return enhancement is desired. Using an edge 
filter on Figure 21 resulted in Figure 24. The anomalous returns from the wreck made it 
stand out from the background [Bangham, 1990]. 

3.6. Digital Mosaicking 

The final stage in digital side-scan processing displays side-scan data on a U TM 
projection based on the actual ground coordinates of each data point [see Snyder. 1987, 





for information on map projections]. While straight passes and turns may not be readily 
evident with normal side-scan display software, they arc readily apparent when plotted. 
Figure 25, a registered and corrected image file of a 180° turn over the Thomas Point 
oyster bar, looks much different when the individual data points arc plotted on a 
projection (Figure 26), Standard military UTM grid lines, plotted in white, show the 
location of the mosaic. Mosaicking, or combining several side-scan data files onto a 
single projection, is an extremely powerful and useful technique. It allows the scientist or 
tactician to view a large area of the sea floor at a single glance. Large scale geologic 
features such as submarine ridges or canyons can be easily identified. Naval personnel 
will be able not only to identify mines but also to accurately detennine their locations or 
positions relative to other geographic features. Combining image segments with similar 
look angles yields mosaics that show features all with congruent shadow patterns. In 
Figure 27, a mosaic with a common look angle from the mid Chesapeake Bay area, large 
scour or trawl marks can be followed over long distances. This mosaic, and all 
subsequent mosaics, are displayed rotated 90°, with north to the left side of the page. 
Features can be identified even more accurately by comparing mosaics olThe same area 
and different look angles. The presence or absence of acoustic shadows will delineate the 
differences between bathymetry induced backseatter variation o\ sediment induced 
backscatter variation. Most importantly, other rcgi.stered data sets including bathymetric 
data can be overlaid accurately with image processing .software {Prior i-t ai, 1979; 

( 'iuiw’z cl at., 1986; Danforih cl al., 1991; (iuth. 19911. 

The digital mosaicking prcicess begins by querying the user about the desired 
htcaiion of the upper left hand corner of the finished mosaic, fhe computer then sets up a 
one meter by one meter grid in I I'l'M coordinates. I'he overall grid si/e is .set by a 
constant. Due to computer memory limitations, the .square grid is set to a default value ol 
1800 m by 1800 ni. The mosaic si/e could be increased by writing the mosaic to the hard 




30 


disk instead of to memory, although this would slow the program considerably. Next, the 
user selects the channel and specific image to be used for the first component of the 
mosaic. By allowing the user to select the channel, look angle specific mosaics can be 
created. For users wishing to maximize coverage, both channels may be selected. The 
first individual record is then read and the towfish height determined. SIDESCAN then 
cycles through the 884 values comprising the desired channel of data. The true distance 
of the data point from the centerline is computed, and, based on the heading of the vessel 
for that record, the true x and y UTM coordinates are computed. The radiometric 
correction is applied to the DN of the data point, and, if the point is located within the 
preselected mosaic area, it is plotted on the screen and written to memory. This process 
is repeated until the entire side-scan file is read, and then the user is prompted for another 
side-scan data file. Once the user is satisfied with the overall composition of the mosaic, 
the mosaic values are written to an image file, which can then be analyzed with standard 
image display software. The resulting image displays the side-scan data fully corrected 
for geometric and radiometric errors and properly fitted to ground coordinates, 

The only limiiation to this technique is the precision of the navigation data. Since 
data points must be precisely positioned for data to overlap perfectly, coherent 
overlapping mosaics are almost impossible to generate. To account for the position of the 
towfish relative to the GPS receiver, a constant was subtracted, based on ship heading, to 
the centerline UTM coordinates. Thus, fluctuations in towfish location are unaccounted 
for. This limitation alone would reduce data position accuracy by at least 2-3 m, which 
makes mosaicking on a 1 m by 1 m grid unreliable. Position accuracy can be assessed by 
comparing feature locations on different images. For example, on the 23MAR94 data 
run, between Tolly and Thomas Points, a bend in a submarine cable could be clearly 
discerned on both the southward and northward passes. The UTM coordinates differed 
by less than 1 m in the x direction but over 30 m in the y direction. Kmvuhara and 






31 


Poeckert [1989] encountered similar overlap problems with their Klein side«scan system 
and attributed it to "unknown and uncorrectable errors" relating to towfish instability, 
Luyendyket al [1983], when digitally mosaicking side-scan images from the Anacapa 
Passage, also found that, due to imprecise navigation, common features were displaced 
more than 150 m on different tracks. To solve this problem, they stressed the need for a 
continuous knowledge of towfish dynamics. 

SIDESCAN resolves data conflicts by overwriting the mosaic data. The most 
recently added data segment replaces the older data written. The most feasible solution to 
this problem lies with the user. For the most easily readable mosaic, the user should 
select data .segments which do not overlap and share the same general look angle. Figure 
27 is an example of a mosaic constructed using well chosen data files and look angles. 
Figure 28 shows outlines of the created mosaics; table 4 lists the basic characteristics of 
these mosaics. One final feature of this portion of SIDESCAN allows the user to merge 
two or more mosaics from the same area into a single mosaic. 

4. Characteristics of the mid Chesapeake Bay 

4.1. Bathymetry 


Nearly 300 km long and from 8 to 48 km in width, the Chesapeake Bay is the 
largest estuary in the United Stales. The Buy formed during and after the last glaciation, 
when melting glaciers caused a 100 m rise in sea level and a flooding of the Susquehanna 
River. '1 lie general bathymetry of the bay reflects this process, The final remnant of the 
old Susquehanna River is a deep (about 30 m) trough, or thalweg, in the eastern poui^/ii 
of the bay, 'flic bottom rises up from the thalweg to produce an average water depth of 
8 ni 'X 'uthhertsou cf aL 1989], 







32 


To study the dependence of the side-scan image upon bottom bathymetry, a 
bathymetric digital elevation model (DEM) (Figure 29) was created of the study area 
using MICRODEM [GutK 1991 j. A microcomputer aboard the research vessel logs GPS 
positions and Odom fathometer depth leadings whenever the research vessel departs 
Annapolis on a scientific mission. To create the DEM, the position and depth files were 
merged into one file. To remove erroneous readings, data points were excluded if they 
differed from the previous value by 2.5 feet (0.762 m). Strings of anomalous depths were 
removed manually; most of these were from a single day's operation. Because the 
research vessel did not cover every point of the study area, patches lacking data were 
filled in by interpolating between the existing points using a 20 m grid. This process 
created a comprehensive illustration of the mid Chesapeake Bay's bathymetry. The 
finished DEM can be used to discern bathymetric changes of 0.03 m (0.1 feet) in 
elevation over 20 m in horizontal distance. 

The interpolated DEM of the study area revealed that the Bay is shallow (6-9 m of 
depth) near the western edge of the area, with the water depth reaching a maximum of 
41.6 m near the eastern edge of the study area. The bottom gently drops off from the 
west to the east (slope of 0,135°, 6.48 m over 2.75 km). The slope increases to 0,919°, or 
13.8m over 0.86 km, in the eastern I km of the study area. The bay then slopes up to the 
Eastern shore from the deep axial channel (2.06°, or 6.04 ni over 168 m). producing a 
steep trough compared to the rest of the study area. The bathymetry is generally 
consistent along the north-south axis. Over the mid Chesapeake Bay region, the north- 
south slope is only 0.055°, or 4,12 m over 4.295 km. In the area of the thalweg, the 
north-south slope is 0,171°, or 10.5 m over 3.519 km. Water depth increases to the south. 
The results from the bathymetric study are consistent with the fact that the Chesapeake 
Bay was I'ormed by the Hooding of the Susquehanna riverbed, which llowcd from the 
north to the south. 







4,2, Sediment Types 


33 


The surficial sediments of the Maryland portion of the Chesapeake Bay can be 
divided into three categories. From largest to smallest grain size, they are sand, silt, and 
clay. The coarsest type of common sediment, gravel, was excluded from consideration 
because the majority of gravel sediments were found as lag deposits, which are not 
naturally occurring phenomena. Of all of the sediment samples collected by Kerhin et al 
[1988] in Maryland portions of the Chesapeake Bay, nearly 75% fell into the sand (57%) 
and silty clay (17,9%) categories. Only a few samples were classified as purely clay or 
silt. Figure 30 is a tertiary diagram of the sediment samples Kerhin et al, collected in the 
Maryland portion of the Chesapeake Bay. Sediment sizes tend to increase as one moves 
southward towards the mouth of the Bay. Kerhin et al, used a Rapid Sediment Analyzer 
(RSA) and Coulter Counter Model TAII to determine sediment classification. 

Generally, sands are located near the shorelines of the Bay, while silty clays 

predominate in the center. Sandy sedimentary environments are characterized by high 

I 

wave and tidal energy. Conversely, areas of sluggish water movement yield finer grained 

I 

sediments. A relationship also exists between water depth and sediment type, with 
sediment size increasing in fineness with an increase in depth. 

The main sources of Chesapeake Bay sediment are the Susquehanna River and 
shoreline erosion. Silty clay, carried by the Susquehanna, is deposited in the maximum 
turbidity zone, where the fresh water of the river meets the salt water of the Atlantic 
Ocean. Near the area where this side-scan study was done, sandy sediments are formed 
by the erosion of Kent Island Pleistocene sediments. The bathymetry of the main axis ol' 
the Chesapeake Bay near the Chesapeake Bay Bridge is rather Hat due to the extremely 
high rate of silty clay accumulation (17.8 mm/yr, compared to a rate of 0.7 mm/yr farther 
south, neai Annapolis) [Kerhin el al,, 1988). Due to the large sampling interval (1 km by 





34 


1 km grid) Kerhin et al used in their research, their maps were not used as ground truth 
for side-scan interpretation [Ryan, 1953; Kerhin et al, 1988; Cuthhertson, 1989). 

The Tolly Point shoal, labeled as N.O.B, (natural oyster bar) 6- o by the Maryland 
Depailment of Natural Resources, extends from 0.75 miles due east of the Annapolis city 
dock down the Severn river to about 1.25 miles cast of Tolly Point. Thu bar encompasses 
a total of 1850 acres and ranges in depth from less than 1.83 m (6 feet) to over 5.49 m 
(18 feet) Just over a mile south of the terminus of the Tolly Point shoal lies a small 
(154 acre) natural oyster bar, Thomas Point shoal, designated as N.O.B. 6-15. It is 
located u mile east of the coast and 1000 yards north of the Thomas Point lighthouse. 

The water depths over the shoal range from just under 3.66 m (12 feet) to over 5.49 m 
(18 feet). Figure 31 shows the outlines of the Tolly and Thomas Point natural oyster bars 
in the study area [Department of Natural Resources, State of Maryland, 1961]. 

To validate, or ground-truth, sediment type interpretations, the actual nature of the 
bottom must be discerned. A variety of methods may be employed to determine the 
nature of the bottom at any particular point, including: photography, visual inspection 
(divers), core sampling, surface grab sampling, or historical data [Menzie et al, 1982; 
Gardner et al, 1991]. 

Over 50 samples of the surface sediments of the Chesapeake Bay bottom were 
collected using an orange peel grab. Locutions of mud and oysters are plotted in Figure 
32. The mud samples were analyzed for composition by weight and size using a GALAl 
CIS-100 particle size analyzer, provided bv the Marine Sciences Division of the National 
Oceanic and .Atmospheric Association. Statistical results from this analysis are given in 
Table 5. 'I'he statistics were not used because a dispersant was not used on the samples 
before the analysis. Thus, size data was skewed depending on the amount of mud 
llocculation, or particle clumping. Because ditTerent samples may have llocculated more 
than others, even general trends cannot reliably be drawn. Also, because oyster shells 





35 


were too large to analyze with the size counter, samples from the oyster bar do not reflect 
the true sediment composition. Plotted on a tertiary diagram (Figure 33) and compared to 
Kerhin et a/,'s results (Figure 30), the faulty method is obvious. The majority of samples 
plotted were silts or sandy silts, instead of the expected sands or silty clays. Ground 
truthing based on either mud or oyster samples correlated very closely with side-scan 
records, however. 

5. Sonograph/Mosaic Interpretations 

5.1. Large Scale Bathymetric Features 

Bathymetric data is critical in side*scan analysis as a method of distinguishing 
returns caused by bathymetry or sediment type. For example, a particularly strong 
feature along the edge of a side-scan image could either represent a slope inclined 
towards the towfish or the edge of a rocky outcrop. Identification is especially difficult 
when shadows cannot be seen. With bathymetric data overlaid on a side-scan image, the 
nature of the returns is much easier to interpret. Figure 35 is a northeast look angle 
mo.saic overlaid with 2 foot contours which .shows the flatness of the mid Che.sapeake 
Bay [Searlc et al, 1990; Talukdar and Tyce, 1990], 

Correlations between the bathymetric data and side-scan imagery arc limited by 
the accuracy of the DEM. Considering the smoothness of the Chesapeake Bay bottom in 
general, only a few locations have yielded good correlations between elevation changes 
and side-scan data. 

The first of two such notable areas is the southern edge of the Tolly Point oyster 
bar. 1 Icrc, the depth changes from 5.5 m to 9.1 m over 35 m. 'I'he maximum slope 
associated with this stcc[» drop-off is 5.97°. This slope, extremely steep compared to the 










36 


rest of the bay, is caused by the transition from a built ui 'yster bar formed on rocky 
sediment to a flat, muddy plain to the south. The transition can also be easily seen 
through the side-scan data as a broad white band (Figure 36). This strong return is caused 
by the reflection of the sound energy back to the transducers. Most of the passes through 
this region have illuminated the slope in a perpendicular manner. Had the sonar been 
towed parallel to the slope instead of perpendicular to it, the slope would have been even 
more noticeable. An oblique view, created in MICRODEM, of the oyster bar intruding 
from the west is provided in Figure 37. The comparatively steep southern slope is easily 
seen. 

In comparison, Thomas Point oyster bar, at its steepest point, was 1.55“, or a 
depth change of 2.60 m over 96 m. However, data collection was extremely limited due 
to depth constraints in the Thomas point region, 

The Susquehanna River thalweg, located in the eastern portion of the DEM, also 
could be identified with the side-scan. In this case, the depth changed from 19 m to 33 m 
over 861 m (from west to east), producing a gradient of 0,919“. Side-scan data from this 
region (Figure 38) shows a series of north-south aligned striations as the depth increases 
down to the maximum. At this point, the image becomes dark, signifying a lack of 
returning energy, as the sound is absorbed in the deep muddy channel. Then, when the 
bottom begins to slope upward once again from the channel eastward to the eastern shore, 
the image brightens because of the more direct return of the sound energy. The alignment 
of the towfish with the axis of the channel also plays a part in the increased brightness. 
This slope is stronger than the western slope down into the channel, being 2.06°, or 
6.04 m over 168 m. Once again, a MICRODEM oblique view helps in illustrating the 
relative slopes (Figure 39). 









5.2. Sediment Types 


37 


When plotted as image files, corrected side-scan data files from featureless 
regions reveal many differences in return strength, indicating changes in sediment type. 
Although bottom samples did not reveal enough variation to classify different types of 
mud, the difference between oysters, mud, and sand is readily apparent simply through 
observation. Also, a Department of Natural Resources Natural Oyster Bar chart revealed 
the extent of some local oyster communities. Based on this information, correlations can 
be made with particular image brightnesses within the images. 

Figure 40 shows the transition between oysters and mud at the north edge of the 
Thomas Point oyster bar. Oysters produce particularly strong reflectances because of the 
hardness of the individual oyster shells and the roughness of the oyster bar \Dealieris, 
1988]. In comparison, Figure 41, collected by the 1993 YP Oceanography Summer 
Cruise in Delaware Bay, reveals an area of distinct sand ripples. The brightness of this 
bottom lies between the oysters and mud. 

Histograms, plots of the percentage of DNs in a region vs. the DN, reveal the 
actual reflectance values associated with the sediment types. The statistics from 
histograms from all study regions and sediment are listed in Table 6. A comparison of 
mud histograms from all five study areas (Figure 42) reveals that the mean DN varied 
from 22.68 in the deep channel to 26.68 in the mid bay. The standard deviations varied 
from 3.32 to 5.69, The small standard deviations indicate that the DNs did not vary 
much; the mud is not mixed with much sand or oysters. In comparison, mean sand 
backscatter values ranged from 30.39 in the north Severn River to 31.51 in the Severn 
River mouth. The sand ripple image from the Delaware Bay yielded a mean DN oi' 
30.56. The standard deviations of the sandy images exceeded those of the muddy images 
by about 2 DN, indicating an increased DN variability. Some mud mixed in with the 











38 


sand would have produced a greater standard deviation. The sand histograms are plotted 
on Figure 43. The Thomas and Tolly Point oyster bars produced the highest reflectance 
values (mean DNs of 36.49 for Thoma® and 38.44 for Tolly). However, they also 
exhibited the greatest standard deviations (5.38 for Thomas and 8.21 for Tolly). This 
indicates that mud and sand were mixed in with the oysters, increasing the range of DNs. 
Sediment grabs from Tolly Point oyster bar confirm that oysters are never found free of 
mud. The reflectance histograms for these two regions are shown in Figure 44. 

With these values thus delineated, a DN index can be created for side-scan 
images. Return strength histograms can be classified quickly as one of the three pine 
sediment types or a mixture of two or more, depending on the number of peaks in the 
histogram. The higher the peak, the more predominant the particular sediment type. 
Figure 45 illustrates this breakdown. 1 wo histograms are plotted for each sediment type. 
The transition from mud to sand occurs at a DN of about 27 and the trarisition from sand 
to oysters occurs at a DN of about 34. Thus, images may be roughly categorized by 
plotting the histogram of a region and matching the peaks with characteristic values. 

A different way to analyze sediment backscatter data uses MICRODEM to 
perform a fast fourier transfonn (FFT) by row of three characteristic sediment images. 
Figure 46 shows the resulting three different power spectra. Clearly, differences can be 
discerned between the mud, sand, and oyster images. Shaw and Smith [ 1990] explore this 
method and several other statistical methods for analyzing geophysical data. 

MICRODEM can also plot semivariograms of side-scan data, showing the spatial 
correlation of the data. Figure 47 is a semivariogram of the same three sediment type 
images. It shows consistent variations for mud, sand, and oyster bottoms. Curran [ 1988j 
explains semivariograms in more detail. 






5.3. Bedforms and Man Made Features 


In addition to sediment types, the EG&G side-scan sonar also clearly revealed a 
variety of bottom features. Figure 48 summarizes the bottom features found and shows 
their locations in tlie study area. 

The Severn River contained the greatest number of both man made and natural 
features. Buoys are easily resolved on sonographs for many reasons: hardness of the 
buoy and anchoring chain, wake created by the buoy in the presence of a current, and 
shadow zone behind the buoy. Figure 11 shows buoy G "11", its anchoring chain, and 
the shallow berm it marks. Two channel marker buoys, C "7" and N "6", are shown in 
Figure 49. The actual locations of the buoys ar e denoted by small (1-2 m) white dots. 
Dark regions represent areas of shadow or water turbulence. In addition to the buoys, 
small (5-7 m diameter) mounds were found in great concentration from the beginning of 
the Severn River shipping chaimei all the way south to the mouth of the Severn (shown at 
75 m range in Figure 50 and 200 m range in Figure 51). Strong returns indicate not only 
height but also possibly a harder bottom type. Due to the unusual placement of these 
mounds in the Severn shipping channel, we suspect these mounds aie dumpings from 
oysteimen or other fishing vessels. A large (10-15 m diameter) mound, and a long (100- 
300 m) ridge were also discovered in the Severn River (Figure 51). Acoustic shadows 
denote feature heights of at least 1 m. 

In between the Tolly and Thomas Point oyster bars, two submarine cables were 
revealed. An overview of the area immediately south of the Tolly Point oyster bar 
(Figure 52) shows two long cables; the first begins in the northwest and proceeds due 
southw.ird, while the eastern cable angles toward the southwest. Figure 53 is a more 
detailed image of the crossing point of the two cables. A bend in the eastern cable 
indicates a possible break or rupture in the cable. 




40 


The mid Chesapeake Bay bottom is marked by a plethora of pock marks. Long, 
curving returns with no acoustic shadows also dominated this region. These long (100- 
200 m) features seen in Figure 54 may be furrows caused by bottom trawlers or dredgers. 
The lack of acoustic shadows and flatness of the DEM in this region signify tire absence 
of notable bedforms. 

Perhaps the most interesting feature discovered in the bay is the wreckage of a 
barge in the eastern portion of the bay near the axis of the deep channel. Sunk in about 
15-18 m (50-60 feet) of water, it, along with its marking buoy, "WR87", can easily be 
discerned in Figuie 55. Dark shadow returns denote significant height of the sunken 
barge. This image illustrates the practical applications of using SIDESCAN. The mosaic 
of the area shows the locations of the barge and buoy and their relative positions. Had 
this been a recently sunken ship or submarine, salvage crews could now be dispatched to 
a precise location. Figure 56 is a detailed image of the barge, showing the high resolution 
of the sonar. Two of three rectangular hatches can easily be observed. 

5.4. Surface Influence 


The final type of feature the EG&G Model 260-TH system can resolve arc 
interferences at the surface. On a particularly windy day (1NOV93), bottom features 
from the Severn River channel were partially obscured by wave interference (Figure 57). 
Sonar pings striking the surface are normally specularly retlected away from the 
transducers. However, as Figure 57 shows, high waves can produce strong returns 
because of the direct bounce from the wave back to the transducer. 

The mixing of air bubbles in the water column also results in a high backscattcr 
energy, This happens often in the Chesapeake Bay as a result of passing speed boats. 
Wakes can be seen crossing side-scan images several minutes after the boat has passed. 








The best example of this is Figure 58. On the port channel of Figure 58 is the wake 
produced by the YP. The YP had just completed a nearly 180° 100 m radius turn when 
the previous track line wake became visible. 

Piiese two examples prove that the side-scan files may not simply be pictures of 
the bottom. Waves and wake are only two of the things that can affect side-scan returns. 
The operator must remain alert to environmental conditions when collecting data so that 
some anomalies can be identified immediately. 

6. Conclusions 

6.1. Results 

Using a microcomputer to post-process digital side-scan sonar images offers many 
advantages. SIDESCAN automatically corrects the various side-scan imaging errors and 
allows the user to display the raw data in a variety of configurations. SIDESCAN also 
allows the user to merge EG&G side-scan data with GPS position data to produce ground 
registered images. These images, when copied to standard image files, can be analyzed 
for sediment type or bottom features using many different techniques, including digital 
elevation contour overlay, fast fourier transform, or semivariogram [Gulh, 1991]. 
SIDESCAN allows users to quickly and easily manipulate side-scan data. 

A wealth of side-scan data was collected in the Severn River and mid Chesapeake 
Bay using the EG&G Model 260-TH side-scan sonar system in the 100 kHz mode. No 
documented side-scan studies have ever been done of these areas. Interpretation of the 
data using SIDESCAN yielded a great deal of information regarding the nature of the 
Chesapeake Bay floor. Three sediment types, mud. sand, and oysters, were identified. 
They could be discriminated through image inspection, histogram reflectances, and 1'I'T 







or semivariogram of the poNver spectrum. The sonar also resolved a variety of bottom 
features, including mounds and ridges in the Severn River, sand ripples in the Delaware 
Bay, and submarine cables, a wreck, and trawl marks in the mid Chesapeake Bay. 

The only major disadvantage to using SIDESCAN for image analysi.s is the lack 
of a real time capability. Danforth et al. [1991] have developed similar correction and 
digital mosaicking routines which operate in real time. Hampshire [1989], also operating 
in real time, improved quantitative geological interpretations through combination of 
side-scan imagery and suu bottom profiler data. The resulting system reduced much of 
the subjective analysis of side-scan imagery. By feeding the side-scan output data 
directly into a microcomputer onboard the survey vessel, and with modifications to the 
program, data could be displayed on a UTM projection as it was collected. Implementing 
these changes would require directly accessing the digital tape drive's SCSI interface, 
necessitating that most of the testing of the program be done aboard the YP. 

6.2. Future Research 

A future enhancement to SIDESCAN might be the ability to digitally classify 
sediment types automatically in the side-scan images. The Chesapeake Bay region would 
present many natural challenges to this method. Firstly, regions of moderate bathymetric 
changes would have to be taken into account. This includes not only the Tolly Point and 
deep channel regions, but also anywhere the side-scan data was affected by the 
bathymetry, such as by the mounds or ridges in the shipping channel region. 

Alexandrou and Pantzartzis [1990] used neural nets to digitally classify seafloor 
"provinces." Different bottom types possess unique acoustic signatures. Their method, 
tested only through computer simulations, uses pattern recognition to classify the 
sediment in question. Using a slightly different approach. Mitchell and Somers 11989) 








43 


extracted backscatter strength values from the sonar transducer voltages with an acoustic 
propagation model. Quantitative comparisons were then made based on the similarity of 
the side-scan data to historical backscatter data. Pace and Gao [1988] accurately 
identified seabed types 97% of the time using a computerized discrimination system also 
based on statistical comparisons. Tamsett [1993] also characterized and classified seabed 
data using a power spectra analysis method similar to that used by Pace and Gao, His 
process, however, was very slow. Using SeaM ARC II side-scan data, Reed and Hussong 
[1989] developed computer software which quickly classifies textural data. Raw side- 
scan images are transformed into image maps showing sediment texture based on gray- 
level co-occurrence matrices (GLCM). Their technique not only allows for qualitative 
and quantitative analysis, but also the ability to distinguish between features with similar 
image DNs but different lithologies. The limitation of this technique is their flat bottom 
assumption. 

Considering the present scarcity of side-scan data, opportunities to image 
unexplored ocean floors abound. High resolution side-scan sonars, coupled with useful 
post-processing computer routines, allow researchers to gain insights into the geologic 
and bathymetric character of coastal regions such as the Chesapeake Bay. The recent 
push to explore the 200 nm exclusive economic zone (EEZ) surrounding the United 
States is just one example of how our ’’eed for more complete knowledge of coastal 
seafloors is increasing. Perhaps if researchers continue to probe the bottom of the oceans, 
someday this last of our earth's frontiers will be finally surmounted. 






44 


Acknowledgments. I would like to thank my adviser. Professor Peter Guth. for 
sparking my interest in this topic and for providing dedicated support. I also extend 
thanks to those who have, in one way or another, made this project possible: B. Yoakum, 
the crew of YP686, E. Stengl. K. Sabel, K. Zepp, the Maryland DNR, the USNA. 
Educational Resources Center, the USNA Photo Lab, M. W. Gleeson, M. Bern, and the 
Oceanography Department faculty. Finally, I wish to thank my family, Peter, Louise, 
Amy, and Benny, for their unwavering support. 



45 


Table 1. Model 272-TD 


MODEL 272-TD TOWFISH 

ELECTRO-ACOUSTIC 
Operating frequencies: 
Pulse length: 

Swath width: 

Acoustic output: 

Horizontal beam width: 
Vertical beam width: 

TVO range; 

MECHANICAL 
Maximum depth: 

Weight (out of water); 
Dimensions:S.38 


lowfish specifications [£G<SC; 


STANDARD RESOLUTION 

("100 kHz") 


105+/-10 kHz 
0.1 msec 
25 m to 600 m 

228 dB ref I pPa at I m 

1.2° (3 dB points) 

50®, tilted down 20* 

60 dB to 220 ms 


600 m (2000 ft) 

25 kg (55 lb) 

140 cm long x 0.41 cm diameter x 


Marine Instruments, 1990]. 

HIGH RESOLUflON 

goo kHz") 


390 +/• 20 kHz 
0.01 msec 
25 m to 600 m 

228 dB ref 1 pPa at I m 

0.5® 

50®, tilted down 20® 

19 dB to 75 ms 


61 cm diameter tall (55 in. x 4.5 in. x 24 in.) 








46 


Table 2. Summary of raw EG&G data files collected. 


Flic name 


Oeneral location 

Track 

Swath 


(m 


ei) 

Lm) 

INOVSl 

4,500 

Severn R. mouth 

140 

100 

8N0VS1 

4,4% 

Severn R, mouth 

140 

100 

8NOVS2 

4,500 

Severn R. mouth 

140 

100 

8NOVS3 

4,500 

Severn R. mouth 

140 

100 

8NOVS4 

2,700 

Severn R. mouth 

145 

100 

8NOVS5 

2,700 

Severn R. mouth 

163 

100 

8NOVSOYO 

4.500 

N, Tolly Point 

180 

100 

8N0VS0Y1 

3,600 

mid Tolly Point 

200 

100 

8NOVSOY2 

3,240 

S, Tolly Point 

200 

100 

8N0VN1 

3,060 

south of Tolly 

320 

100 

8NOVNOY1 

3,600 

S. Tolly Point 

013 

100 

8NOVNOY2 

2,160 

mid Telly Point 

015 

100 

8NOVNOY3 

3,240 

mid Tolly Point 

345 

100 

8NOVNOY4 

3,240 

N. Tolly Point 

333 

100 

8NOVN2 

4,500 

Severn R. mouth 

330 

100 

8NOVN3 

4,500 

Severn R. mouth 

330 

100 

180CTN1 

3,058 

mid Bay 

040 

200 

180CTN2 

3,448 

mid Bay 

040 

200 

l8()CrN3 

4,! 09 

mid Bay 

040 

200 

I80CTN4 

3,929 

mid Bay 

040 

200 

180CTS1 

2,705 

mid Bay 

220 

200 

180CTS2 

2,568 

mid Bay 

220 

200 

180CTS3 

2,098 

mid Bay 

220 

200 

180CTS4 

2,340 

mid Bay 

220 

2tM) 

2SOCTEI 

3,591 

mid Bay 

130 

200 

250CTli2 

4,446 

mid Bay 

130 

200 

2JOCTE3 

3,729 

mid Bay 

130 

200 

2JOCTWI 

4,181 

mid Bay 

330 

200 

25C)CTW2 

4,273 

mid Ray 

330 

200 

250CTW3 

4,233 

mid Bay 

330 

200 

7l'i:HEl 

1,800 

i:. Bay 

270 

200 

7l’i;HSI 

4.887 

i:. Hay 

180 

200 

23MAKSt)Y 

4,680 

Tolly Point 

140 

200 

23MAKS 

4,500 

south of Tolly 

180 

2(H) 

23MARTII 

2,880 

Thomas Point 

180/000 

200 

23MARNI 

3,960 

south on oily 

010 

200 

23MARNOY 

3,600 

Tolly Point 

015 

2(K) 

23MARN2 

3,240 

Severn R mouth 

330 

200 

31 MARE 

1,800 

E, Bay 

270 

200 

3IMAR\V1 

2,320 

li, Huy 

090 

200 

31MARW2 

1,800 

\i. Huy 

090 

200 

SlIM‘>3SAN 

2,340 

Delaware Hay 

??? 

150 

WRI'CK 

864 

E. Huy 

7 ')') 

KM) 

MOUNDS 

864 

Severn R. mouth 

?’*'■ 

075 

M(niNDS2 

864 

Severn R. mouth 

7 *)‘- 

075 





47 


Table 3. Features of program SIDESCAN. 

SIDESCAN code written bv Gu th 

Display of DOS EG&G data file 

• User selects rows/columns to skip to adjust aspect ratio 

• Water column removal 

Create subsets of large side-scan files 

Copy portion of uncorrected image to image file 

Plotting options 

• Distribution of backscatter returns with distance 

• Backscatter returns versus distance for individual records 

• Fish height as a function of position in record 
Image processing (MICRODEM) 

• Digital elevation model creation and analysis 

• Bathymetric contour overlay 

• Statistical options 


Display single or multiple EG&G files on single screen 

■ Can display in multiple columns or Inverted 

• Data automatically corrected for slant range, anamorphic, and speed variation distortions 

■ Option to apply radiometric corrections 

• Copy corrected side-scan data to registered raster image file 
Other options 

■ Ground register EG&G files 

• Create mosaics of data flies or merge existing mosaics 

• Modliy bottomvalue or change transducer used for bottom tracking during data display 


Tabic 4. Fully corrected and ground registered side-scan mosaics. 


File ntttuu 



Look direction 

NCHANNEL 

Severn R mouth 

372,500 

4,315,500 

All 

ECHNL 

Severn R. mouth 

373,300 

4.314,500 

E 

WCHNl, 

Severn R, mouth 

373,300 

4.314,500 

W 

Ni-.l.OOK 

mid Bay 

376,800 

4.312,000 

NE 

NWl.OOK 

mid Bay 

376,800 

4.312.000 

NW 

SUI.OOK 

mid Bay 

376,800 

4,312.000 

SE 

SWLOOK 

mid Bay 

376,800 

4.312.000 

SW 

NTOLLYEl 

N, Tolly Point 

374,800 

4.312.700 

E 

NTOLLYE2 

N, Tolly Point 

374,800 

4,312.700 

E 

NTOLLYWl 

N, Tolly Point 

374,800 

4,312,700 

W 

Nr01.1,YW2 

N. Tolly Point 

374,800 

4.312.700 

W 

STOLl.YI 

S. folly Point 

375,000 

4,310,900 

All 

sroi,i.Y2 

S, Tolly Point 

375,000 

4.310,900 

All 

THOMASE 

Thomas Point 

374,800 

4.309.100 

E 

TIIOMASW 

Thomas Point 

374,800 

4,309.100 

W 

WRl'.CKN 

E, Hav 

378,400 

4,311.400 

N 

WRI'.tXS 

E, Hav 

378,400 

4.311.400 

S 






48 


Table 5. Sediment sample statistics. 


Latitude 

U .igitude 

ft 

Name 

Sand 

Sill 


Mean 

SidJQe^ 

m 

ejw 




(la 

m 

CElii) 

CEllU 

38.9556 

-76,4441 

1 

19APR93G 

42.56 

56.83 

0.61 

4.07 

0.73 

38,9503 

-76.4380 

2 

29APR93A 

00.00 

92,39 

7,61 

5.73 

1.60 

38.9503 

-76.4367 

3 

19APR93F 

42.49 

55.63 

1.88 

4.26 

0.92 

38,9478 

-76,4342 

4 

29APR93B 

45.15 

50.88 


4.81 

1.70 

38,9484 

-76,4331 

5 

A 

42.71 

54.38 

2 91 

4.42 

i.n 

38.9460 

-76.4318 

6 

29APR93C 

00.96 

93.10 

5.94 

5.63 

1.50 

38.9452 

-76.4316 

7 

19APR93E 

58.84 

40.80 

0.36 

3.82 

0,85 

38.9415 

-76,4327 

8 

15APR93C 

45.47 

50.35 

4.18 

4.89 

1,43 

38.9433 

-76.4283 

9 

29APR93D 

55.89 

43.14 

0.97 

3.82 

0.86 

38.9515 

-76,4173 

10 

1NOV931 

52,06 

47.15 

0.79 

3,91 

0.73 

38,9470 

-76.4222 

11 

B 

35.81 

59,93 

4.25 

3.90 

0,34 

38,9435 

-76.4218 

12 

1NOV93D 

36.91 

60.92 

2.17 

4.36 

1,09 

38,9397 

-76,4293 

13 

29APR93E 

00.00 

86.05 

13,95 

6.03 

1,72 

38,9395 

-76,4232 

14 

1NOV93C 

47,96 

50,91 

1.13 

2,27 

0.26 

38,9374 

-76.4286 

15 

19APR93C 

00.00 

68.52 

31.48 

7,90 

0.76 

38,9357 

-76.4282 

16 

29APR93Q 

00.00 

76.44 

23.56 

5.71 

1.59 

38,9341 

-76.4304 

17 

19APR93B 

00.00 

73,90 

26.10 

6.45 

-0,71 

38,9342 

-76.4285 

18 

29APR93P 

00.00 

92,00 

8.00 

5.25 

1.72 

38.9327 

-76,4287 

19 

29APR930 

48.02 

50.77 

1,21 

4.05 

0,96 

38.9312 

-76.4313 

20 

29APR93H 

68.32 

31.57 

0.12 

3.69 

0,72 

38.9305 

-76.4315 

21 

13APR93A 

30,13 

63.47 

6.41 

5,23 

1.96 

38.9303 

•76.4297 

22 

29APR93N 

68,73 

31,07 

0.19 

3.71 

0.70 

38.9283 

•76.4305 

23 

12APR93A 

20.29 

77,46 

2.24 

3.69 

0,71 

38.9272 

■76.4330 

24 

29APR931 

39.45 

58.52 

2.03 

4,00 

0,74 

38.9268 

•V6.432t 

25 

19APR')3A 

56.72 

43.06 

0.22 

3,67 

0.40 

38.9263 

•76,4315 

26 

29APR93L 

00.00 

93,46 

6,54 

4.33 

1,05 

38,9247 

•76,4335 

27 

29APR93J 

00,00 

70,24 

29.76 

6.84 

0,50 

38,9243 

•76,4317 

28 

29APR93K 

48,09 

48.98 

2,93 

2.24 

0.26 

38.9225 

•76.4302 

29 

12APR93C 

65.65 

33.62 

0,73 

3.66 

0,78 

38.9200 

•76.4310 

30 

I2APR93D 

44,20 

51,98 

3.82 

4.79 

1.66 

38.9451 

•76.4101 

31 

C 

61.21 

36,05 

2,74 

.T93 

1,05 

38.9446 

-76.4041 

32 

D 

00.00 

90,83 

9,17 

5,24 

1,72 

38.9442 

■76,4025 

.33 

1NOV93H 

00.00 

72.43 

27.57 

4,03 

0,91 

38.9387 

-76,3935 

34 

1N0V930 

63.26 

35.85 

0.88 

3,74 

0,84 

38.9390 

■76,4093 

35 

INOV93E 

51,62 

47.05 

1.33 

4,26 

0,99 

38.9335 

-76,3993 

36 

1NOV93F 

42.33 

53.85 

3.82 

4.65 

1,49 

38.9288 

-76.4113 

37 

1NOV93B 

45.30 

53.59 

Ml 

3.60 

0.77 

38.9212 

-76.4010 

38 

INOV93A 

27,11 

66,85 

6,04 

4.42 

0.82 

38.9258 

-76.4251 

39 

50CT93A 

00.00 

83.37 

16.63 

3.89 

0.34 

38.9246 

•76.4239 

40 

50CT93B 

10.92 

79.85 

9,23 

5,33 

2,04 

38.9235 

-76.4220 

41 

50CT93C 

23.80 

70,57 

5,63 

5,43 

1.86 

38.9225 

-76,4206 

42 

50CT93D 

00.00 

90,74 

9.26 

2.22 

0 27 

38.9224 

-76,4198 

43 

50CT93F- 

56.39 

41.86 

1.75 

3.65 

0.78 













Table 6. Side-scan image histogram statistics. 


Sfidimeni 

Source Region 



Mud 

Severn R, mouth 

24,13 

4,47 

Mud 

Tolly Point 

25,17 

3,32 

Mud 

Thomas Point 

25,55 

3,27 

Mud 

Mid Bay 

26.68 

5.69 

Mud 

Deep channel 

22.68 

4.22 

Sand 

Delaware Bay 

30.56 

4.40 

Sand 

N. Severn R. 

30.39 

7.74 

Sand 

S. Severn R. 

31.51 

6.11 

Oysters 

Tolly Point 

38.44 

8.21 


Thomas Point 

36.49 

5.38 


49 






Figure 1. Side*scan sonar data collection. 




MoiiiiiK 


Atoiislit .sliiiilovv 


' -St • r" 




1 ‘ • ' ' 

■'.:;‘,C' ' ■ '■ ’■',; * 




|•r^;^|ll«.•llC)' 



l•'i^llrl' 2 . I wu'onwtcil si>iut|.>i-,ipli ol Iho Scmtii KI'.i.m mmitli 








52 



Figure 3. Relationships of hardware used. 


















kn 



























































































































































































l''ij;iiiT 5. I 'iK-om\-k\l iina^c ol'bcnn aiul hiio\ U "II" m Uk' SL'\i.'rii Kivt'r nuHilli 


















i''imiri' 7. Ik'fin aiid hiu>\ (i "I 1" with water I'niumii leiinwed 

















Figure 8. Slant range pixel placement error [EG&G Marine Instruments, 1991], 






■ ■ : -"A^- 


■■m,. 


: ■ ,v; 

’'•■'• 'J* .* . • I' 






i, V :■''rt;»^H'V-; 


“■^i_ 


'■ f -'.'A!? 


' j- f/'-'M 




jlr^ T- 






I’mpcr iicros^-liiick 
pixi;! |i|iuriii(.'ii( 



I'lopoi tirofi|!-liu^i:k spiu iiin 






Nciii riiiipc; poU'fi aiiipIKiciiiioii 




I'ai iHHxc |«>vvcr diop olV 


I' imiro '). nt’um;Mri(.'iillv I’tinvcli-il Ivrm ;iinl liiui\ (i "1 1'' iiiuii'r 










After radiometric corrections 



54 


0 'wM ■ . I I t t I I I 

6 100 200 300 400 500 600 700 600 900 

AcroQQ track location (bin) 


■ Port ♦ Starboard Port Starboard 


Figure 10. Average return strength vs. distance for 8NOVS1 (which contains the berm 
and buoy G " 11" image) before and after radiometric con-ections. 


































61 


f \ 

DOS file of raw EG&G data 

V___ / 


( - ^ 

Find fish height 

V___ 




Display row of data 


Figure 12. Geometric and radiometric corrections in SIDESCAN, 


I 



















































Rsh height (m) 


64 



Location In file (record number) 


■ Port Starboard * Average 


Figure IS. Calculated fish height based upon port, starboard, and average of both 

transducers. 
















I'imu'i' l(). K.iw iiiiiiL'i.'Ill k .iiui "W KS""'sIhumiiu (.-lulU'i in sl;iiini,iii.l w.ik'i 

^.nlunili 













S '5' 


;‘ ;•.!r».s 






t , ■ '■.' 'it...,'.''. 


Is- . , ■,. 

''V',V /'■.’* 0- ■ V 'T ' * ■ ‘ -V't; ‘ '.' ')'\'\'\^ **'.'' vV "' V'mV*'-- ' '* -.* ■ \. 

•.; ,J,I// !.■.>•••.•.. ' ’ ‘■•"^ i.V*-: Vi •', ■’ • 

;/.• N •'■ ’• ■• '■H ./'■/.•• • ••■ ■ .' • •- •»• .1,;, •• ,a‘*. - •* .»•►:• /••• 

• ■■. / l-’''/'' '•* "r ■'.• ■ • ' • • ■''■;• •••■ ‘il r- I*',-'. • 

; ■':■' ‘ ••^.;V-*■■^‘r':•v'' >. ■ ■; 

^'t'" ■ ^ "''i* '^ *( V/-yy *(■ i .■!I*I. • "*■ 1^'- (•'’•* v^* *•• 'i '■' ■■ w' ' • .'• * 


- ' • -.. /-.-f-'f-: •■■,'■,•'r-.^ :■ • .i-i- <>. ■ .■■ ■■ ■■ ■* .■ ■ 

.« .'. J ♦ ;.> : ^>* • ’. t'‘ ' '...'tj* * . .*.r , •. .. .. **■ '.• ^ 

-J-; . 

/••'’- ‘ . ..» -4 ,. *• itV'M ^ ' ■ . ’ - . ’ ’ * . . • ■ ■ 


.A..^ 1 a r^**— '‘*rt ||4 ir^ i-* -r^ 




-’i ■*& . 


I'imiri' 1"'. Soiidi^rapli ul \Mx\'k aiul huo\ ' \\'RS7" usiiiL' iht.' purl lran''i.Uua'i loi bumMii 

tr.iikiau 
















I'imat IS. ( nnip.iMMMi (iTah'iii.' tr;n.'k sp.ii.'iii,L' lnruvn uli.'Hiical lilcs liasLal ui s|h'ci1 

tlihuu-'li wakTaiul .s|hviI luci pumiivl 







Get i'fset between EG&G and 
GPS position file 


Write centerline UTM coordinates 
and headings to EG&G data file 



Filter GPS position/heading data 
to eliminate erroneous points 


Edited EG&G data file produced 




















































































































































Kimirt' 22. 3 \ 3 snuHitliinj; I’lllcr applied lii image of barge wreckage. Much of the 
.speckle tioi.se has been removed without sacrillciiig detail. 












Fijjurc 23. 5 x 5 sniinUhing llhcr applied to image of barge wreckage. Although speckle 
noise is lurther lessened, excessive averaging of pixel DNs has destroyed details. 
















































Figure 25. Sonograph of a 180 degree turn over the Thomas Point oyster bar shows the 
limitations of a traditional display, where turns, course deviations, and data overlap are 

not apparent, 












2(». I Ik' sank' sniuii.'rapli as l ipiiiv cNcopl data ^^as wriltcii to a ikojcotion 
basi'il on I ’ I'M ccntciiino \alik‘s and lioadinus 




























































Finurc 28. Outlines of mosaics created usiny SI1)1'!SCAN. 













































































































































79 


CLAY 



SAND SILT 

Figure 30. Tertiary diagram of sediment samples collected by Kerhin et al. [1988] in the 
Maryland portion of the Chesapeake Bay from the Severn River to the Patuxent River. 














0) « 
CD n 

o o 



<ni 


Z PQ 


-'•-*•**■ “■ ■. 
,'+fJ++++'’'-r 

..•4-‘4'-*+*+-++V 

♦♦*++++1-4#'++^4+/ 

+*♦■* W’ *•* +•* ++i*- 

,*+4'* 4++*+++■• 4'^4-*+^-'' 

+%+4;>4+4--*-4+•f*'4'*’^*++■ 

. 4-‘*‘4-‘4.*4*4*4-'4't%-*.' . 


• 4*4V-‘4'4-*4*-4-*^'‘-’,+ 4J ^ 

* ,-V 4 ‘*’ 4 .' 4 '-..'' 4 ’ 4 .* 4 .‘..-**,. £» 

,4%'4V.*4‘^-4’--.-'4 V/. * 





.r.*.^ 4 V,‘.‘ 4 V 4 ‘- /•_ 

■• 4 ‘ 4 * 4 * 4 *V^‘ 4 ^..'.'' ‘-^■ 

r*4'4’*‘4'4'‘.‘*‘ / . 7 


S'' CO 


CO / C Vr 

n «^ 

^ y ) in 

i /N * 



O f “ 

,u-*-j,*4.-^4'‘.'' 






h igurt .'<1. Oulliiifs (if Nalura! Oyster Bars 6-6 (Tolly Point) and 6-1 5 ( Thomas Point) 
\ !k'punmcnl of .\alunil Kc.sourcc.^. .S'l.fc of Shirvluml. ) 


Thonas Pt 


































































Sediment Samples 


81 

I 



Figurr 32. Locations of sediment samples collected with orange peel grab. 


38 '» 























!■ iviuri-.''4. \1ik1 .iiivl i'\s.impli.-s pKtik\i nil lulls I'l'iiii >'.in l\ii 


























1-imirt'-■'5. NimiIkmsI limk aiiiilo mosaic ol tlic mul ('hcsaiu'akc lki\ ovcrlan.! \M'h .. toui 
> I he Harness ol this rCL;ioii implies tlial llie hallnmetiA hoes noi sii'mrieantl\ 

attecl haekseatlet \allies 






















































I’imifi’ Si'ihIktm cili'c I'l till.' 1‘iMnl i'\Nici b.ii 



























































































































































Kitiurc 3S. Mnsaii. ol deep Sii.si|ueli;iiin;i l<i\er thalweg: 
































































































































































































































































































Figure 43. Sand reflectance histograms from Delaware Bay and the Severn River, 















% of point 












Sonar reflectance (DN) 


Figure 45. Histogram comparison of three general sediment types, 

























Seni variance <OH) 



Figure 47. Semivariogram of spatial correlation of mud, sand, and oysters. The four 
curves for each sediment type represent the directions (N-S, E-W, NE-SW, NW-SE) 
sampled. The small deviations between direction curves indicate isotropic data sets, 


1-1 I I ! I I M I M J .Li Ll lLlLJ J i i I lJi ! U-i. 









76 ® 26'(^4 76 * 24 ' 76*22 



Figure 48. Summary of bottom features idcntitied with sidc' acaii sonar. 


Thomas Ft 














































































































































































































































































































































































^• i|;llrT 57. Surtace \\a\i. actiuii in tlii' 


•\cni Kiwi \isihlc as liii:!’. l’ik'is.:\ mtcrlL'iciKa' 
























References 


Alexandrou, D. and D. Pant 2 artzis. Seafloor classification with neural networks, in 
Proceedings of the Oceans '90 Conference, 18*23,1990. 

Bangham, J. A., K. Y. Cheung, and R. Coates, Processing sidescan data using statistical 
filtering, in Proceedings of the Oceans '90 Conference, 57-62, 1990. 

Borland International, Borland Pascal with Objects, Version 7.0, Language Guide, Scotts 
Valley, California, 371 pp., 1992. 

Bothner, M. H., C. M. Parmenter, D. C. Twichell, C. F. Polloni, and H. J. Knebel, A 
geologic map of the sea floor in western Massachusetts Bay, constructed from digital 
sidescan-sonar images, photography, and sediment samples, U. S. Geological Survey 
Digital Data Series DDS-3, 1992. 

Burrett, J. R. and D. Chuter, Image correction of sidescan sonar date. Underwater 
Sy,stems Design, 73,21-24 1991. 

Chavez, P. S., Jr., Processing techniques for digital sonar images from GLORIA, 
Photogrammetric Engineering and Remote Sensing, 52, 1133-1145,1986. 

Chavez, P. S., Jr., J. A. Anderson, and J. W. Schoonmaker, Jr., Underwater mapping 
using GLORIA and MIPS, in Proceedings of the Oceans '87 Conference, Volume 3, 
1202-1205, 1986. 

Cobra, D. T., A. V. Oppenheim, and J. J. Jaffe, Geometric distortions in side-scan sonar 
images: a procedure for their estimation and correction, IEEE Journal of Oceanic 
Engineering, 17, 252-268,1992. 

Curran, J., The semivariogram in remote sensing, an introduction, Remote Sensing of 
Environment, 24, 493-507,1988. 

Cuthbertson, R., J. Halka, and J. Hill, Seismic and Geochemical Research in Chesapeake 
Bay. Maryland, Maryland Geological Survey, Baltimore, 1989. 

Danforth, W. W., T. F. O'Brien, and W. C. Schwab, Near-real-time mosaics from high- 
resolution side-scan sonar. Sea Technolog},', January, 54-59,1991. 

Dealteris, J. T., The application of hydroacoustics to the mapping of subtidal oyster reefs. 
Journal of Shellfish Research, 7,41-45, 1988. 

Department of Natural Resources, State of Maryland, Natural oyster bars. Chart no. 6, 
scale 1:20,000, 1961. 

EG&G Marine Instruments, The Model 260-TD Dual Frequency Towfish with TVG, 
Cataumet, Massachusetts, 1990. 

EG&G Marine Instruments, The Model 260-TH Image Correcting Side Scan Sonar 
User's Manual, Cataumet, Massachusetts, 1991. 

Gardner, J. V., M. E. Field, H. Lee, B. E. Edwards, D. G. Masson, N. Kenyon, and R. B. 
Kidd, Ground-truthing 6,5-kHz side scan sonographs: what are we really imaging?. 
Journal of Geophysical Research, 96, 5955-5974, 1991. 

Green, M. O.. Side-scan sonar mosaic of a sand ridge field: southern Mid-Atlantic Bight, 
Geo-Marine Letters, 6, 35-40, 1986. 






109 


Guth, P.L., Combining imagery and digital elevation models on a personal computer, 
Proceedings Eighth Thematic Conference on Geologic Remote Sensing, vol. 2, 
921-929, 1991. 

Hall, E. L., Computer Image Processing and Recognition, Academic Press, Inc., New 
York, 584 pp., 1979. 

Hampshire, D. D., Sonar image and record enhancement/phase I sub bottom profile 
record enhancement, in Proceedings of the Oceans '89 Conference, Volume 4: 
Acoustics, Arctic Studies, 1142-1147, 1989. 

Harris, P. T. and M. B. Collins, Side-scan sonar investigation into temporal variation in 
sand wave morphology: Helwick Sands, Bristol Channel, Geo-Marine Letters, 4,9\- 
97,1984. 

Hobbs, C. H. Ill, Side-scan sonar as a tool for mapping spatial variations in sediment 
type, Geo-Marine Le*ters, 5, 241-245, 1986. 

Hobbs, C. H. Ill, Prospecting for fossil oyster shell in Chesapeake Bay, Marine Mining, 

7, 199-208,1988. 

Johnson, H. P. and M. Helferty, The geological interpretation of side-scan sonar, Reviews 
of Geophysics, 28, 357-380,1990. 

Kelley, J. T., D. F. Belknap, and R. C. Shipp, Sedimentary framework of the southern 
Maine inner continental shelf: influence of glaciation and sea-level change. Marine 
Geology, 90, 139-147,1989. 

Kerhin, R. T., J. P. Halka, D. V. Wells, E. L. Hennessee, P. J. Blakeslee, N Zoltan, and 
R J. Cuthbertson, The Surficial Sediments of the Chespeake Bay, Maryland: Physical 
Characteristics and Sediment Budget, Department of Natural Resources, Main land 
Geological Survey, 82 pp., 1988. 

Knebel, H. J., E. A. Martin, J. L. Glenn, and S. W. Needell, Sedimentary framework of 
the Potomac River estuary, Maryland, Geological Society of America Bulletin, 29, 
578-589, 1981. 

Knebel, H. J., S. W. Needell and C. J. C'Hara, Modem sedimentary environments on the 
Rhode Island inner shelf, off the Eastern United States, Marine Geology. 49. 241-256, 
1982. 

Knebel, H, J., Modem sedimentary environments in a large tidal estuary, Delaware Bay. 
Marine Geolog)', 86, 119- 136, 1989. 

Knebel, H. J., Sedimentary environments within a glaciated estuarine-inner shelf system: 
Boston Harbor and Massachusetts Bay, Marine Geology. 110, 7-30,1992. 

Kuwahara, R. H. and R. H. Poeckert, Accurate seafloor mapping using precise navigation 
and side-scan sonar, in Proceedings of the Oceans '89 Conference. Volume 4, 1148- 
1152,1989. 

Luyendyk, B. P., E. J. Hajic, and D. S. Simonelt, Side-scan sonar mapping and computer- 
aided interpretation in the Santa Barbara Channel. California. Marine Geophysical 
Research. 5, 365-388, 1983, 

Magellan Systems Corporation. Magellan GPS Na\ 1000 Pro User's Guide, Monrovia. 
California, 1990. 

Malinvemo, A., M H. Edwards, and W. B. F. Ryan, Processing of SeaMARC swath 
sonar data, IEEE Journal of Oceanic Engineering, 15. 14-23. 1990. 



IIG 

Mann, R. G., J. P. Swift, and R. Perry, Size classes of flow-transverse bedforms in a 
subtidal environment, Nantucket Shoals, North American Atlantic shelf, Geo-Marine 
Letters, 1, 39-43, 1981. 

Meams, D. L., A. C. Hine, and S. R. Riggs, Comparison of sonographs taken before and 
after Hurricane Diana, Onslow Bay, North Carolina, Geology, 16, 267-270,1988. 

Menzie, C. A., J. Ryther, Jr., L. F. Boyer, J. D. Germano, and D. C. Rhoads, Remote 
methods of mapping seafloor topography, sediment type, bedforms, and benthic 
bioiogy, in Proceedings of the Oceans 82 Conference: Industry, Government, 
Education - Partners in Progress - Washington, D. C., 1046-1051, 1982. 

Miller, R. L., F. S. Dwan, and C. Cheng, Digital Processing Techniques for GLORIA II 
Sonar Images, Geo-Marine Letters, 11, 23-31, 1991. 

Mitchell, N. C. and M. L. Somers, Quantitative backscatter measurements with a long- 
range side-scan sonar, IEEE Journal of Oceanic Engineering, 14, 368-374,1989. 

Mitchell, N. C., A model for attenuation of backscatter due to sediment accumulations 
and its application to determine sediment thicknesses with GLORIA sidescan sonar. 
Journal of Geophysical Research, 98, 22477-22493,1993. 

Moiang, A. and R. L. McMaster, Nearshore bedform patterns along Rhode Island from 
side-scan sonar surveys. Journal of Sedimentary Petrology, SO, 831-840, 1980. 

Murphy, F. J., Littoral warfare: adapting to brown-water operations. Marine Corps 
Gazette, September, 65-73,1993. 

Odom Hydrographic Systems, Echotrac DF3200 Technical Manual STM 611 & 
Installation and Operation Manual, Baton Rouge, Louisiana, 1985. 

Pace, N. G. & H. Gao, Swathe seabed classification, IEEE Journal of Oceanic 
Engineering, 13, 83-90, 1988. 

Paluzzi, P. R., W. R. Normark, G. R. Hess, H. D. Hess, and M. J. Cruickshank, Computer 
image processing in marine resource exploration, in Proceedings of the Oceans 76 
Conference, 4D-1-4D-10,1976. 

Paluzzi, P. R., R. D. Toaz, D. G. Roberts. R. C. Searle, and M. L, Somers, Computer 
rectification and mosaicking of side-looking sonar images, in Proceedings of the 
Thirteenth Annual Onshore Technology Conference, 1981, 103-114, 1981, 

Prior, D. B., J. M. Coleman, and L. E. Garrison, Digitally acquired undistorted side-.scan 
sonar images of submarine landslides, Mississippi River delta. Geology, 7,423-425, 
1979. 

Reed. T. B. and D. Hussong, Digital image processing techniques for enhancement and 
classification of SeaMARC II side scan sonar imagery. Journal of Geophysical 
Research, 94, 7469-7490, 1989. 

Ryan, J. D., The Sediments of Chesapeake Bay: Maryland Department of Geology, 

Mines, and Water Resources. Waverly Press, Inc., Baltimore. 120 pp.. 1953. 

Searle, R. C., T. P. Le Bas, N. C. Mitchell, M. L. Somers, L. M Parson, and P. H. Patriat. 
GLORIA image processing: the state of the art. Marine Geophysical Research, 12, 
21-39.1990, 

Shaw, R. and D. K. Smith, Robust description of statistically heterogeneous seafloor 
topography through its slope distribution, Jounral of Geophysical Re.search, 95, 8705- 
8722.1990. 






11 

Snyder, J.P., Map projections - a working manual: U.S. Geological Professional Paper 
1395,383 pp., 1987. 

Stride, A. H., The first geological use of side-scan sonar, Geology Todav, July-August, 
146-150, 1992. 

Talukdar, K. K. and R. C. Tyce, Digital processing of sidescan images from bottom 
backscatter data collected by sea beam. Marine Geodesy, 74, 81-100, 1990. 

Tamsett, D., Sea-bed characteiization and classification from the power spectra of side- 
scan sonar data. Marine Geophysical Research, IS, 43-64,1993. 

Teleki, P. G., D. G. Roberts, P. S. Chavez, M. L. Somers, and D. C. Twichell, Sonar 
survey of the U.S. Atlantic continental slope; acoustic characteristics and image 
processing techniques, in Proceedings of the Thirteenth Annual Offshore Technology 
Conference, Vol 2,91-102, 1981. 

Thekkethala, J. and J. C. Spruance, Side-scan targets; image analysis, database 
management. Sea Technology, 33, 57-64,1992. 

Wright, L. D., D. B. Prior, C. H. Hobbs, R. J. Byrne, J. D. Boon, L. C. Schaffner, and M. 
O. Green, Spatial variability of bottom types in the lower Chesapeake Bay and 
adjoining estuaries and inner shelf. Estuarine, Coastal, and Shelf Science, 24, 765- 
784, 1987. 









Appendices 


A. Using SIDESCAN 

SIDESCAN allows the user to manipulate side-scan data so that the most useful images are produced. The 
following steps allow the user to take f\ill advantage of SlDESCAK's capabilities. 

1. Data collection 

• Write side-scan data to to 8mm digital tape while collecting 

• Write GPS position and EchoTrac depth soundings to microcomputer file 

• Several times during the trip, note the exact time difference between the EQ&O time counter and the OPS 

• Although it is not essential, try to record the EQ&Q times when the survey vessel was turning 

2. Image rectification 

• Use the NOVA conversion software to convert 8mm data to a DOS file 

• Copy the ,HYD flic from the data run to the hard drive 

• Enter SIDESCAN and select 'Create subset' 

■ Select a beginning record number and number of records to copy; limit this to no more than 2S00 and try to 
exclude turns (based on EQ&G times) 

• Select 'Qround register' from the main SIDESCAN menu 

• Enter the time offset 

• Select the .HYD file fVom the data collection day 

• Choose a name for the output file 

• Wait; computer will process file 

3. Create registered Image files 

Single sonograph 

• Select 'One sonograph' 

• Pick the corrected sonograph file 

• Choose 'Customize' 

• Choose 'Copy to image file' and 'Radiometric corrections' 

• 'Xit' from the customize menu and choose 'Both' 

• Wait for image to display 

• Select 'Resume' and 'N' to display again 

• Select 'Image processing options' 

Mosaic 

• Select 'Moke single mosaic' 

• Select upper left comer in UTM coordinates 

• Select channel and side-scan files to display/writc to mosaic 

4. Image enhancement: 

• From main menu, select 'Image processing option.s' 

• Select the MIDBAY DEM 

• Graphically select or choose file name of image 

• Select statistical options to suit user, including FIT, semivariogram, or bathymetric contour overlay 


The following files arc necessary to use all of the functions in SIDESCAN: 

• S1DES''.'.\N.HXE; the program 

• R I'M.EXE; protected mode interface (from Borland Inlernational) 

• RTMRES.EXI;; protected mode interface (from Borland Inlernational) 










DPMIMEM.DLL; protected mode interface (from Borland International) 

DPM116BI.OVL: protected mode interface (from Borland International) 

DPMIINST.EXE; protected mode interface (from Borland International) 

DPMILOAD.EXE; protected mode interface (from Borland Internaiional) 

SVGA256,BOI; graphics interface for SVGA mode 

EGAVGA.BGl; graphics interface for VGA mode 

BOI2S6.BGI; graphics interface for SVGA mode 

OPSAREA.PRJ; UTM map projection 

OPS AREA. VQP; screen map 

MIDBAY.DEM; digital elevation model 

MIDBAY.HDKi DEM header with size and map projection information 

*.EGG;dBtanies 

*,HYD; hydrographic flies 

*.MIC: sediment sample ASCII data flies 

*,FIL; filters 










114 


B. SIDESCAN Help Files 

These are the text files which accompany almost every menu in SIDESCAN. They can be displayed by 

typing 'FI'while in SIDESCAN. 

Main Menu 

DISPLAY; 

One sonograph • displays one geometrically corrected sonograph according to the user's specificotions. 

Multiple sonographs - displays two or three corrected sonographs side by side. 

Altitude distribution • displays the average flsh height off the bottom, based on the first bottom return, as a function of 
distance from the fish. 

Digital mosaic • allows user to merge Ailly corrected side-scan data files onto a single projection, displaying each data 
point at Its actual ground location. Also allows user to combine previously created mosaics. 

Frequency distribution • displays the average return strength (of a selected record) of the sonar versus distance fVom 
the nadir of the towfish. 

Profile across track • allows user to display return strengths from single side-scan records. 

OPTIONS: 

Create EQO subset - allows user to create a smallei BQ&G aide-scan file ftom a large original. Useful when used In 
copjunction with the 'Ground register' feature. 

Ground register • merges on unprocessed EG&Q file with an .HYD file from the same date. The .HYD file is filtered 
and headings and UTM coordinates for the centerline of the EQ&G file written to the EO&G data blocks. Make 
sure that there is enough virtual disk space to compensate for the size of the EQ&O flic • It will be temporarily 
written there, 

Hydrographic options • calls the 'GPS survey' procedure, which allows one to plot OPS data flics and manipulate 
projections. 

Image processing options - calls the 'Satellite Image' procedure from MICKODCM. This Is useful In displaying 
processed Ibll-length image files on a single screen and merging them with digital bathymetric data of the 
operating area. Statistical operations con also be performed here. 

Sediment analysis • calls the 'sieve' procedure. It is used for the analysis of the GALAI CIS-100 particle si/.c analysis 
data. It allows the user to graphically pick the bottom grab station, and will plot the sample on both a tertiary 
diagram and cumulative weight Vo versus grain size in mm plot. 


Sonograph Display 


Port ■ displays only the port channel of the sonograph at the desired settings. Kecommended for better detail of the 
port channel 


Starboard ■ displays only the starboard channel of the sonograph at the desired settings. Kecommended lor higher 
detail of the starboard channel. 


Both - displays both the port and starboard channels of a given sonograph at the desired settings. Recommended for 
standard viewing 










Express ■ automatically sets the options permitting the fastest possible viewing speed. 
Customize • allow.« user to modify the display options to suit his/her viewing needs. 
Abort • aborts the display function and returns user to the main menu. 


1 I 


Customize Options 

MODIF Y . PREFERENCES: 

Bottom tracking, channel > the port, starboard, or an average of both channels may be used to determine the height of 
the towfish above the bottom. First time users should use the Altitude Distribution function to determine which 
channel produces the most consistent (Ish height. 

Copy to image file • while displaying the data to the screen, the program also copies the data to a file which can be 
analyzed using standard image processing software (see main menu - Image processing options). It olso writes 
.IDX and ,XY files, containing the indexing information and UTM coordinates of the four comers of the image, 
respectively. 

Display status bar - turns on or off the status bar, which contains the following information: file name, time, record 
number, speed, range, frequency, and heading. 

Edit bottomvaluc, x • allows the user to specify the value which the computer assumes to be the value of the first 
bottom return. For deep water, the bottomvalue should be decreased because of the increased attenuation. The 
opposite is true of especially shallow runs. User is encouraged to use the Frequency Distribution or Altitude 
Distribution ftinction.s to determine what value produces the most accurate fish height. 

Invert • scrolls the Image down from the top of the screen, instead of vice versa. This is useftil when combined with 
the Multiple sonographs display choice and two Images which are parallel and adiacent. Inverting one of the 
images allows the Images to be compared with similar geometric orienution. 

Number of columns to display, x • specifies the number of columns to subdivide the screen into when displaying. 
Uscftil when a user wants to examine a large image on one screen. 

Radiometric corrections • at the sacrifice of display speed, this algorithm averages the columns for tliC entire record 
and applies u radiometric averaging function which alleviates the far range power drop off 

Target color - switches the color.s associated with strong and weak returns, 

Wait when screen lull • when selected, the program will wall until a key 1.1 pressed before clearing the screen and 
scrolling more data. When unseiccted, the program continuously scrolls the data. 

Xil - exits the menu and returns to the CHANNEL DISPLAYED menu, 


Sonograph Display (while displaying) 

IMAOm’llQNii; 

Resume - resumes display of the data from where the program left off. Also, this should be chosen after displaying a 
iccord while C^opying to image tile, il this option is selected as a preference. 

Image - user can restore, .save, or modify a displayed image in a variety of formats. 

Oet position • using the mouse, the user can gel the UTM coordinates and liilliudc/longilude of any selected point on 
the record. Note tlial the record MUST BE ground registered (see main menu) for this to worL An citsy way to 
tell II' the image IS ground registered is to observe the heading Uneorrcctcd images will display u constant 
hciidiiig of 0, 






116 

Measute distance - similar to the Get position function, except two paints must be selected. The distance between the 
two points will be computed. 

Express - automatically sets the options permitting the fastest possibie viewing speed. 

Customize • aliows user to modify the display options to suit his/her viewing needs. 

Abort > terminates the display. The user will have the option to display the same Image or return to the main menu. 


Customize Options (while displaying) 

MQDlEY-EREEEREliaSi 

Bottom tracking, channel • the port, starboard, or an average of both channels may bo used to determine the height of 
the towfiih above the bottom. First time users should use thn Altitude Distribution function to determine which 
cliannel produces the most consistent flsh height. 

Display status bar - turns on or off the status bar, which contains the following Information: file name, time record 
number, speed, range, hequency, and heading, 

Edit bottomvalue, x ■ allov/s the user to specify the value which the computer assumes to be the value of the first 
bottom return. For deep water, Ihe bottomvalue should be decreased because of the increased attenuation. The 
opposite is true of especially shallow runs. User Is encouraged to use the Frequency Distribution or Altitude 
Distribution ibnetions to determine what constant produces the most consistent fish height, 

LUT recalculations skipped • for the fartesi possible viewing, this feature aborts the recalculation of lookup tables for 
slant range correction if the flsh height deviates beyond a certain value (essentially, if this is selected, the some 
LUT Is used for the whole Image, irregardless of flsh height), 

Radiometric corrections • this algorithm averages the columns and writes them to a .CTA text flic (or reads the value.s 
fVom the .CTA flic, if it exists) for the entire record. Then, at the sacrlflco of display speed, the program applies u 
radiometric averaging function to each pixel which alleviates the far range power drop off. 

Target color • switches the colors associated with strong and weak returns. 

Wait when screen full • when selected, the program will wait until a key is pressed before clearing the screen and 
scrolling more data. When unselected, Ihe program continuously scrolls tnc data. 

Xit ■ exits the menu and returns to the IMAGE OPTIONS menu. 


Digital mosaic options 


Make single mosaic • user may write port, starboard, or both channels of selected side-scan data files onto a projection. 
User must select the x and y utm coordinates of the upper Icfl hand comer of the mosaic box. The data is 
di.splaycd In their real ground locations, and digital numbers of data are radiomctrically corrected. 

Combine existing mosaics - mosaics with the same upper Icfl comer values created with Ihe previous functiou may he 
combined into a single eomprchenslvc image. 











C. SIDESCAN Borland Pascal Code 


{$F+.0+) 

unit SIDESCAN; 

{SDefine WrIteOutPut) 

Interface 

Procedure SideSoonOps; 
implementation 
use!) 

PETDcf,PETMAR.PETOvor.PETQfaph,PETMBth,Dlpstrlke,MapproJ,SlovMBin. (Prof, Outh's units) 

DrnwMaln.DEMEROS.DEMEROSJ. {Prof. Outh's units) 

Graph,CRT,DOS; (Borland Inlernaltonal units) 


type 

StdRecType ■ aiTay[0,.1799] of byte; 

SidttSoanDefauItType - record 
Datapath; PathStr; 
end; 

ProJectionProcedure » procedure(Lat.I,ong,Elev ; float; 

Sizc,Color I integer; Sym ; DrawingSymbol); 

PosItionType * record 
TimeSir ; strlngI2; 

Lot,Long: float; 
end; 

HydroSurveyPositionType *■ record 
Position I PosItionType; 

Depth : integer; 
end; 

var 

SidcSconDcfaults: SidcScanffcfauItType; 

Defaults!'lie : file of SidcScanDefauItTypc; 

DataPlIu.COutFilc: file of StdRecType; 

ImagcFilc: file; 

JunkFilc.Itidcxrilc.XYFile.RadloFilc ; text; 

StdRec: StdRecType; 

Color! able ; ColorTableType; 

Freq ; array[()..2S5| of Longint; 

AvgPrt.AvgStd ; array[0..8831 of float; 

C'olorHytc.s: array|0,.25Jl of byte; 
t)utVul : arraylO. MaxScrccnXMaxl of byte; 

ScrecnlTIT : array|()..MaxScrecnXMax| of integei; 

NomialColor, Wail Atllottom.(jPSDepthModc,UseProject,Donc.lpvcn.RcpcatRow,Copy Image,I'ilcOpcn, 
Starboard : boolean; 

ch.PortCli.DispCh.HoitomChannel: char; 

Sym ; DrawingSymbol; 

Dir: DirStr; 

Name : NameStr; 
lixt; ExtSir; 









118 


PiNolDist,SpeedIntcrval.Remuiiidcr,SumRemainder,TrueDist,SlantDist,SlantTime.Lal.Long. 
Spced.HeadinB,Ruiigc.DistFromCcnt,FishHll,FishHt2,FishHclght.OldHtl.01dHt2.DcvFishHeight; float; 
NumQrays,orfset.Max,Facior.ColSkip,iJ,x,y,couiiter.NumPixelsShnw.YSpacer,SpeedYSpaccr, 
TempMapX.TcmpMapy,Tcinp2MopX,Temp2Mapy.NumHorizCycles.NumVcrtCycles.StartPort.SiartStar, 
TransmitPuriod.ScreensDone,ColsSidcbySide.ColsDonc.XDcnection.BcBinVal,Size,Color,DcpiliLimii. 

RceXMax.LUTInc,OncOrBoth,BotVal ; integer; 

FreqUsed,StartRecord,OnRecord,ResumcMarker,NumRec,NumRccs,RowCountcr,ZcroXOffsct, 

ZeioYOtTset: Longlnl; 

HorizCycIcCuts.VcrtCycleCuts ; CyclcCutType; 

FName.DataSubDir.DataPath.CFilename: pathstr; 

ProJeclProc; ProJectionProcedure; 
xw,yw,YDesircd,XDcsired ; word; 

xutm,yutm,Finalxutm,FlnHlyutm,Final2xutni,Final2yutm,Cenlxutm.Ccntyutm,PoinlDii!l; shortfloal; 

TimeString; strlngS; 


procedure UTMInitializc; 
var 

ProJFileName ; string; 
begin 

ProjFlIcNamc SidcSeanDefaults.Datapath + 'opsurea.prj'; 

If ProJFileName *=" then exit else ReadProJeciion(ProJFilcName); 

If Projection.Pname o UTMElllpsoidal then 
MessagcToContinucXYd.l.'Not UTM projection; problems likely,'); 
end; 

{$! side*hyd.pa.sl {Prof. Outh's hydrographic survey routine} 

procedure AnalyzcRecord; 

vor 

i: integer; 
begin 

fori :=0to l7dodec(StdRec[11.128); 

TimeString lntcgcrToString(StdRec|31,2) + + 

lntegerioString(StdRec(2|.2) +-r 
lntegerToString(StdRcc(l),2); 

for i := 2 to 8 do irTimeStringli) ='' then TimcString|i)'O'; 

Speed ;= SidRce|121» 10 + StdRecjl 1] * 0.1; 

Range ;= StdRec[171 * 100 + StdRecI 16|; 

Heading := StdRcc|14| * 10(1 + StdRec(l3|; 
case round!Range) of 
25,50 : TransmItPeriod := 75; 

75 : TransmitPeriod 113; 

100 : TransmitPeriod := 150; 

150 : TrimsmitPeriod ;= 225; 

200 : TransmitPeriod 300; 

300 ; TransmitPeriod ;= 450; 

400 : I'ransmitPeriod := 600; 

(tOO : TransmitPeriod := 000; 
end; 

Movc( SldRccl 19 |.xiitm,4); 

Move(StdRee[23i,yiiim.4). 

if(StdRct|15| .tnd 6 l - 64) then Frcqllscd 500 else Frcqllscd 100; 
end; 








function ChannelNainc(Ch!char):stringl2; 


1 19 


begin 

case Ch of 

'F ; ChannelName := 'Port'; 

'S'; ChannelNiune :=* 'Starboard'; 
'B'; ChannelName := 'Both'; 
end; 
end; 


procedure FindPiahHeight(var Bottomstartunteger); 
var 

xl,x2 : integer; 

MaxVal: integer; 

begin 

RnpeatRow false; 

MaxVal60; 
xl 0; 
repeat 
inc(xl); 

until (X1 -883) or ((StdRcc[32 r- 2 • x 1 [ >= BotVal) and (StdRcc(32 + 2 * n 1J < MaxVal)); 
if xl = 883 then begin 
FishHtl i»'01dHt'l; 

RepeatRow true; 
end; 

FishHtl :» 1.0 • xl • TrnnamitPeriod / 883 • 1500 * 0.001 ♦ 0.5; 

OldHtl ;» FishHtl; 
x2 ;= 0; 
repeat 
inc(x2); 

i ntil (x2 = 883) or ((StdRec(33 + 2 • x2| >■" BolVal) and (StdRec|32 + 2 * xl] < MaxVal)); 
if x2 = 883 then begin 
Fi.shHa :=01dMl2; 

RepealRovs true; 
end; 

FishHl2 1.0 ♦ x2 * TransmitPeriod / 883 • 1500 * 0.001 • 0,5; 

OldHtZ ;= FishHl2; 
case BottomChonnel of 
'P'; begin 

FishHeight;- FishHtl; 

BnttomStort :=■ x I; 
end; 

'S' : begin 

Fislillcight ;= FishHl2; 

BottomSiart ;= x2; 
cud; 

'IV ■ begin 

Fishllciglu := 0.5 * (FishHtl + Fishllt2); 

BoltomStart := (x 1 + x2) div 2; 
end. 
end: 
end; 











120 


procedure RadiomctricCorrect; 
var 

NcwOutFile ; file of StdRecType; 

Prt,Strboard,PrtCounter,StbdCaunter; arra)'(0..883) of Longint; 
PortTempRec,StbdTcmpRcr: byte; 
ch: char; 

i,XCounter,BottomStan; integer; 

NumProc.Totalretum: Longint; 

Filename: pathstr; 

Avgretum ; real; 
x,y,xl,x2 ; word; 


begin 

reset(DataFile); 

FSplit(FKame,Dir,Name.ext); 
if FileisPrcsent(Dir + Name + '.eta') then begin 
assign(RadioFile,Dir Name + ’.eta'); 
reset(RadioFile); 
for X;» 0 to 883 do begin 
readln(RadioFile.AvgPrt(xl); 
readln(RadioFile,.\vgStd[x]); 
end; 

close(RadioFile); 

end 

else begin 

FillChar(Prt.SizeOf(Prt),0); 

FillChar(Strboard.SizeOr[Strboard),0); 

y 0 ; 

for x;" 0 to 883 do begin 

Pn(xl :-0; 

Strboard(x) 0; 

PnCounterlx] ;■» 0; 

StbdCounter[x) := 0; 
end; 

I'otalretum = 0; 

XCounter := 0, 

while (no! EOF(DataFile)) do begin 
{$!•) Rcad(DataFile,StdRec); fSI-*’) 

FindFishHeighUBottomstart); 
if IORe.«ult = 0 then begin 
goloxy(l.l); 
inc(XCounter); 

if (XCounter mod 10) = 0 then V -reenCl.l.LightRcd.lnlegeiToSlringlXCounter.S) + ' records averaged'); 
for X := BottomStart to 883 do ■ m 
inc(Prt(xl.StdRec[32 2 • x)), 
inc(l’rtCounter(x)); 
iiic(Strboard|x|.StdRec(33 + 2 • x)); 
inclSthdCounlerl^]); 

inc( Ioialrctum.((SldRccI32 -* 2 • xl + SldRcc(33 + 2 * x)) div 2)); 
end. 
end; 
end; 

for X 0 to 883 do 

if (PrtCounler|x] = 0) or (StbdC'o'jntcr(x) = 0) then begin 
AvgPrtlx) := (J; 

AvgStdlx) 0; 







end 

else begin 

AvgPrt(xl := Prt[x)/PrtCounler(xl', 

AvgStdfx]Strbaard[x]/StbdCountei[x]; 
end; 

assign(RadioFile,Dir + Name + '.eta'); 
rewrite(RadioFile); 
for X 0 to 883 do begin 
writeln(RadioFile.AvgPi1(x]); 
writeln(RadioFile,AvgStd[x]); 
end; 

clQse(RadioFile); 
end; {else) 
reset(DBtaFile); 
end; 

(SI side-gth.pas) (Prof. Quth's SIDESCAN routines) 

procedure FilterSpeed; 

const 

NumData ■» 2000; 


TempOutfile.CorrOutFile.VTOutFile; text; 

TrueVelArray.TrueHdgArray : array[l..NumData] ofshoitiloat; 

StartFirst: boolean; 

LauLong,Curdepth,xf,yr,h,SumVel,SumHdg: extended; 

Vel: float; 

j.loop.Error.Hrs.Mins.HourTot; integer; 

Time: rcol; 

TimeStr: string] 14]; 

MrStr: string|2]; 

Tstr; string; 

begin 

assignCrempOutFile.PETMARDcfaulls.VirtualDiskPath + 'Templ>ack.txt’); 
rcset{ TempOutFile); 

assignlConOutFilc.SidcScanDefaults.DataPath + 'track.txt'); 
rewrite(CorrOu:File); 

assign(VTOutFilc.PETMARDefaults.VirtualDiskPath + 'HYDVandT,txt'), 
rewrite! VTOutFile); 

SumVe! ;= 0; 

SumHdg ;= 0. 

StartFirst := faliie; 
j:=l; 

while not EOFlTcmpOutnic; do begin 
if EOLNlTempOutfile) then readln(TcnipOutfile) 
l-Lsc iiegin 

readlnd'cmpOutFile.Lat.Long.TimcSir.lieading.VcI.xf.yf.h); 
TrucVciArrayLij : = Vel; 

TrucMdi’Arraylj] Heading; 
if j = 5 then StartFirst := true; 
if'StartFirst then begin 
for loop ;= 0 to 4 do begin 
SumVcl := SumVcl + TrueVi.lArray]) - loop); 

Sumlldg := SumHdg + TruelldgArray]) - loop); 
rna; 









writeln(CorrOutFile,Ut:7:4.Long;9:4,' ’,TiineSlr.(SumHdg/5):5:0,(SumVel/5):8:l.xf:12:2,yf;12;2,h:8:5); 
Val(Copy(TimeStr,3,2),Hrs.error); 

Val(Copy(TimeStr,6,2).Mins,crror); 

TStr Copy(TimcStr,9,5); 

StripBlanks(TStr); 

Val(Tstr,Time,error); 

TimeHrs + Mins / 60 + Time / 3600; 

writeln(VTOutFile.Time:10;6,(SumVel/5):6:l.xf;12:2.yf;12:2.(SumHdg/5);5;0); 

if (i mod 10) ■■ 0 then Screen(l,I3,LightRed,lntegerToString(j,3) + ' navigation data points filtered'); 

SumVel0; 

SumHdg0; 
end; 
inc(i); 
end; 
end; 

close(CorrOutFile); 

close(VTOutFile); 

SelectGraphicsMode; 

end; 


procedure UTMInterpolation; 
var 

TempOutFile.OutFile ; file of StdRecType; 
x.y ; array(0..26501 of shortfloat; 
loop.TempRange: integer; 

begin 

assign(COutFile.CFIiename); 

reset(COutnle); 

OnRecord 0; 

BotVal25; 

while (not EOF(COutFilc)) do begin 

if (OnRecord mod 50)» 0 then Scrcen(l,l,LightRed.lntegerTo5tring(OnRecord.3) +' read imo array'); 

{SI-} Read(COutFile,StdRec); {Sl-i-} 

if (Key Pressed and (ReadKey - #27)) then break; 

Move(StdRec[ 19),x|OnRecordl.4); 

Movc(StdRcc(23],y[OnRecordj.4); 
inc(OnRecord); 
if OnRecord 10 then begin 
for i := 16 10 17 do dec(SldRectil,128); 

TempRange StdRcc[17] • 100 + StdRec|16); 
end; 
end; 

close(COutFile); 
loop 1 “ 0; 

case TempRange of 

100 : while loop <»= fNumRec - 7) do begin 

if(xlloop)=x|loop+ll) and (x[loon+ll«x(loop+21)Bnd 
(x[loop+21*xllnop+31) and (xlloop+31=x|ioop+41) and 
(xlloop+4]=x|loop>51) and (x(loop+5i--x|loop+6i) then begin 
xlloop+i] := x[loop+l| -*■ (xlloop+7j - x|loop+6))/7; 
x[loop+2i := x(loop+2| + 2 * (x|loop+7J - xlloop+6))/7; 
xiloop+3] := xlloop+31 + 3 * (x|loop+7| - xlloop+61)/7; 
xiloop+41 := x|loop+41 + 4 * (xjloop+71 - x|loop+6l)/7, 
x(loop+5j xlloop+S) + 5 * (xlloop+7i - xjloop+hj)/?; 
x|loop+6i := xiloop+6] ^ b* (xlloopt7| - x|loop+61)/7. 














y(loop+l] :■ y[loop+l] + (y[loop+71 - y[loop+6JV7; 
y[loop+2] ;«= yiloop+2] + 2* (y(loop+71 -y(loop+6])/7; 
y[loop+3j y{loop+3] + 3 ♦ (y(loop+7i - y(loop't-6])/7; 
yiloop+4];« y[loop+4] + 4 ♦ (y(loop+7i - y[loop+6j)/7; 
ytloop+5] :=» ytloop+5] + 5 • (y[loop+7i - yiloop+6))/7, 
yiloop+61 yiloop+61 6 * (y(loop+7i - y[loop+6J)/7; 
inc(loop,7); 
end 

else if (x[loop]»»x[loop+l]) and (x[loop+l]"xtloop+21) and 
{xtloop+2]"X[loop+3i) and (x[loop+3]"x[loop44J)and 
(x[laop+41"Ttiloop+5]) then begin 
x(loop+llxtloop+l) + (x(loop+6] - x(loop4-S])/6; 
xiloop+21xIloop+2i + 2 * (x(loop+6] - x[loop+31)/6; 
xtioop+3] :■ x[loop+3j + 3 * (x[ioop+6] • xjloop+sjyb; 
xfloop+4jx{loop+4i + 4 * (x[loop+6j - x(loop+5i)/6; 
xjloop+S] :■ x[loop+S] + 5 * (x[loop+61 - xfloop+Siyb; 
y(ioop+li;» y[loop+lj + (y(ioop+6] - y[ioop+5])/6; 
y[loop42] :■ y(loop+2] + 2* (y[loop+61 -ylloopi-5)y5; 
yiloop+3i!- yiloop+3] + 3 * (y[loop+6] - y(loop+5iy6; 
y(loop+4jy(loop+4j + 4 • (y[loop+6j - yfloop+Siye; 
y[iciop+5] :* y[ioop+51 + 5 * (y[loop+6i - yiloop+sjyb; 
inc(loop.6); 
end 

else inc(loop); 

if (loop mod SO)" 0 then Screen(l,lS,LlghtRed,IntegerToStrlng(loop,3) + ' interpolated 
end; 

200 : while loop <~ (NumRec • 4) do begin 

if (x[ioop]'-x(ioop+11) and (x[loop+1 l-x(loop+2]) and 
(xlloop+2|*x(loop+31)then begin 
x[loop+ljx[ioop+l] + (x[loop+41 • xtloop+31)/4; 
x(loop+2j If' x(loop+2i •! 2 • (xtloop+41 • x(loop+3)y4; 
x(loop4-3j;» x[loop+31 + 3 * (x(ioop+41 - x[loop+3)W; 
y(loop+l]y[loop+ii + (ytloop+4] • y[ioop+3])/4, 
yiloop+2iy[loop+2j + 2 * (y(loop+41 • y[loop4-3]y4; 
y(loop+3iy[ioop+3j + 3 * (y(loop+4i • yjloop+3))/4; 
inctloop,3); 
end 

else if(x[loop]“x[loop+ll)and(x[loop+lj«x|loop+2));ben begin 
x[loop+l);« x|loop+l] + (x|loop+3] • x(loop+2|y3; 
x(loop+2]x(loop+2] + 2 • (x(loop+3] ■ x[loop+2iy3; 
y|loop^•l ly|loop+li + (y(loop+31 - ylloop+21)/3: 
yiloop+21y|lnop+2] -i 2 * (y[ioop+31 - y|loop+2iy3; 
inc(loop,2): 
end 

else inc(loop): 

if tloop mod 50) - 0 then Screen! 1 15.I,ightRed.lntegerToSiring(loop,3) + ' interpolated 
end; 

end: jeaxe) 

loop 

reiici(COuttllc); 

while (not UOI'(COutVilc)) do begin 

if (loop mod 50) = 0 then Screen! 1.30,LightKed.lnlegcrToString(loop.3) ' records rcpreces,scd 
seek(C'OutFile,loop); 

{$!-) Read(COutFilc.StdRcc); |$1+) 
seek(COutFilc.loop); 

Movc(xjloop),StdRec| 19),4); 

Movc(y| loop).StdRcci23 j,4); 
write! COutl'ilc.Stdkcc); 












124 


if (KeyPressed and (ReadKey Ull)) then break; 
inc(loop): 
end; 

close(COutnie]; 

end; 


procedure EditFile; 

label 

Bored; 

const 

BufferSize ~ 256; 
type 

PosArrayTypc - array[ 1 ..BufferSl/.'l ('f PositlonType; 

CurPosAnayType“array(l..Bufrc' ^ ofHydroSurveyPositionType; 

var 

PFlle : file of HydroSurN'eyPosltionType; 

TempOutFile : file of StdRccType; 

TrackFile; Hie; 

VTOutFlle.TcstOutFlleJextOutFile; text; 

PosArray; ''PosArrayType; 

CurPosArray : ^urPosArrayType; 

CurPos: HydroSurveyPosItlonType; 

CurHydroPos; HydroSurveyPosltion I vpe; 

LastTime.LastXF.LaatYF ; array(1,.2) of float, 

Flr!t,Depth!Box,RecordLoGBtion,OK,OK2,ShowPoims,ConncctPoints,Dnne,WayPolntPlle,ValldReBding: boolean; 
EditCh,ch,ch2: char; 

PointSym: DrawingSyinbol; 

MinDepth.MaxDepth.xf 1 .yfl .xO,yf2.h,k.Headingl.HeBdlng2.HYDTIme 1 .HYDVel 1 .HYDTIme2.H YDVcl2. 
HYDVel,EGQTime.Elev,La!ttLBt,LutLong,Di9t,Time,Vel,xf,yf: float; 

FchoTraeComPort.XComer,YComer,TopDepthLimlt,PointColor.XCur,l,Sklp.HourOffsct,MlnuteOfr5ei, 
SecondOlfsel,BottomStrength.NumRcad,Tenths.Tens.LlncStyle.LineThlck.LineColor.SymSize.ErTnr,SwathWidth. 
SwathColor.xO.yO.xl.y l,Timelnlerval.Hr,Minj ■. Integer; 

NumRcudings.NumProc: Longint; 

FllcNumc.DataPath,HYDDatBPath,nataI)irectory,DatBSubDir,MDpDir.WayPolritNamc ; PathStr; 

Image : pointer; 

TimeStr; stringlU); 

Ext: string}; 

ProjFilcNnmc; string; 

begin 

HourOtTset;« 17; 

MinuteOlfset0; 

SccondOrfRCt := 0; 

Numt’roe 0; 

DatapathSidcScunDcfaults.DutaPath; 
i := 2; 

SelcctOraphicsMndc; 

Rcadlntegcrl)elanltlnC)raphicsBox(5,5,'Hours added/subtracted from EGO HouKiflsct); 
ReadliitcgerDcCaultlnOraphicsBoxiS,5,'Minutes added/subiractcd from FOG ', MlnuteOITscl); 
RcudlntcgcrI)efaultlnGruphicsBox(5.5.'Scconds ttddcd/subiractcd from EfiG SceondOITsct); 

HVDDutal’ath SidcScanDcfaults.Dati'Path; 

OctFilcFroniDirectory('Hydrographic track','* ifYD'.llYDDataPath.FNamc); 
assignd’Filc.FNiunc); 











125 


reset(PFile); 

CFileName ;■= SideScanDefaults.DataPath; 

GetFileNameDenixK 1,1,'edited record'.'EOQ',CFileName); 
assign(TempOutFile,PETMARDefaulls,VlrtualDiskPath + 'TempOulFile,EGO'); 
rewrite{TempOutFile); 
rcset(DauFile); 

while not EOF(DataFile) do begin 
read(DataFile,StdRec); 
inc(NumProc); 

if(NumProc mod 10) - 0 then Sereen(l.l.LightRed.lnlcgerToStriiig(NumProc,3) +' records with times changed'); 
for I1 to 3 do dec(StdRec[i],l38); 

StdRec[3]StdRectS] + HourOITset; 

StdReepjStdRec[2j + MinuteOffset; 

StdRec[l] I* StdRecjl] + SecondOfTset; 
while (StdRec( 1 ]) >“ 60 do begin 
StdRec[2]StdRec[2] + I; 

StdRecd]:- StdRecll] • 60; 
end; 

while (StdRec[2]) >- 60 do begin 
StdRec[3];- StdReo|3] + 1; 

StdRec[2]StdKac(21 • 60; 
end; 

fori :<• I to3 do inc(StdRec(i],128); 
write(TempOutflle,StdRec); 
end; 

close(TempOutFile); 

DepthLimil ;“45; 

DataSubDir SideScanDefaults.DataPath; 

MapDIr "; 

UTMlnitialize; 

{SlfDefWriteOulPut) 

assignd'extOutFile.PETMARDefault.sViftualDiskPath + 'TcmpTrack.txt'); 
rewrite(TextOutFilc); 

{SEndlf) 

PETOvcr.AllowChungeslnFIleFromDlrectory true; 

MinDepth 9999; 

MaxDcpth 1 “ -9999; 

Firsttrue; 
i ;* I; 
j:-0; 

while not EOF(PFile) do begin 
reud(PFilc,(JurF’os); 

with CurPos.Pohition do if abstl.ut) > 0.00001 then begin 
\'al(Copy(TimeStr. 1,2).Hr.error); 

Val(Copy(TimeStr,4.2).Min.error); 
iStr ;= Copy(TimcStr.7.5); 

SiripI)lanks(TSlr); 

Val(Tstr,Time,error); 

'l ime := Ilf + Min / 60 + Time / 3600; 

ValidRcading true; 

RawProjectI 1.0* Eat. 1,0* Long,xf.yf); 

(ielMapScalcFactort Lal/DegToRad. I .ong/Dcg’roRad.li.k); 
if First then First : = false 
else begin 

Dist := .sqrt(sqr((xf-l a.slXF|l |)0i) + sqr((yf-LB,stYF|ll)/k)); 
if (Dist > 0.001) and (abs(Lnt) > 0,001) and 
(Dist < 25) then begin 

lleading()fl,inc((xf-La.stXF| 1 l)/h,(yf-LastYF| I |)/k.l leading); 



Vcl(0.62/1,15*0.001 * Dist) / (Time ■ LastTimell]); 

writeln(TextOutFile,Lat/DegToRad;9;6,Long/DegToRacl:12;6.' ’,TimeStr,RealToString(Heading.5.0)+ 
RealToStririg(Vel,8.1 ),xf; 12;2.yf: 12;2.h;8:5); 

if (j mod 10)» 0 then Screen(l,l,LightRed,IntegerToStringO,3) + ' navigation data points read'): 
inc(j); 
end; 
end: 

LastxHl] 

Lastynn ‘■•yf: 

LastTimell] :-Time; 
end; 
inc(i); 
end; 

Bored:; 

i:-2; 

FName 

close(TextOutFile); 

FilterSpeed; 

asslgn(COutFile,CFileName); 

rewrlte(COutFlle): 

Bsslgn(TempOutflle,PETMARDefaults.VirtualDiskPBth + 'TempOutFile.EOa'); 
reset(TempOutFile); 

assign(VTOutFlle,PETMARDefauUs,VirtualDiskPath + 'HYDVandT.txt'); 
reset(VTOutFlle); 

NumProc 0; 

asslgn(JunkFile,PETMAPDefaults.VirtualDlskPath + 'Junk.txt'); 
rewrite(JunkFlle); 

while not EOF(TempOutFile) do begin 
read(TempOutFili StdRec); 

IncfNumProc); 

lf(NumProc mod 10) ■ 0 then Screen(l,l,LlghtRed,lntegerToStrlngfNumProc,3) + 

' records rewritten with nav data'); 
for i:» n to 12 do dec(StdRec[il,l28); 
for i 1 to 3 do dec(StdRec(i],128); 

If NumProc “ 1 then begin 

readln( VTOutFilc.HYDTIme 1 .HYDVel I .xfl .yfl .Heading 1); 
rcadln(VTOutFile.HYDTime2.HYDVel2.xf2.yf2.Headlng2); 
end; 

EGGTime StdRec[3| + StdRec[2]/60 + StdRecf 11/3600; (hours) 
while ((EGOTiinc < HYDTiniel)or (EOGTimc > HYDTime2)) and 
(not EOF(VTOutFile)) do begin 
HYDTimel HYDTime2; 

HYDVel 1 HYDVcl2; 
xfl :“Xl2; 
yfl ;-y(2; 

Heading! Heading2; 

rcadln(VTOutFlle.HYDTimc2,HYDVel?..xl7,yn.Hcading2); 

end; 

xfxfl + ((EGGTime - HYDTimel)/(HYDTime2 - HYDTimel)) * (xf2 ■ xfl); 
yfyfl + ((EGGTime ■ HYDTimel)/(HYDTime2 - HYDTimel)) * (yf2 - yfl); 

HYDVel:« HYDVell + ((EGGTime - HYDTimel)/(HYDTIme2 • HYDTimel)) * (HYDVcl2 ■ HYDVell); 
if HYDVel >“ 10.0 then begin 
Tenths := round(HYDVel * 10 - 100); 

Tens := I; 
end 

else begin 

Tenths := round(llYDVel * 10); 
l ens := 0; 











127 


end; 

xutm ;« xf; 
yutmyf; 

Move(xutm,StdRec[ 19],4); 

Move(yutm,StdRec|23j,4); 

writeln(JunkFile,' HTs; '.HYDTIme 1:8:6,HYDTimc2;l 1:6,' ET: '.EGGTime:8'6. 

' xf; '.xf 12:2.'yf '.yf 12:2,' Vel: '.HYDVel;4:l); 

StdRec[l 1]Tenths; 

StdRec[i2] ;-Tens; 
for i:« 1 to 3 do inc(StdRec[i],128); 
for 1 :> 11 to 12 do inc(StdRec[il,128); 
for i :■* 13 to 14 do dec(StdKec[i],128); 

StdRec[14]round(Headin82) div 100; 

StdReullsj:- round(Headmg2)-(StdRec[14] * 100); 
for i:- 13 to 14 do inc(StdRec[i],128): 
wrlte(COutFile,StdRec); 
end; 

close(COutFlle); 

closc(VTOutFile); 

closc(TempOulFlle); 

closc(JunkFile); 

SelectOraphIcsMode; 

UTMlnterpolation; 

end; 

{$1 sidc-msc.pos) {Mldn Linder's error checking routines and the demonstration slide show procedure) 

procedure DrawBox; 

const 

MosalcSIze- 1800; 
begin 

SetColor(LlghtRed); 

MapProJ,AdjustCoord(ZeroXOn'5et,ZeroYOffset.TempMapX,TempMapY); 

MoveTo(TempMapX,'rempMBpY); 

MapProJ,AdJustCoord(ZeroXOfr3et,(ZeroYOffset-MosaicSlzc),Temp2VtBpX.Temp2MBpY); 

LlncTo(Tcmp2MapX,Tomp2MapY); 

MapProj,AdjuslCoord(ZcroXOfrset,(ZeroYOffset-MosaicSlze),Temp2MBpX,Tcmp2MBpY); 

LlncTo{Tcmp2MapX,Tcmp2MapY); 

MBpProj,AdjuslCoord((ZcroXOffset+MosalcSlze),(ZeroYOffset-Mo5alcSI/.c).TcmpMapX.TcmpMttpY); 

LlncTo(TcmpMapX,TernpMapY); 

MapProJ,AdyustCoord((ZeroXOITset+MosulcSlze).ZcroYOfrsct.Temp2MapX.Tcmp2MapY); 

LlncTo(Temp2MapX,Tcmp2MapY); 

MapProJ,AdjuslCoord(ZeroXOfrscl,ZeroYon'sel,TempMapX.TcmpMapY); 

LlncTo(TempMupX,TcnipMapY); 

end: 


procedure Mosaic: 
const 

BeginVal = 0; 

Mo.suicSlzc - 1800: 

type 

MosuicRowType = urruy|0..Mo.saicSizcl ol byte; 
Hcgistercdinuigc Type = record 



\cp,ycp ; array|1..4] of ip;-' ,-f 
!' gName; PathStr: 

tdt 


128 


var 

MosalcRow; ''MosaicRowType; 

NewMosaicPile,MosBicFile: file of MosaicRowType; 

ImageRows: aiTayro.,>'JosalcSize] of''MosaicRowType; 

CheckFile.XYFIle.OidXYFIle.lndexFile: text; 

Dir,Dlr2: DlrStr; 

Name.Name2; NameStr; 

Exl,Ext2; ExtStr; 

Done: boolean; 

PortStbd.MosCh.ChnlCh: char; 
xgrid,yti:rld,Min,Dist,MinDi8t.z.Temphead; float; 

X0,Y0,xtemp,Close$t,HdgDesired,PoaslBlgHdg,Poss2BlgHdg,StBrtVal,BothLoop,LoopMax,BottontStart, 
ij; Integer; 

ImageXFlnal.lniageYFinal.Xcheck.Ycheck; longint; 

ProJFIIeName.MapDir,FileName: pathstr; 

Fileinfo; SearchRec; 

Dateline; string; 

begin 

ZeroXOfTset376800; 

ZeroYOffset4312000; 
repeat 

I 1; 

MenuStr :•« '''Optlons\~Make single mosalc\~Comhinc existing mosalcs\~Xlt'; 

MenuHelpFileName'ss*mosai.hlp'; 

MakeMenu(MenuStr,S,S,MosCh,i); 
case MosCh of 
'M'; begin 

ReBdLonglntegerDofaultlnOraphicsBox(S,5,'X utm value of upper lefl comer '.ZeroXOfTset); 
ReadLonglntcgerDefaultlnaraphlusBox(5,5,'Y utm value of upper lefl comer '.ZeroYOffset); 
Filename SldeScanDefaulis.Datapath; 

OciFileNomeDerexU 1.1. 'Mosaic file'.'bnr.FlleNamc); 

FSplltfFilcName.DIr.Name.ext); 
new(Mo8aicRow); 
assIgiifMosaicFile,Filename); 

FillChar(MosalcRow', slzeoflMosaicRow''),0); 

UTMlnitlallzc; 

DrawBox; 

HdgDesired 0; 

for y ;■ 0 to MoaalcSIze do begin 

if ((y mod 50) - 0) then Screen(30.-I.LightRed.lntcgcrToString(y,4) + " + McmAvallString); 
C)etMem(lmagcRows|y],succ(MasalcSlze)); 

ImageRowslyl''MosaicRow''; 
end {for y}; 
repeal 
repeat 
1 ;•= 3; 

MenuStr'''Cl.annel displaycd\~Port\~Sturboard\~Both'; 

MakeMcnut MenuStr,5.5.ChnlCh,i); 
until ChnlCh in rP'.'S'.'B']; 

LoopMox := 1; 
ease ChnlCh of 
'1"; StartVal 33; 

'S': StartVal :•= 3 i; 





'B'; l.oopMi« 2; 
end; 

Newimage; 

RadiometricCorrect; 

OnRecord0; 

for BothLoop 1 to LoopMax do begin 
if BothLoop •• 2 then reset(DataPile); 
while (not EOF(DataFile)) do begin 
Inc(OnRecord); 

if (OnRecord mod 10) “O then Screen(l,l,LightRed,IntegerToString(OnRecord,3)-f 
' complete ')l 
{$1-} Read(l)ataPile,StdRec); ($1+) 
if (KeyPressed and (ReadKey - #21)) then break; 
if lOResult ■> 0 then begin 
AnalyzeRecord; 

FindFiihHeight(BottomStart); 
while BottomStart <> 883 do begin 

SlanlDist1.0 ♦ BottomStan ♦ TranimitPerlod/ 883 • 1500 * 0,001 * 0,5; 
if sqr(SlantDist) >» sqr(PlshHelf|ht) then 
DistPromCentsqrt(sqr(SlantDiat)> 8qr(rishHeight)) 
else DistPromCent 0; 
case ClmlCh of 
'P';begin 

Flnalxutm ;>« xutm>DlatPromCent*CosDeg(Heading); 

Flnalyutmyutm+DlstFromCcnt*SlnDeB(Headlng); 
end; 

'S'lbegin 

Flnalxutm xutm+DistFromCent^CosDegCHeuding); 

Flnalyutm yutm-DislPromCent*SinDeg(Headlng); 
end; 

'B'lcase BothLoop of 
libegin 

StartVal33; 

Flnalxutm xutm+DistFromCent*Co8Ueg(Heading); 

Flnalyutm:- yutm>Di8tPromCent*SinDeg(Hending); 
end; 

2:bcgin 

StartVal 32; 

Finalxotm;- xulm-DistFromCent*CosI)og(Headlng); 

Pinalyutm:*= yutm+Dl8tFromCcnt*SinDcg(Hcudlng); 
end; 
end; 
end; 

Flnalxutm Flnalxutm - 25*SinDeg(Hcudlng); 

Flnalyutm Flnalyutm • 25*CosDeg(Hcudlng); 

ImagcXFinalround(Finalxutm - ZeroXOffsot); 

ImagcYFlnal roundfZeroYOffsct ■ Flnalyutm); 
if (ImagcXI'inal >- 0) and (ImagcXFinal <- MosuicSIze) and 
(ImagcYFlnal >- 0) and (ImageYFInal <- MosalcSizc) then begin 
xtemp :*= StartVal + 2 * BottomStart; 
if (AvgSid|Bottoml',tartl > 0) then 

StdRcc|xtcinp)round(StdRcc|xtcmp] * 32 / AvgStd|BottomStart)); 
if StdRce(xtcmp| <- 64 then begin 

If ((OnRecord mod 5) ” 0) and ((BottomStart mod 50) ■" 0) then begin 
AdjustCoord(Finulxuim,Fiiiolyutm.XO,YO); 
pulplxcl(X(),Y0,rcd); 
end; 

lmageRows(lmagcYFinBll''[lmagcXI'irml| := StdRcc|xlempl; 




130 


end; 

end; 

inc(BottomStart.4); 

end; 

end; 

end; 

close(DBtaflle); 

FlleOpenfalse 
OnRecord 0; 
end; (for) 

until AnswerIsYesXY( 1 .S.'Done'); 
rewrlte(MosHlcFlle); 
for i ;•« 0 to MosalcSlze do betii 
write(MosBicFile,ImageRowsi i, 

if ((i mod SO)« 0) then Screen(3U,*l,LightRed,IntegerToStrlng{i,4) 4-' rows written to file'); 
end; 

close(MosalcFile); 
assign(XYFile,Dir + Name + ',XY'); 
rewrite(XYFile); 

writeln(XYFile,BeglnVal: 10.BeginVal; lO.ZeroXOffset; I O.ZeroYOfTset: 10); 
wrlteln(XYFlle,MosalcSlze: 10.BegltiVal: lO.(ZeroXOffset + MosalcSlze); 10.ZeroYOffset: 10); 
wrlteln(XYFIle,MosalcSlzc: 10,MosalcSlze: 10,(ZeroXOfrset + MosalcSlze): 10, 

(ZeroYOff)[et > MosalcSlze); 10); 

wrltRln(XYFile.BeginVal;lO.MosnlcSize: lO.ZeroXOffset; 10,(ZeroYOffset > MosalcSlze):10); 
close(XYFile); 
end; 

'C; begin 

Filename:» SideScnnDefaults.Datapath; 

OetFlleNameDcfExtd,!,'Combined mosaic flleVbnl'.FlleNamc); 

FSpllt(FlleName,Dir,Name,ext); 

new(M(JsalcRow); 

assIsnCNewMosaicFlle.Fllename); 

FillCharlMosaicRow'', slzoof(MosalcRow''),0); 
for y ;■ 0 to MosalcSlze do begin 

if ((y mod 50) “ 0) then Screen(30,*l,LightRed,IntegerToString(y,4) + " + MemAvailString); 
GetMoml lmugeRows|y j,succ( MosalcSlze)); 
lmagcRows(y|'':» MosaicRow'’; 
end (for y}; 
repeat 

DataSubDIr :>» SIdeScanDcfu . Datapath; 

GetFlleFromDirrctoryCKxistiiig mosaic','*.BN r,DatBSubDlr,FNBnie); 
if FMamc -" then halt; 

FSpllt(FNamo,Dlr2,Namc2,ext2); 
assign(MosaicFllc,FNume); 
rcset(Mo.salcFlle); 
for 1 :>« 0 to MosalcSlze do begin 
read(MosBicl'ilc.mosBicRow''t: 
for j:» 0 to Mo.salcSize do 

if mosalcrow''!)] > 0 then iiiiugcRow:i|l|''[ij r- mosalcrow''U|; 
if ((1 mod 50)« 0) then Scrccn(30.-l.l.ightRcd, 
lntcgcrToString(l,4) + ' rows read from file'); 
end; 

close(MosuicFilc); 
until AnswcrlsYcsXY( 1,5 ,'Doik 
rcwrltc(NcwMo.sBicFilc); 
for 1 0 to MosalcSlze do begin 

writc(NcwMosnicFl!c,lmugeRows|i)'); 
if ((1 mod 50) 0) then Screcn(3().’l,LigluRed, 







lntegerToString(i,4) +' rows written to file’); 
end; 

closeCNewMosaicF lie); 
assign(XYFile,Dir + Name + '.XY'); 
rcwritc(XYFile); 

assign(OldXYFilc.Dir2 + Name2 + ’.XY'); 
reset(OldXYFile); 
for i1 to 4 do begin 
readln(OldXYFilc.Dataline); 
writeln(XYFile,Dateline); 
end; 

close(XYFile): 

closoiOldXYFile); 

end; 

end; 

until MosCh In I'M'.'C.'X'l; 
ifMosCh in ['C’.'M’l then begin 
assigti(lndexFile,Dir + Name + '.idx'); 
rewrite(lndexFile); 

writcln(lndexFile,’EGO side scan sonar'); 
writeln()ndexFile,' r.succ(MosaicSlze):8,’ l’.succ(MosalcSize);8); 
wrltelnOndexFile,’!’); 
wrlteln(lndexFile.’SONAR'): 
writeln(lndexFile,Filename); 
close(lndexFile); 
end; 

ifMosCho'X' then 
for y 0 to MosaicSize do begin 

if ((y mod 50)" 0) then Screen(30,*I,LlghtRed,lntegerToString(y,4) +'' + MemAvailString); 

FrccMemflmageRows[y].succ(MosalcSlzo)); 
end {for y}; 
end; 


procedure VerltySideScanDcfaults; 
begin 

SldeScanDefaults.DntuPnth "; 
if FilelsPrcscnt('SidcScan.DEF') then 
begin 

Bsslgn(DefaultsFilc,’SldcScan.DEF'); 

reset(DcfaultsFile); 

rcadfDcfaultsFile.SidcScanDcfaults); 

closefDcfaultsFilc); 

end 

else 

begin 

CictDOSPathCsIde scan datu'.SIdcScanDcl'aults.DataPath); 
asslgnf Uef'aultsFlle.'SIdcSctin.DEF'); 
rewrlte(Dcfaultsl'llc); 
write! DcfttuUsI'lle.SIdcScanDel'auUs); 
close! DcruulisFllc); 
end; 
end; 


procedure SlunlRngCnrrect; 




132 


i: integer; 
begin 

for i0 to RecXMax do begin 

TmeDist(MumRecs * OneOrBoth) * i * Range / ScreenXMax; 
SlantDistsqrt(sqr(TrueDist) + sqr^FishHeight)); 

SluntTime :» 2 * SlantDist /1.3; 

LUTlnc 2 * round(SlantTimen'rHnsmitPeriod * 883): 
if Invert then begin 
StartPort :■ 33; 

StartStar :*> 32; 
end 

else begin 
StartPort :■» 32; 

StartStar33; 
end; 

case PortCh of 

•P'; ScreenLUT[RecXMax-i]StartPort + LUTlnc; 

'S'; ScreenLUT(l]StartStar + LUTlnc; 

'B': begin 

ScreenLUT[RecXMax ■ i]StartPort + LUTlnc; 
SoreenLUT(aucc{RecXMax) + i] StartStarLUTlnc; 
end; 
end; 
end; 
end; 


procedure AspectRatloCorrect; 
var 

X: integer; 
begin 

counter0; 

Specdlnterval(Speed * 0.508 * 0.001 * Traii.smitPeriod); 

PixelDiiit ;•=■ ((NumRcc,s * OneOrBoth) • Range / ScreenXMax); 

NumPixelsShow := roundtSpeedInterval/PixelDist), 

Remainder :• Spccdlnicrval/I'ixclDist - NumPixelsShow; 

SumRemaindcr := SumRcmninder + Remainder; 

repeat 

if (NumPixelsShow >= 1.00) or (not(RepcatRow)) then begin 
wrlteln(JunkFile,(y + SrreensDone * ScreenYMax)); 
writcln(JunkFilc.OnRecord); 

Cor X := 0 to (ScreenXMax div NumRecs) do 
PutPixel((x + XDencction),y,ColorBytes(StdRcclScrcenLUTlx]l)); 
if Copylmagc then begin 
for X ;= ScreenXMax downto 0 do 
OutVaI[ScrcenXMax>x| :•= StdRec[ScreenLUT|x]]; 
BlockWritcdmagcFil itVal.l); 
inc(RowCounter); 
end. 
end; 

if SumRemaindcr <* - I then SumRemaindcr := SumRemaindcr + 1,00 
else if (NumPixelsShow 1.00) or (not(RepculRow)) then 
if Invert then inc(y) 








inc(Cuunter); 

if ((y = 10) and not Invert) or ((y >» ScreenYMiw) and Invert) then begin 
inc(ScreensDone); 

Counter := NumPixelsShow; 
if (ColsSidebySidc > 1) then begin 
inc(ColsDone); 

if ColsDone ” ColsSidebySide then begin 
PressKeyContinues: 

SelectOraphicsMode: 

ColsDune :■ 0; 
end: 
end 

else if WaitAtBottom then begin 
PETMARln:iageOption(true,DefaultPrint); 

SelectOraphicsMode; 

end; 

if Invert then y 0 else y Screen YMax; 
end; 

if SuinRemainder I then begin 
SumKemainder SumRemainder • 1.00; 
inc(NumPixelsShow); 
end; 

until (counter «■ NumPixelsShow) or (NumPixelsShow < 1); 
end; 


procedure GetPosition; 


xO,y0,xI,yl.OldY,OldRec,DistLoop,Points; integer; 
begin 

close(Junkrile); 

if Projection,Pname o UTMEllipsoidal then 
MessageToContinucXYd.l.'Not IJTM projection: problems likely.'); 
xw ScrccnXMax div 2; 
yw := ScreenYMax div 2; 

Points := 1; 

if ch“'M' then Points := 2; 

for DistLoop 1 to Points do begin 

GctXYLocation(xw,yw.O,0,ScrecnXMux,ScrccnYMax,Done,tnic,truc,DummyDi.splayCursorl.ocution); 
case UistLoop oi 
1: begin 
xO := xw; 
yO := yw; 
end; 

2: begin 
xl := xw; 
yl :=yw; 
end; 
end; 

XDcsired ;= xw; 
case PonCh of 

'H': Di.sil'romCcnt :=■ abs(RccXMax - XDesired) * Range ' ReeXMox; 

'S'. Di.stl'romCcnt := XDcsired * Range / ReeXMax; 

'P'; DistFromCent = (ScrccnXMax • XDesired) * Range / ReeXMax; 
end; 

YDcsired yw + ScreensDone • ScreenYMax; 


134 


assign(Junkl-ile,PETMARDefaults.VirtualDiskPath + 'YandRec.txt’); 

reset(JunkFiie); 

repeat 

readin(JunkFile,OldY); 
ruidln(JunkFilc,0!dRec); 
until (OldY •= YDesired) or EOF(lunkFiie); 
closdJunkFile); 

if OldRcc < NumRec then scek(DataFilc,OldRec) 

else seek(DataPile,pred(NumRec)); 

read(DataFile,S:dRec); 

for i0 to 17 do dec(StdRsc[i],12S); 

HeadingStdRecJU] * 100 + StdRec[13]; 

Move(StdRec[ 19],Centxutin,4); 

Move<StdReci23],Cent>utm,4); 
if DistLoop * 1 then begin 

if ((xw < RecXMax) and (PohCh - 'B') and (not Invert)) or (PoilCh - ’P’) or 
((xw > RecXMax) and Invert and (PortCh 'B')) then begin 
Finalxutm;» Centxutm-DistFromCent*Cosl)eg{Heading); 

FinalyutmCentyutm+DistFromCent*SinDeg(Heading); 
end 

else begin 

Finatxutm :■ Centxutm+DistFromCent*CosDeg(Hcading); 

Finalyutm Centyutm-DistFromCent*SinDeg(Heading); 
end; 

Finalxutm Finalxutm - 2S*SlnDeg(Heading); 

Finalyutm .= Finalyutm • 25*CosDeg(Heading); 
lnverseProJcct(finalxutm,tinalyutm,Lat,Long); 

MessagetoCominueXYd.lS.'xutm;' + RcalToString(Finalxutn.8.2) + ’m' + 
'yutm:'+ RealToString(Finalyutm,8,2) +'m\ ^ 
LalLonslbStnng(lat/'degtorad.long/degtorad,decmlnutes) + Y); 
end 

else begin 

if ((xw < R xXMax) and (PortCh - 'B') and (not Invert)) or (PortCh - 'P') or 
((xw > RecXMax) and Invert and (PortCh-'B')) then begin 
Final2xutm := Centxutm-DistFromCent*CosDeg(HeBding); 

Finul2yutrn .= Cen*yutm+DistFioniCent*SinDeg(Heading); 
end 

else begin 

Final2xutm :■= Centxutm+DistFromCent*CosDeg(Heading); 

Final2yutm := Centyutm-D!StFromCent*SinDcg(HeBding), 
end; 

Final2xutm :>= Final2xutm - 25*SinDeg(Heading); 

Final2ymm := Final2yutni • 25*CosDeg(Heading); 
setcolor(rcd); 

Imc(x0,y0.xl.yl); 

lnvcrscProject(f.nal2xutm.final2yutm,Lat,Long); 

MessagcloConlinueXY(l,13>.utm: ’ + KealToString(Final2xutm,8.2) + 'm' + 

' yu‘m;' + RealToString(Final2yutm,8,2) + 'mV + 
LatLongToSiringdat/degtoradJong/dcglorad.decminutcs) + ’V); 

PointDist sqrt(sqr(Finalxutm-Final2xutm) + sqr(Finalyutm-Fin8l2yuim)); 
McssagcToContinueXY(l,15.‘Distance = ' + RealToString(PointDist.8.2) + 'mV); 
end; 
end, 

appcnd(JunkFilc); 

scek(DataFilc.OnRecord); 

end; 






procedure Mid elDXandXYFIIes; 


w 

Dir: Dirstr; 

Name ; Namostr; 

Ext: Extstr; 
i: integer; 

begin 

FSplit(FName,Dir,Name,ext); 
assign(lndexFile.Dii' + Name + ’.idx'); 
rcwrite(lndexFile); 

writeln(IndexFile,'EGG side scan sonar'); 

writeln(IndexFile,' l',succ(ScreeaXMax);8,' r,RowCounter:8); 

writcln(IndexFile,'r); 

writeln(!ndexFile,'SONAR'); 

writeln(lndexFile,Namc + '.BNl'); 

assign(XYFile,Dir + Name + '.XY'',; 

rcwrite(XYFile); 

BeginVal0; 

if Prqjection.Pname o UTMEIlipsoidal then 
MessageToContinueXy(l.l,'Not UTM projection: problems likely.'); 
{Image 0,0} 

XDesired ;■* ScreenXMax; 
xw ScreenXMax; 
case PortCh of 

'B': DistFromCentabs(RecXMax • XDesired) * Range / ReeXMax; 

'S'; DistFromCentXDesired * Range / ReeXMax; 

'P'; DistFromCent (ScreenXMax • XDesired) * Range / ReeXMax; 
end; 

res<t(DataFilc); 

read(DataF i Ic.StdRec); 

for i:» 0 to 17 do dec(StdRec(i].128); 

Heading StdRec[14] * 100 i- StdRec[13]; 

Move(StdRec| 19l,Ccntxutm.4); 

Move(StdRec|23i,Centyutm.4); 

if (txw < ReeXMax) and (PortCh = 'B') and (not Inveri)) or (PortCh = 'P') or 
((xw > ReeXMax) and Invert and (PortCh •- 'B')) then begin 
Finaixutm := Centxutm-DistFromCcn'.^CosDegdleading); 

Finniyutm := Centyutm+DistFromCent*SinDeg(Heading); 
end 

else begin 

Finaixutm := Centx'jtm+DistFromCent*CosDeg(Hcading); 

Finalyutm := Centyutm-DistFromCent*SinDcg(Heading); 
end; 

Finaixutm := Finaixutm - 25*SinDcg(Heading); 

Finalyutm Finalyutm - 25*CosDeg(Hcading); 

writcln(X YFilc.BeginVal: I O.BcginVal: 10,Finaixutm: 10:0.Finalyulm: 10:0): 
(image SXM.O) 

XDesired := 0; 
xw 0; 
ca,sc PortCh of 

'B': DistFromCent := abs(RecXMax - XDesired! * Range / ReeXMax, 

'S' : DistFromCent := XDesired * Range / ReeXMax; 

'P'; DisiFroniCcnt (ScreenXMax - XDesired) * Range / ReeXMax; 
end; 

il'((xw ReeXMax) and (PortCh = 'B') and tnot Invert)) or (PortCh = 'P') or 
((xw > ReeXMax) and Invert and (PortCh = 'B')) then begin 




Finalxuim: - CenMutm-DistFromCent*CosDeg(He8ding); 

Finalyutm := Ccntyutm+DistFromCent*SinDeg(Hcading); 
end 

else begin 

Finalxutm ;■ Centxutm+DistFroniCent*CosDeg(Headiiig); 

Finalyutm ;>■ Centyutm-DistFromCent*SinDeg(Heading); 
end; 

Finalxutm Finalxutm • 2S*SinDeg(Heading); 

Finalyutm Finalyutm • 2S*CosDeg(Heading); 

writein(XYFile,Scr<ienXMBX. 10,BeginVahlO,Finalxutm; 10:0,Finalyutm; 10:0); 

{Image SXM,SYM} 

XDesired := 0; 
xwC; 
case PonCh of 

'B': DistFromCent abs(RecXMax • XDesired) * Range / ReeXMox; 

'S': DistFromCentXDesired * Range / ReeXMax; 

'P ; DistFromCent (ScreenXMax < XDesired) * Range / ReeXMax; 
end; 

seek(DataFile,pred(NumRec)); 

read(DataFile,StdRec); 

for I ;«> 0 to 17 do dec(StdRec[i],t28); 

Heading :■> StdRec[t4] * 100 + StdRec[t3]; 

Move(StdRec[ 19],Centxutnt,4); 

Move(StdRec(231,Centyutm.4); 

if ((xw < ReeXMax) and (PortCh “ 'B') and (not Invert)) or (PorlCh «'P') or 
((xw > ReeXMax) and Invert and (PortCh *■ 'B')) then begin 
Finalxutm ;= Centxutm-DistFromCent*CosDeg(HeBding); 

FinalyutmCenlyutm+DistFromCent*SinDeg(Heading); 
end 

else begin 

Finalxutm :* Centxutm+DistFromCent*CosDcg(HeBdlng); 

FinalyutmCentyutm-DistFromCent*SinDeg(Heading); 
end; 

Finalxutm ;•* Finalxutm • 25*SinDeg(Heading); 

Finalyutm ;* Finalyutm > 25*CosDcg(Heading); 

wrileln(XYFilc,ScfecnXMax:10,(y ScrcensDone * ScrecnYMax):l0.Finalxutm:10;0.Finalyutm;10;0). 
{Image O.SYM} 

XDesired :•= ScreenXMax; 
xw := ScreenXMax; 
case PortCh of 

'B'; DistFromCent := abs(RccXMax - XDesired) * Range / ReeXMax; 

'S': DistFromCentXDesired * Range / ReeXMax; 

'P': DistFromCent(ScreenXMax - XDesired) • Range / ReeXMax; 
end; 

if ((xw < ReeXMax) and (PortCh = 'B') and (not Invert)) or (PortCh = 'P') or 
((XV, > ReeXMax) and Invert and (PortCh = 'B')) then begin 
Finalxutm (:;entxutm-DistFromCent*CosDeg(Heading); 

Finalyutm Ccntyutm+DistFromCent*SinDeg(Hcading); 
end 

else begin 

Finalxuim ;= Ccntxutm^ DistFromCent*CosDeg(Heading), 

Finalyutm := Ccntyutm-DistFroniCent*SinDcg(Hcading), 
end; 

Finalxutm Finalxutm - 25*SinDeg(Heading), 

Finalyutm :•= Finalyutm - 25*Co.sDeg(Heading); 

writeln(XYFilc.Beg'.nVal:10,'v + ScrcensDone * Scrccn^ Max):10.Finalxutm:10:0.Finalyutm.l0:O). 

close(XYFile), 

closcdmag'd'ile); 







close(lndexFile); 

end, 


procedure SideScanOps; 

label 

Bored; 

var 

TFile ; text; 

BadPick,RadioData,Mo!:aiclndicatur,RadioCotTect,SkipCalcs,ShowBar,BigRec; boolean; 
RecalcParanteter,OldFlshHelght,LastRange: float; 
i,MemPosltioii,MosalcLoop,SaveRecNum,BottomStart; integer; 

MapDir,Projr ileName,ImageFileName,DataSubDir; PathStr; 
xl,yl; word; 

begin 

VerifySideScanDefaults; 

Graphinit; 

UTMInitiallze; 

FlleOpen f^lse; 

OldPishMeight :• 0; 

RecalcParameter0.05; 

NumRecs 1; 

ColsSidebySide 0; 

ColSkip := I; 
xl100; 
yl I- 100; 

BottomChannel'B'; 
repeat 
repeat 

ColsSidebySldc := 1; 

BotVal25; 

Copylmagcfalse; 

SkipCalcsfalse; 

Invert false; 

RadioCorrect ;= false; 

RailioDatiifalse; 

ShowBar := true; 

WaitAtBottom ~ true; 
with PFTMARDefaults do 

ifSupcrVOAMode > 10 then NewGraphicsMode(SuperVGAModc.SuperVGAModc) 
else ScIcctGraphicsMode; 
ch :»' 
i ;= I; 

MenuStr ;= '^DisplayN-One sonographV-Multiple sonographsVAltitude distribution\-Digital mosaic' 
'\-Frequency distributionV-Profilc across irackWO^Bcmo'; 

MenuStr MenuStr + '\'^ptions\~CrcBte EGG subsct\~Ground registerWHydrographic option.^' + 
'\'lmagc processing options\~Sedimcnt analysis\~Xit'; 

McnuHclpFilcNamc 'ss-main.hlp'; 

MakeMenu(MenuStr.0.0,ch,i); 
if ch in I'A'.'C'.'F'.'G'.'P'l then Newlmagc; 
case ch of 
'Q' : Demonstration; 

'A : FishlleightPlot; 

'!)’ : begin 

NewCiraphicsModctPr.TMARDefaulls.DcRiraphDrivcr.DclGraphModc); 








138 


Mosaic; 

end; 

'G': EditFile; 

'F'; AciossTrackFrequencics; 

'M': begin 

NumRecs2; 

ReadLonglntege;DefaultInOraphicsBox(S,5,'Number of records to show (3 max)',NumRecs); 
Mosaiclndicator :■> true; 

SelectGraphicsMode; 

end; 

'H'; begin 

DepihLimit ;•• 43; 

DataSubDir ;■ SideScanDefaulls.DataPath; 

MapDlrSideScanDefaults.DataPath; 

NewGraphicsMode(PETMARDefaults.DefQrBphDriver,DcfOrBphMode); 

UTMlnitialize; 

HydrographicSurvey(truc,l ’ !l'^tRed,DepthLimit, 
MapProj.ProjectSymbol,taise,Box,DataSubDir,") 
end; 

■ begin 

NewGraphicsMode(PETMARDefaults.De<GraphDriver,DefGraphMode); 

SBtellitelmage(true); 

UTMlnitialize; 

end; 

'P'; DoProfile; 

'C; Subset; 

'S', begin 

NewQraphicsMode(PETMARDefaults.DefGraphDrlver,DeftiraphMode); 

SievePlottIng; 

end; 

end; 

until ch in ('O'.'M'.'X']; 
if ch in ['0','M'l then begin 
if ch »'O' then Newlmage; 
repeat 

if ch “ 'O' then begin 
NumRecs :•= 1; 

Mosaiclndicator false; 
end; 

Graphlnlt; 

MosalcLoop := 1; 

while MosaicLoop <■• NumRecs do begin 
if Mosaiclndicator then begin 
Newlmage; 

WaitAtBottom := false; 
end; 
repeat 

i := 3; 

MenuStr := "HZhannel dlsplayed\'-Port\-Starboard\~Both\''DisplBy preferences' + 
'\-lixpress\~Customlzed\~Abort'; 

MenuHclpFilcName := 'ss-sono,hlp'; 

MakcMcnu(McnuStr,3,5,PortCh,i); 
case PortCh of 
'E'; begin 

ColsSidcbySidc ;= 1; 

BotVal := 25; 

Copylmagc false; 

SlcipOalcs false; 





Invert := false: 

RadioCorrect:» false; 

RadioDatafalse: 

ShowBarfalse; 

WaitAtBottom :■= false; 
end; 

'C: begin 
repeat 
i :«■ 99; 

MenuStr'^'Modify preferences' + 

'\~Bottom tracking,' + ChannelName(BottomChannel) + 

'\~Copy to Image file,' + YesOrNo(Copy!mage) 

'\~Display status bar,' + YesOrNo(ShowBBr) + 

'\~Edit bottomvalue,' + lntegerToString(BotVal,3) + 

'\-lnverl.' + YesOrNo(Invert) + 

'\--Number of columns to display,' + IntegerToString(ColsSidebySide,3) 
'\-Radlometric corrections, ‘ + YesOrNo(RadloCorrect) + 

'\~Target color,'; 

If NormalColor then MenuStr i- MenuStr + 'White' 
else MenuStrMenuStr 'Black'; 

MenuStr :■ MenuStr + '\~Wait when screen ftill,' + 
YesOrNo(WaltAtBottom) + 'WXif; 

MenuHelpFileName;»'ss-pref.hip'; 

MakeMenu(MenuStr,S,S,DispCh,i); 
case DispCh of 
'B': begin 
1;- I; 

MakeMenuC^Bottom tracking channel\'-Port\'-StarboBrd\--Both', 
S.S.BottomChanneU); 
end; 

'Cl Copylmagenot Copy Image; 

'O': ShowBar i” not ShowBar; 

'Ll': ReadintegerDefaultlnGraphicsBox(*5,>5,'New bottom VBlue',ButVat); 
'I'l Invertnot Invert; 

'N'l If not Mosalcindicator then begin 

RcadlntegerDefaultlnOraphicsBoxd.K'Display n columns (3 max)', 
ColsSidebySide); 

NumRccs :•= NumRecs + ColsSidebySide • 1; 
end; 

'W': WaitAtBottom “ not WaitAtBottom; 

'R'l RadioCorrect:« not RadioCorrect; 

'T'l begin 

for i I* 0 to 255 do 

ColorBylcs(i] Offset + pred(NumOrays) - ColorBylcsIi); 
NormalColornot NormalColor; 
end; 
end; 

until DispCh in ['X'|: 
end; 

'A': goto Bored; 
end; 

until PortCh in l'l",'S','B'.'A'); 
if RadioCorrect then begin 
ScleclGraphicsMode: 

RadiomeiricCorrect; 

KiiJioData true: 
end; 

if Invert then y := 0 else y Screen YMox; 




case PortCh of 
'P'.'S'; OneOrBoth ;-= 1; 

'B'; OneOrBoth :■« 2; 
end; 

Starboard ;<• PortCh ■ 'S'; 
if NumRec <■> ScreenYMax then StartRecord 0 
else 
repeat 

ReadLonglntegerDefaultlnGrBphicsBox( 1.3,'Starting record',StartRecord); 
seekfDataFiie,StartRecord); 

{$1-} Read(DataFile,StdRec); (SH) 

AnalyzeRecord; 

until \nswerIsYe8XY(I,S.'Display from time' + TlmeStrlng); 
seek(DntaFile,StartRecord); 

OnRecord StartRecord; 

ColsDone 0; 

ScreensDone 0; 

Bssign(JunkF)le,PETMARDefaults.VirtualDiskPath + 'YaiidRec.txt'); 
rewrite(Junkrile); 

FSpltt(PName,Dir,Name,ext); 

IfCopylmage then begin 
asi;ign(lmageFile,Dir + Name + '.BNI'); 
rewrite(lmageFile,succ(ScreenXMax)); 

RowCounter0; 
end; 

while (not EOF(DataFile)) do begin 
Inc(OnRecard); 

if EOF(DataFile) then goto Bored; 

(SI '} Read(DataFile,StdReo); (SH) 
if lOResult - 0 then begin 
AnalyzeRecord; 

If (ShowBar) and (OnRecord < 32000) imd 
((OnRecord mod S) ■ 0) then 
Screen(l,l,LlghtRed,Name + " + TimeStn.tg +' Rec:' + 
IntegerToString(OnRecord,3) 4 
' Spd;' + RealToStrlng(Speed.5,2) +' kts' + 

' Rng;' + ReBlToStrlng(Range,4,0) +' m' + 

' Frq;' + lntegerToString(FrcqUscd.4) +' kHz' + 

' Hdg:' + RealToStrlng(Heading.4.0) +' oT); 

ReeXMax :» ScreenXMax div (NumRecs • OneOrBoth); 
FindFishHeight(BottomStart); 

DevFishHeight :• ahr(01dFishHelght - rishHcighl); 
if RadioData and RadioCorrect then 
for x:> BottomStart to 883 do 
if (AvgPrt[x] > 0) and (AvgStdfx) > 0) 
then begin 

StdRec[32 + 2 * x]round(StdRec(32 + 2 * x) * 32 / AvgPrtlx]); 
StdRec[33 + 2 * x)round(S.dRecl33 + 2 * x) * 32 / AvgStd|xl); 
end; 

if (not Rt iioDuia) and RadioCorrect then begin 
ResumcMarkerOnRecord, 

RadiomctricCorrect; 

RadioData i’* true; 
ri<set(Datai'ilc); 
aeek(Datarile.ResumeMarker)'. 
end: 

if ((DevFishHeight > Rccalci’arametrr) and 
(not (SkipCalcs))) or (O.iRccord « 0) then begin 













RecXMax ScreenXMax div (NumRecs • OneOrBoth); 

SlantRngCorrect; 

XDeflection := (MosaicLoop -1) * (ScreenXMax div NumRecs); 
case ColsDone of 

1 : XDeflection ScreenXMax div NumRecs; 

2 : XDeflection 2 “ (ScreenXMax div NumRecs); 
end; 

OldFishHelght:« FishHeight; 
end; 

AspectRatioCorrect; 

end; 

ir(KeyPressed and (ReadKey ■■ #27)) or(OnRecoTd - NumRec) then begin 
repeat 

i1; 

MenuStr ;■ '\''Imagc optlons\~Re*um'5\'-Image\~Oet position' + 

'\--MeBSure dlstance\''Displuy prefere;ices\~Exprcss\~Customiicd\~Abort'; 
MenuHelpFileName.» ris- lisp.hlp'; 

MakeMenu(MenuStr,> 1 1 ,ch,i); 
case ch of 

'I': PETMARlm.;jeOptlon(true,DefaultPrint): 

'Q'.'M': OetPosition; 

begin 

BotVai i- 25; 

Copy Image false; 

SkIpCalcsfalse; 

RadioCorrect :> fkise; 

RadioDatu false; 

ShowBarfalse; 

WaitAtBottom false; 
end; 

'C: begin 
repeat 

199; 

MenuStr :■ '‘'Modify preferences' + 

'\~Bottom tracking.' + ChannelNamc(BottomChannel) + 

'\~Dlsplay status bar.' + YesOrNo(ShowDar) + 

'\~Edlt bottomvalue,' + IntegerToStringfBotVal.S) + 

'\-LlJT recalcs skipped,' + YesOrNofSklpCalcs) + 

'^Radiometric corrections,' + YesOrMo(RadioCorrcct) + 

'V-Target color,'; 

if NormalColor then MenuStrMenuStr + 'White' 
else MenuStrMenuStr + 'Black'; 

MenuStrMenuStr + 

'\-Wait when screen full.' + YesOrNolWaltAtBoltom) + '\-Xlt'; 
MenuHelpFileName'ss-modlf.hlp'; 

MakeMcnu(McnuStr.-1 .-l.DispCh.i); 
case DispCh of 
'B':.begin 
i1; 

MakcMenu('''Bottom tracking channelWPorl' + 
'\~Starboard\~Doth',5,5.BonomChBnnel,l); 
end; 

'D': ShowBar := not ShowBar; 

'E': ReadlntegerDcraultlnOraphicsBox(-5.-5.'Ncw bottom value',BotVal); 
'E'; SkIpCalcsnot SkIpCalcs; 

'W': WaitAtBottom not WaitAtBottom; 

'R': RadioConcct ;= not RadioCorrect; 

'T; begin 





142 


for i0 to 255 do 

ColorByles[ilOffset+prcd(NumGrays)-ColorBytes(i); 
NonnalColornot NormalColor; 
end; 
end; 

until DlspCh in ['X']; 
end; 

'A': goto Bored; 
end; 

until ch in ['R'.'A']; 
end; 
end; 

inc(MosaicLuap); 

OldFishHeiglit-9999; 
ifFileOpen then begin 
clo8e(DataFile); 

FileOpen faise; 
end; 

close(JunkFiie); 

end; 

Bored:; 

if Copylmage thun MokelDXandXYFilea; 
until nut AnawerIsYesXY(1,15,'Display this image again'); 
end; 

(Bored:;) 

ifFileOpen then begin 
close(DatBFile); 

FileOpen ;•* false; 
end; 

until eh “ 'X'; 

asslgn(DefaultsFilc,'SldeSean.DEF'); 

rewtite(DefaultsFlle); 

wrlte(DefaultsFile,SidcScanDefaults); 

close(DefaultsFlle); 

SelectTextMode; 

end; 

end, 







