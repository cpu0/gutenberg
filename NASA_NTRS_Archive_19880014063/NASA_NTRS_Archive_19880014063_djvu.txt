NASA Technical Memorandum 100606 


PLOT300 - A Tektronics 
PLOTIO Emulator for 
HP 9000 Series 200/300 
Computers 


Scott O. Kjelgaard 


f NAS A -TH- 100606) PLOT300: A TEKTRONICS 
PLOTIO EMULATOR FOR HP 9000 SERIES 200/300 
COMPUTERS (NASA) 39 p CSCL Q9B 


G3/61 


May 1988 


f\l/\SA 

National Aeronautics and 
Space Administration 

Langley Research Center 

Hampton, Virginia 23665-5225 


N88-23447 

Unclas 

0142692 



PLOT300 - A TektronicB PLOTlO Emulator for 
HP 9000 Series 200/300 Computers 


Scott 0. Kjelgaard 
NASA Langley Research Center 
Hampton, VA 23665 


ABSTRACT 

A software package which emulates the Tektronics PLOTlO Graphics package on Hewlett-Packard 9000 
Series 200/300 computers is described. The software is written in HP Rocky Mountain BASIC and can be 
run under BASIC revisions 3.0 and 4.0. Although this subroutine library emulates a subset of PLOTlO, 
several subroutines have been added which enhance basic plot generation. Example codes using PLOT300 
and descriptions of the subroutines are included in the text. 

INTRODUCTION 

Although the primary function of the existing NASA-Langley wind tunnel complex is the same as that 
of its predecessor NACA, the capabilities of the existing facilities are far superior to those of its predecessor 
with regard to the relative speeds obtainable, Reynolds number range, and the types and quality of data 
that can be acquired. The recent advances in electronics have created a wide variety of micro-processor 
controlled instrumentation systems and desk-top micro-computers that can interface with these systems. 
The capability for computer control of data acquisition systems has led to a large increase in the volume of 
experimental data acquired. However, this proliferation in micro-processor technology has created a wide 
variety of computer operating systems and languages in which the test engineer must be fluent, in order to 
efficiently acquire, reduce and analyze experimental data. 

A typical wind-tunnel test program includes the acquisition of experimental data, real-time data reduc- 
tion, to verify the quality of the acquired data, and off-line data analysis. This process can include a variety 
of computers, operating systems and languages. An example of this is the Basic Aerodynamics Research 
Tunnel at NASA-Langley Research Center. Data acquisition and real-time data display are performed by 
a desktop computer system using the BASIC computer language, off-line data analysis is performed on the 
desktop computer system, and two different mini-computers. The mini-computers both use the FORTRAN 
language but have entirely different operating systems. Software for displaying data on these computer 
systems also widely varies. 

The purpose of this report is to describe the features and application of a BASIC software package which 
emulates the Tektronics PLOTlO graphics software package which is widely used throughout government 
research laboratories and industry. 

EXAMPLES OF USE OF PLOT300 

In the following text, examples of the use of PLOT300 are presented to show the various methods 
for producing a useful! plot. The subroutine library PLOT300 was formulated to emulate the Tektronics 
PLOTlO graphics package on HP 9000 Series 200/300 computers equipped with Rocky Mountain BASIC 
revision 3.0 or 4.0. This software emulates a subset of the PLOTlO graphics package, but includes the 
subroutines required for typical engineering applications and several additional subroutines which enhance 
the PLOT300 graphics package. The discussion in the text assumes a fundamental knowledge of the Rocky 
Mountain BASIC (see references 1 thru 3) and Tektronics PLOTlO (see references 4 and 5). Descriptions 
of the subroutine calls .and the purpose of the subroutine are presented in the next section. A listing of the 
PLOT300 subroutine library is presented in the appendix. 


1 



Example Code 1 

This code represents the simples 

produced 

is presented in figure 1. 

10 

OPTION BASE 1 

20 

DIM X(100),Y(100) 

30 

N points = 11 

40 

FOR 1=1 TO Npoints 

50 

x(i) = 1-1 

60 

Y(I) = (I— 1) A 2 

70 

NEXT I 

80 

CALL Initt(“CRT”) 

90 

CALL Binitt 

100 

CALL Npts(Npoints) 

110 

CALL DBplay(X(*),Y(*)) 

120 

END 

Example 

Code 2 

This sample code adds a second 

types and symbols to help distinguish 
2. 

10 

OPTION BASE 1 

20 

DIM X(100), Y(100), Z(100 

30 

Npoints =11 

40 

FOR 1=1 TO Npoints 

50 

X(I) = 1-1 

60 

Y(I) = (I— 1)*7.5+10 

70 

Z(I) = 1*10+5 

80 

T(I) = (I— 1)*3.5+3 

90 

NEXT I 

100 

CALL Initt(“CRT”) 

110 

CALL Binitt 

120 

CALL Npts(Npoints) 

130 

CALL Symbl(l) 

140 

CALL Line(-l) 

150 

CALL Dsplay(X(*),Y(*)) 

160 

CALL Syinbl{2) 

170 

CALL Line(2) 

180 

CALL Npt8(Npoints) 

190 

CALL Cplot(X(*),Z(*)) 

200 

CALL Synibl(3) 

210 

CALL Line(0) 

220 

CALL Npts(Npoiiits) 

230 

CALL Cplot(X(*),T(*)) 

240 

END 


! Required by PLOT300 


! Required by PLOT300 


Example Code 3 

Example code 3 iliutsrates the addition of labels on the x and y axes and plot titles. The plot produced 
is presented in figure 3. 

10 OPTION BASE 1 ! Required by PLOT300 

20 DIM X(100), Y(100), Z(100), T(100) 


2 



30 Npoints =11 
40 FOR I = 1 TO Npoints 
50 X(I) = I I 
00 Y(I) = (I 1)*7.5 f 10 
70 Z(I) - I* 10-1-5 
80 T(I) = (l -l)*3.5+3 
90 NEXT I 
100 CALL lnitt(“CRT”) 

110 CALL Binitt 
1 20 CALL Npts(Npoints) 

130 CALL Symbl(l) 

140 CALL Line(-l) 

150 CALL Hlabel(“X”) 

100 StringS = “Y” 

170 CALL Vlabel(StringS) 

180 CALL Title( “Example code 3”) 

190 CALL Ptitle( “Sample Plot Title”) 

200 CALL Dsplay(X(*),Y(*)) 

210 CALL Symbl(2) 

220 CALL Line(2) 

230 CALL Npts(Npoints) 

240 CALL Cplot(X(*),Z(*)) 

250 CALL Symbl(3) 

260 CALL Line(0) 

270 CALL Npts(Npoints) 

280 CALL Cplot(X(*),T(*)) 

290 END 

Example Code 4 

C -hanging the size of the plot and setting the minimum and maximum for the x and y axes is illustrated 

in example code 4. The plot produced is presented in figure 4. 

10 OPTION BASE 1 ! Required by PLOT300 

20 DIM X(100), Y(100), Z(100), T(100) 

30 Npoints =11 
40 FOR 1=1 TO Npoints 
50 X(I) - 1-1 
60 Y(I) = (I-l)*7.5+10 
70 Z(I) - 1*10+5 
80 T(I) = (M)*3.5+3 
90 NEXT I 
100 CALL Initt(“CRT”) 

110 CALL Binitt 

120 CALL Npts(Npoints) 

130 CALL Symbl(l) 

140 CALL Line(-l) 

150 CALL Hlabel(“X”) 

160 StringS = “Y” 

170 CALL Vlabel(StringS) 

180 CALL Title( “Example code 4”) 

190 CALL Ptitle( “Sample Plot Title”) 

200 CALL Slimx(.3,.7) 

210 CALL Slimy (.3, .7) 


3 



220 CALL Dlimx(-5,15) 

230 CALL Dlimy( 10,70, 10,2) 

240 CALL Dsplay(X(*),Y(*)) 

250 CALL Symbl(2) 

200 CALL Line(2) 

270 CALL NptsfNpoiiits) 

280 CALL Cplot(X(*),Z(*)) 

290 CALL Symbl(3) 

300 CALL Line(0) 

310 CALL Npts(Npoints) 

320 CALL CpIot(X(*),T(*)) 

330 END 

Example Code 5 

The addition of a legend for the lines and symbols used is presented in example code 5. The plot 

produced is presented in figure 5. 

10 OPTION BASE 1 ! Required by PLOT300 

20 DIM X(100), Y(100), Z(100), T(100) 

30 N points =11 
40 FOR 1=1 TO Npoints 
50 X(I) = 1-1 
60 Y(I) = (I-l)*7.5+10 
70 Z(I) = 1*10+5 
80 T(I) = (I— 1)*3.5+3 
90 NEXT I 
100 CALL Initt(“CRT”) 

1 10 CALL Binitt 

120 CALL Npts(Npoints) 

130 CALL Symbl(l) 

140 CALL Line(-l) 

150 CALL Hlabel(“X”) 

160 String$ = “Y” 

170 CALL Vlabel(String$) 

180 CALL Title( “Example code 5”) 

190 CALL Ptitle( “Sample Plot Title”) 

200 CALL Slimx(.3,.7) 

210 CALL Slimy(.3,.7) 

220 CALL Dlimx(-5,15) 

230 CALL Dlimyj 10,70, 10,2) 

240 CALL Dsplay(X(*),Y(*)) 

250 CALL Synvbl(2) 

260 CALL Line(2) 

270 CALL Npts(Npoints) 

280 CALL Cplot(X(*),Z(*)) 

290 CALL Symbl(3) 

300 CALL Line(0) 

310 CALL Npts(Npoints) 

320 CALL Cplot(X(*),T(*)) 

330 CALL Legend(l,l.l,.9,l, -1,1, “Line 1") 

340 CALL Legend(2, 1.1, .9,2,2, 1, “Line 2”) 

350 CALL Legend(3,l.l,.9,3,0,l,“Line 3”) 

360 END 


4 



Example Code 6 

Placing multiple plots on the same page is illustrated in example code 6. The plot produced is presented 
in figure 6. 

10 OPTION BASE 1 ! Required by PLOT300 

20 DIM X(100), Y(100), Z(100), T(100) 

30 N points = 11 

40 FOR 1=1 TO Npoints 

50 X(I) = 1-1 
60 Y(I) = (I-l)*7.54-10 
70 Z(I) = 1*104-5 
80 T(I) = (I— 1)*3.54-3 
90 NEXT I 
100 CALL Initt(“CRT”) 

1 10 (’ALL Binitt 

120 CALL Npts(Npoints) 

130 CALL Symbl(l) 

140 CALL Line(-l) 

150 CALL Place(2) 

160 CALL Title( “Example code 6”) 

170 CALL Hlabel(“X”) 

180 CALL Vlabel(“Y”) 

190 CALL Ptitle( “Sample Plot Title”) 

200 CALL Dsplay(X(*),Y(*)) 

210 CALL Binitt 
220 CALL Symbl(2) 

230 CALL Line(2) 

240 CALL Npts(Npoints) 

250 CALL Place(6) 

260 CALL Dsplay(X(*),Z(*)) 

270 CALL Binitt 
280 CALL Symbl(3) 

290 CALL Line(0) 

300 CALL Npts(Npoints) 

310 CALL Place(7) 

320 CALL Dsplay(X(*),T(*)) 

330 END 


5 



SUMMARY OF PLOT300 SUBROUTINES 

The following subroutines are available in PLOT300 and are briefly discussed in the following pages. 


SUBROUTINE NAME PAGE 

AOUTST(String$, OPTIONAL X, Y, Ilorg, C-si»e) 7 

BIN ITT 7 

CPLOT(X(*), Y(*)) 7 

DLIMX(Xmin, Xmax, OPTIONAL X-major-tic, Xjninor.tic) 8 

DLIMY(Ymin, Ymax, OPTIONAL Y-major-tic, Y-minor-tic) 8 

DSPLAY(X(»), Y(*)) 8 

HLABEL(String$) 8 

INITT(String$) 9 

LEGEND(N, X, Y, Isyni, Lintyp, Ipen, String?) 9 

LINE(Lintyp) 9 

NEWPAG 9 

NPTS(Npoints) 10 

PEN-COLOR(Pentyp) 10 

PEN-DEF(Defpen) 10 

PLACE(Iplace) 10 

PTITLE(String$) 10 

SLIMX(X-niin-gdu, X-inax.gdu) 11 

SLIMY(Y-min.gdu, Y-niax-gdu) 11 

SYMBL(Isyin) H 

TITLE(String$) H 

VLABEL(String$) H 


6 



DESCRIPTION OF PLOT300 SUBROUTINES 


A short description of each PLOT300 subroutine follows. The PLOTlO subroutines CHECK and 
F1NITT are not used in PLOT300. 

AOUTST - 

Call: 

CALL AOUTST(String$, X, Y, Ilorg, C .site) 

Parameters: 

String$ - String variable up to 15 characters Ion 
Optional Parameters: 

X, Y - Location on plot to write StringS. Given as a 
fraction of the X and Y axes. 

Ilorg - Specifies relative origin of label with respect 
to X and Y. See LORG in reference 2. 

C.size - Specifies character size to label with 
Purpose: 

Allows additional labels to be written on the plot. If optional parameters are not present , label is written 
at current pen position. If the optional parameters are present, the label is written at the X, Y supplied 
using LORG Ilorg. The character size can be made larger or smaller by specifying C_size. 

BINITT - See example code 1, figure 1 
Call: 

CALL Binitt 
Parameters: 

None 

Purpose: 

Sets constants in the PLOT300 common blocks to their default settings. 


OPLOT - See example code 2, figure 2 
Call: 

CALL Cplot(X(*), Y(*)) 

Parameters: 

X(*)i Y(*) Arrays that contain the independent 

and dependent variables to be plotted 

Purpose: 

Allows the PLOT300 user to add additional curves to an existing plot. 


7 


DLIMX - See example code 4, figure 4 
Call: 

CALL Dlimx(Xmin, Xmax, OPTIONAL X_major-tic, X-minor_tic) 

Parameters: 

Xmin - x axis minimum 
Xmax - x axis maximum 
Optional Parameters: 

X-major.tic - Major tic mark spacing for x axis 
(major tic marks are labeled) 

X_minor_tic - Minor tic mark spacing for x axis 
(minor tic marks are not labeled) 

Purpose: 

Allows the PLOT300 user to specify the minimum and maximum values for the x axis. These values are 
not necessarily used as the plot maximum and minimum, but are used for target values (plotted minimum 
might be lower, plotted maximum might be higher). If the optional parameters are supplied, then Xmin and 
Xmax are used as the x axis minimum and maximum with the specified major and minor tic mark spacing. 

DLIMY - See example code 4, figure 4 
Call: 

CALL Dlimy(Ymin, Ymax, OPTIONAL Y_major_tic, Y_minor_tic) 

Parameters: 

Ymin - y axis minimum 
Ymax - y axis maximum 
Optional Parameters: 

Y -major-tic - Major tic mark spacing for y axis 
(major tic marks are labeled) 

Y_minor_tic - Minor tic mark spacing for y axis 
(minor tic marks are not labeled) 

Purpose: 

Allows the PLOT300 user to specify the minimum and maximum values for the y axis. These values are 
not necessarily used as the plot maximum and minimum, but are used for target values (plotted minimum 
might be lower, plotted maximum might be higher). If the optional parameters are supplied, then Ymin and 
Ymax are used as the x axis minimum and maximum with the specified major and minor tic mark spacing. 

DSPLAY - See example code 1, figure 1 
Call: 

CALL Dsplay(X(*), Y(*)) 

Parameters: 

X(*), Y(*) - Arrays that contain the independent 

and dependent variables to be plotted 

Purpose: 

This subroutine draws the x and y axes, frames, labels, and plots the X and Y arrays. 


HLABEL - See example code 3, figure 3 
Call: 

CALL Hlabel(String$) 

Parameters: 

StringS - String variable up to 10 characters long 
Purpose: 

This subroutine allows the PLOT300 user to specify the horizontal axis label written by DSPLAY 


8 


INITT - See example code 1, figure 1 
Call: 

CALL Initt(String$) 

Parameters: 

StringS - String variable specifying plot device 
Purpose: 

This subroutine allows the PLOT300 user to specify the plot device and also sets default plot limits 

Values for String$ are: 

“CRT” - plot device is CRT 
“7475” - plot device is HPGL plotter 
located at HPIB address 705 

Note: If the CRT is monochromatic, the line 110 will need to be changed to PLOTTER IS CRT. If the 
HPCL plotter is located at another HPIB address then lines 70 and 910 will need to be modified to the 
correct HPIB address. 

LEGEND - See example code 5, figure 5 
Call: 

CALL Legend(N, X, Y, Isym, Lintyp, Pen, LegenS) 

Parameters: 

N - Line number of the legend 

X, Y - Position of legend. Giveb in fraction of X, Y axes. 

Isym Specifies symbol number of legend 

Lintyp - Specifies linetype of legend 

Pen - Specifies pen number of legend 

Legen$ - string variable containing legend description 
Purpose: 

This subroutine allows the PLOT300 user to programatically create a plot legend. 


LINE - See example code 2, figure 2 
Call: 

CALL Line(Lintyp) 

Parameters: 

Lintyp Line type to be used for current curve 
Values for Lintyp are: 

-1 no line 

0 solid line (default) 

1 - dotted line 

2 dot dash 

3 dash 

4 - long dash 

Purpose: 

This subroutine allows the PLOT30O user to specify the line type to be drawn between data points. 

NEWPAG 

Call: 

CALL New pa g 
Parameters: 

None 

Purpose: 

Clears plot area without affecting common block constants 


9 



NPTS(Npoints) - See example code 1, figure 1 
Call: 

CALL Npts(Npoints) 

Parameters: 

Npoilits - Number of data points in X and Y arrays 
Purpose: 

Specifies the number of data points to be plotted by the DSPLAY and CPLOT subroutines. 

PEN-COLOR 

Call: 

CALL Pen-color(Pentyp) 

Parameters: 

Pentyp - Pen number used for curve 
Purpose: 

Allows the PLOT300 user to use different pen colors for different curves 

PENJDEP 

Call: 

CALL Peu_def(Defpen) 

Parameters: 

Defpen - Pen number used for axes and labels 
Purpose: 

Allows the PLOT300 user to use different pen colors for the plot axes and labels 


PLACE - See example code 6, figures 6 and 7 
Call: 

CALL Place(Iplace) 

Parameters: 

Iplace - Variable specifying plot location 
Values for Iplace are: 

1 - default plotting area 

2 - left half of plotting area (see figure 7a) 

3 - right half of plotting area (see figure 7a) 

4 - upper left quadrant of plotting area (see figure 7b) 

5 - lower left quadrant of plotting area (see figure 7b) 

6 - upper right quadrant of plotting area (see figure 7b) 

7 - lower right quadrant of plotting area (see figure 7b) 

Purpose: 

Allows the PLOT300 user to place multiple plots on the same page 

PTITLE - See example code 3, figure 3 
Call: 

CALL Ptitle(String$) 

Parameters: 

String$ - String variable up to 40 characters long 
Purpose: 

This subroutine allows the PLOT300 user to specify the plot title located below the horisontal axis. 


10 



SLIMX - See example code 5, figure 5 
Call: 

CALL SLIMX (X-iniiugdu, X_max_gdu) 

Parameters: 

X miii gdu plot area x axis minimum 
X max-gdu plot area x axis maximum 
Purpose: 

Allows the PLOT30O user to specify the plotting area. These values are given as fractions of the entire 
plotting area. 

SLIMY - See example code 5, figure 5 
Call: 

CALL SLIM Y( Y-inin-gdu, Y-inax-gdu) 

Parameters: 

Ymiiugdu - plot area y axis minimum 
Y-inax.gdu - plot area y axis maximum 
Purpose: 

Allows the PLOT300 user to specify the plotting area. These values are given as fractions of the entire 
plotting area. 

SYMBL - See example code 2, figure 2 
Call: 

CALL Symbl(Isym) 

Parameters: 

Isym - Symbol type to be used for current curve 
Values for Lintyp are: 

0 - no symbol (default) 

1 - circle 

2 square 

3 - diamond 

4 triangle 

5 - upside-down triangle 

6 - star 

Purpose: 

Allows the PLOT300 user to specify the symbol type to be drawn at each data point. 

TITLE - See example code 3, figure 3 
Call: 

CALL Title(String$) 

Parameters: 

String$ - String variable up to 40 characters long 
Purpose: 

Allows the PLOT300 user to specify the plot title located above the plot. 


VLABEL - See example code 3, figure 3 
Call: 

CALL Vlabel(String$) 

Parameters: 

String$ - String variable up to 10 characters long 
Purpose: 

Allows the PLOT300 user to specify the vertical axis label written by DSPLAY. 


11 



OTHER SUBROUTINES USED BY PLOT300 


ASCALE - Calling subroutine - PFRAME 
This subroutine sets the major and minor tick mark spacing. 

MAX - Calling subroutine - DSPLAY 
This subroutine find the largest value in an array. 

MIN Calling subroutine - DSPLAY 
This subroutine find the smallest value in an array. 

PFRAME - Calling subroutine - DSPLAY 
This subroutine draws the plot axes and grid and labels. 

SYMBL - Calling subroutine - DSPLAY, CPLOT 

This subroutine draws the specified symbol at a specific point. 


12 



REFERENCES 


1. BASIC 4.0 Programming Techniques for HP 9000 Series 200/300 Computers. Hewlett-Packard Manual 
No. 98613-90011, 1985. 

2. BASIC 4.0 Language Reference for HP 9000 Series 200/300 Computers. Hewlett-Packard Manual No. 
98613-90051, 1985. 

3. BASIC 4.0 Graphics Techniques for HP 9000 Series 200/300 Computers. Hewlett-Packard Manual No. 
98613-90031, 1985. 

4. PLOT 10 Terminal Control System. Tektronics Part No. 070-5711-00, 1986. 

5. PLOT 10 Advanced Graphing II. Tektronics Part No. 070-5713-00, 1986. 


13 



APPENDIX - PLOTSOO LISTING 

! Required by BASIC 


10 END 

20 Initt:SUB Initt(Plotter$) 

30 OPTION BASE 1 

40 COM /Plot 1 / Xhgdu,Xlgdu,Yhgdu,Ylgdu f Xlow,Xhigh,Ylow,Yhigh, 

Isy in , N points, Lintyp, Plotdev , Penty p, Defpen 
50 IF Plotter$=“7475” THEN 

60 Plotdev=l 

70 PLOTTER IS 705,“HPGL” 

80 GRAPHICS INPUT IS 705,“HPGL” 

90 ELSE 

100 Plotdev=0 

110 PLOTTER IS 3, “INTERNAL” ;COLOR MAP 

120 SET PEN 15 INTENSITY .3,.3,.3 

130 GRAPHICS INPUT IS KBD, “ARROW KEYS” 

140 END IF 

150 X-gdu=100*MAX(l, RATIO) 

160 Y.gdu=100*MAX(l, 1/RATIO) 

170 GCLEAR 

180 IF SYSTEM$( “SYSTEM ID”)=“9836C” THEN 

190 Xhgdu=.9*X.gdu 

200 Xlgdu=.25*X.gdu 

210 Yhgdu=.80*Y-gdu 

220 Ylgdu=.2*Y_gdu 

230 ELSE 

240 IF Plotdev=0 THEN PRINT CHR$(12) 

250 Xhgdu=.85*X-gdu 

260 Xlgdu=.25*X-gdu 

270 Yhgdu=.85*Y.gdu 

280 Ylgdu— .3*Y_gdu 

290 END IF 

300 VIEWPORT Xlgdu.Xhgdu, Ylgdu, Yhgdu 

310 SUBEND 

320 I************************************************************** 

330 j************************************************************** 

340 Binitt:SUB Binitt 
350 OPTION BASE 1 

360 COM / Plotl/ Xhgdu,Xlgdu, Yhgdu, Ylgdu, Xlow,Xhigh,YIow,Yhigh, 

Isyin,Npoints,Lintyp,Plotdev,Pentyp, Defpen 

370 COM /Plot2 / Ndx,Incx,Rincx,Ndy,Incy,Rincy 

380 COM /Labels/ Hlabel$|10),Vlabel$[10),Ptitle$|40),Header$|40) 

390 ! ZERO EVERYTHING 

400 GRAPHICS ON 

410 HIabel$=“ 

420 VJabel$=“ 

430 Ptitle$=“ 

440 Header$=“ ” 

450 Lintyp=100 

460 lsym=0 

470 Xlow=0 

480 Xhigh=0 

490 Ylow=0 


14 



500 Yhigh=0 

510 Pentyp=l 

520 Defpen— 1 

530 Ndx=0 

540 Incx— 0 

550 Rincx 0 

560 Ndy=0 

570 lncy=0 

580 Rincy=0 

590 SUBEND 

600 I************************************************************** 

Q|Q J************************************************************** 

620 Pfranie:SUB Pframe(Xinin,Xmax,Ymin,Ymax) 

630 OPTION BASE 1 

640 DEG 

650 COM /Plotl/ Xhgdu,Xlgdu,Yhgdu,Ylgdu,Xlow,Xhigh,Ylow,Yhigh, 

Isy in, Npoints,Lintyp,Plotdev,Pentyp, Defpen 

660 COM /Plot2/ Ndx, Incx, Rincx, Ndy,Incy,Rincy 

670 COM /Labels/ Hlabel$|10j,Vlabel$|l0),Ptitle$[40j,Header$[40] 

680 COM /Syms/ Xcir(l7),Ycir(17),Xsq(5),Y8q(5),Xdi(5),Ydi(5), 

Xtr(4),Ytr(4),Xut.r(4),Yutr(4),Xst(6),Yst(6) 

690 PEN Defpen 

700 CLIP ON 

710 Csi*e-init.=MIN((Yhgdu— Ylgdu),(Xhgdu— Xlgdu))*.025+1.2 

720 IF Xlow=0 AND Xhigh=0 THEN GOTO 750 

730 Xmin=Xlow 

740 Xtnax — Xliigh 

750 IF Ndx— 0 THEN 

760 Xniin -Xniin +.01*(Xmax-Xiiiin) 

770 Xmax -Xmax-.01*(Xinax— Xinin) 

780 CALL A8cale(Xmin,Xinax,Xlow,Xhigh, Ndx, Incx, Rincx) 

790 END IF 

800 IF Ylow— 0 AND Yhigli=0 THEN GOTO 830 

810 Ymin= Ylow 

820 Ymax=Yhigh 

830 IF Ndy— 0 THEN 

840 Ymin=Ymin+.01*(Ymax-Ymin) 

850 Ymax- Ymax— .01*(Ymax— Ymin) 

860 CALL Ascale(Ymin, Ymax, Ylow, Yhigh, Ndy, Incy,Rincy) 

870 END IF 

880 LINE TYPE 1 

890 WINDOW XIow,Xhigh, Ylow, Yhigh 

900 IF Plotdev=l THEN 

910 PRINTER IS 705 

920 PRINT “VS10;” 

930 FRAME 

940 PRINT “VS30;” 

950 PRINTER IS 1 

960 ELSE 

970 FRAME 

980 END IF 

990 AXES Incx/Rincx,Iiicy/Rincy,Xlow,Ylow,Rincx,Rincy,INT(.05* (Yhgdu— Ylgdu)) 

1000 ! LABEL AXES 


15 


1010 

1020 

1030 

1040 

1050 

1000 

1070 

1080 

1090 

1100 

1110 

1120 

1130 

1140 

1150 

MOO 

1170 

1180 

1190 

1200 

1210 

1220 

1230 

1240 

1250 

1200 

1270 

1280 

1290 

1300 

1310 

1320 

1330 

1340 

1350 

1300 

1370 

1380 

1390 

1400 

1410 

1420 

1430 

1440 

1450 

1400 

1470 

1480 

1490 

1500 

1510 

1520 

1530 


CSIZE Csize-init 
LORG 6 
CLIP OFF 

Ylowl- Ylow (Yhigli Ylow)*(,5 + .025*(Yligdu-Ylgdu))/ (Yhgdu -YIgdn) 
FOR J-l TO Ndx fl 
XI XIow f (J~ l)*Incx 
IF 1NT(X1)=0 THEN 
Maxdig=l 
GOTO 1130 
END IF 

Maxdig— INT(LGT(ABS(INT(Xl)))) + l 
IF Xl<0 THEN Maxdig~Maxdig+l 
IF FRACT(Incx)— 0 THEN 
Mindig=l 
GOTO 1180 
END IF 

Mindig=ABS(INT(LGT(ABS(FRACT(lncx))))) 

IF Maxdig+Mindig-fl<6 THEN 

Forni$- tta <?cRPT$(“D w ) Maxdig)^“. ,, <kRPT$( a D w ,Mindig)i ,,B 

ELSE 

PRINT Maxdig,Miiidig 
Form$=“MD.2DE B 
END IF 
PENUP 

MOVE Xl.Ylowl 
LABEL USING Form$;Xl 
NEXT J 

REM LABEL Y AXES 
LORG 8 

XIow 1 -XIow- (Xhigh -XIow)* (,01923* (Xhgdu-Xlgdu))/ (Xhgdu-Xlgdu) 
FOR I~1 TO Ndy+1 
Y 1 — Ylow-h(I- l)*Iucy 
IF INT(Yl)— 0 THEN 
Maxdig— 1 
GOTO 1390 
END IF 

Maxdig=LGT(ABS(INT(Yl))) + l 
IF Yl<0 THEN Maxdig=Maxdig4*l 
IF FRAGT(Incy)=0 THEN 
Mindig=l 
GOTO 1440 
END IF 

Mindig-ABS(INT(LGT(ABS(FRACT(Incy))))) 

IF Maxdig-f Mindig + 1<6 THEN 

Fonn$= w “&RPT$( K D B I Maxdig)^“. B ^RPT$( tt D w ,Mindig)& BB 

Y digits=6 
ELSE 

Form$= “MD.2DE” 

Y digits—ll 
END IF 
PENUP 

MOVE Xlowl,Yl 
LABEL USING Forni$;Yl 


16 



1540 NEXT I 

1550 ! X AXES TITLE 

1560 Xmid=(Xhigh+Xlow)/2 

1570 Yl~Ylow -(Yhigh- Ylow)*(l + . 08*( Yhgdu- Ylgdu))/(Yhgdu- Ylgdu) 

1580 LORO 6 

1590 PEN UP 

1600 OSIZE 1.5*Csize jnit 

1610 MOVE Xmid.Yl 

1620 CALL Aoutst(Hlabel$) 

1630 REM LABEL Y AXES 

1640 Ymid=(Yhigh+Ylow)/2 

1650 XI— Xlow— (Xhigh— Xlow)*(1.875+.2*Y-digits* .09615*(Xhgdu— Xlgdu))/(Xhgdu— Xlgdu) 

1660 LORG 8 

1670 PENUP 

1680 MOVE Xl.Ymid 

1690 CALL Aoutst(Vlabel$) 

1700 ! PLOT TITLE 

1710 Yl= Yhigh+( Yhigh- Ylow)*(2+(Yhgdu- Ylgdu)*. 15)/( Yhgdu- Ylgdu) 

1720 Xmid=Xlow+(.5*(Xhgdu+Xlgdu)-Xlgdu)*(Xhigh-Xlow)/ (Xhgdu-Xlgdu) 

1730 LORG 6 

1740 CSIZE 1.8*Csize Jnit 

1750 PENUP 

1760 MOVE Xmid.Yl 

1770 CALL Aoutst(Header$) 

1780 Yl=Ylow-(Yhigh-Ylow)*(.20*(Yhgdu— Ylgdu)+4.5)/ (Yhgdu— Ylgdu) 

1790 LORG 4 

1800 CSIZE 1.6*Csize jnit 

1810 PENUP 

1820 MOVE Xmid.Yl 

1830 CALL Aoutst(Ptitle$) 

1840 LINE TYPE INT(Lintyp/100),Lintyp MOD 100 

1850 Rad- (.75+.011*( Yhgdu- Ylgdu))*( Yhigh- Ylow)/( Yhgdu- Ylgdu) 

1860 TVatio-( Yhigh- Ylow)/(Xhigh-Xlow)*(Xhgdu-Xlgdu)/( Yhgdu- Ylgdu) 

1870 Circle: Trad— Rad*. 7071 

1880 Narc=17 

1890 FOR Arc=l TO Narc 

1900 Ang=(Arc-l)*360/(Narc-l) 

1910 Xcir(Arc)=Trad*COS(Ang)/Tratio 

1920 Ycir(Arc)=Trad*SIN(Ang) 

1930 NEXT Arc 

1940 Square: FOR Arc- 1 TO 5 

1950 Ang-45 + ( Arc- 1)*90 

I960 XsqJArcJ^Rad+COSlAngJ/TVatio 

1970 Ysq( Arc)=Rad*SIN(Ang) 

1980 NEXT Arc 

1990 Diaiiiond:FOR Arc=l TO 5 

2000 Aug=(Arc— 1)*90 

2010 Xdi(Arc)=Rad*COS(Ang)/Tratio 

2020 Ydi(Arc)— Rad*SIN(Ang) 

2030 NEXT Arc 

2040 TYiangle:FOR Arc=l TO 4 

2050 Ang— 90+( Arc— 1)* 120 

2060 Xtr(Arc)=Rad*COS(Ang)/Tratio 


17 



2070 Ytr(Arc)=Rad*SIN(Ang) 

2080 NEXT Arc 

2000 UtrianglerFOR Arc=l TO 4 

2100 Ang=—90*f (Arc— 1)*120 

21 10 Xutr(Arc)=Rad*COS(Ang)/Tratio 

2120 Yutr( Arc) — Rad*SIN( Ang) 

2130 NEXT Arc 

2140 Star: FOR Arc=l TO 6 

2150 Ang— 90+ (Arc- 1)* 144 

2160 Xst(Arc)=Rad*COS(Ang)/Tratio 

2170 Yst(Arc)=Rad*SIN(Ang) 

2180 NEXT Arc 

2190 SUBEND 

2200 |** ****************************************************** ****** 
2210 {****************************************************** ******** 

2220 DsplayrSUB Dsplay(X-(*),Y_(*)) 

2230 OPTION BASE 1 

2240 COM /Plotl/ Xhgdu,Xlgdu,Yhgdu,Ylgdu,Xlow,Xhigh,Ylow,Yhigh, 

Isy m , Npoints, Linty p, Plotdev } Peiity p, Defpcn 

2250 COM /Labels/ Hlabel$(l0),Vlabel$[l0],Ptitle$[40],Header$[40) 

2200 Npts=N points 

2270 CALL Max(X-(*),Xmax) 

2280 CALL Min(X-(*),Xmiit) 

2290 CALL Max(Y_(*),Ymax) 

2300 CALL Min(Y_(*),Ymin) 

2310! PRINT w MIN,MAX w ,Xnun,Xmax,Ymin,Ymax 
2320 
2330 
2340 
2350 
2300 
2370 
2380 
2390 
2400 
2410 
2420 
2430 
2440 
2450 
2400 
2470 
2480 
2490 

2500 t************ + ************************************************* 
2510 i* ********************** ************************** ************* 
2520 Cplot:SUB Cplot(X-(*),Y_(*)) 

2530 OPTION BASE 1 

2540 COM /Plotl/ XhgdUjXlgdUjYhgdujYlgdujXloWjXhig^YloWjYhigh, 

IsynijNpointSjLintypjPlotdeVjPentyp^efpen 

2550 Npt8=Npoint8 

2500 CLIP ON 

2570 LINE TYPE INT(Lintyp/I00),Lintyp MOD 100 


CALL Pfranie(Xinin,Xmax,Yinin,Ymax) 

PEN Pentyp 
CLIP ON 
J=0 

FOR 1=1 TO Npts 

IF X_(I)<Xlow THEN GOTO 2470 
IF X (I)>Xhigli THEN GOTO 2480 
J=J+1 

IF J-l THEN 
PENUP 

MOVE X_(I),Y_(I) 

ELSE 

PLOT X_(I),Y_(I), — 1 
END IF 

IF lsym>0 THEN CALL Symbol(X_(I),Y-(I),Isyin) 
NEXT I 
PEN Defpen 
SUBEND 


18 



PEN Pentyp 
FOR 1=1 TO Npts 

IF X_(I)<Xlow THEN GOTO 2700 
IF X-(I)>Xhigh THEN GOTO 2710 
J=J+1 

IF J=l THEN 
PENUP 

MOVE X_( I) , Y_( I) 

ELSE 

PLOT X.(I),Y-(I),-1 
END IF 

IF lsym>0 THEN CALL SymboI(X-(I),Y..(I),Isym) 
NEXT I 
LINE TYPE 1 
PEN Defpen 


2580 
2590 
2600 
2610 
2620 
2630 
2640 
2650 
2660 
2670 
2680 
2690 
2700 
2710 
2720 
2730 SUBEND 

2740 j************************************************************** 
2750 j************************************************************** 
2760 SymbolrSUB Symbol(A,B>I s y ni kl) 

2770 OPTION BASE 1 

2780 COM /Plotl/ Xhgdu^lgdu^hgdu^lgdu^low^high^low^high, 

iBynijNpointSjLintypjPlotdeVjPentypjDefpen 

2790 COM /Syms/ Xcir(17),Ycir(17),Xsq(5),Ysq(5),Xdi(5),Ydi(5), 

Xtr(4),Ytr(4),Xutr(4),Yutr(4),Xst(6),Yst(6) 

2800 
2810 
2820 
2830 
2840 
2850 
2860 
2870 
2880 
2890 
2900 
2910 
2920 
2930 
2940 
2950 
2960 
2970 
2980 
2990 
3000 
3010 
3020 
3030 
3040 
3050 
3060 
3070 
3080 


LINE TYPE 1 

SELECT Isymbl 

CASE 1 ICIRCLE 

FOR Arc-1 TO 17 
IF Arc-1 THEN 

MOVE Xcir(Arc) + A,Ycir(Arc)+B 
ELSE 

PLOT Xcir(Arc)-bA,Ycir(Arc)+B,- 1 
END IF 
NEXT Arc 

CASE 2 [SQUARE 

FOR Arc-1 TO 5 
IF Arc-1 THEN 

MOVE Xsq(Arc) + A,Ysq(Arc)+ B 
ELSE 

PLOT Xsq(Arc) + A,Ysq(Arc)+B, — 1 
END IF 
NEXT Arc 

CASE 3 [DIAMOND 

FOR Arc-1 TO 5 
IF Arc-1 THEN 

MOVE Xdi(Arc)+A,Ydi(Arc)+B 
ELSE 

PLOT Xdi(Arc)+A,Ydi(Arc)+B,-l 
END IF 
NEXT Arc 

CASE 4 [TRIANGLE 

FOR Arc-1 TO 4 
IF Arc-1 THEN 


19 


3090 
3100 
3110 
3120 
3130 
3140 
3150 
3160 
3170 
3180 
3190 
3200 
3210 
3220 
3230 
3240 
3250 
3260 
3270 
3280 
3290 
3300 
3310 
3320 
3330 
3340 

3350 Max:SUB Max(A_(*),Ainax) 

3360 OPTION BASE 1 

3370 COM /Plotl/ XhgdUjXlgdu.YhgdujYIgdujXloWjXhigh^loWjYhigh, 

Isy in , N points, Linty p, Plotdev , Penty p, Defpen 
3380 Tenip~SIZE(A_,l) 

3390 REDIM A.(l:Npoints) 

3400 Amax^M AX(A_(*)) 

3410 REDIM A-(lrTemp) 

3420 SUBEND 

3430 j** ****************************************************** ****** 
3440 |************************************************************** 
3450 Min:SUB Min(A-(*),Amin) 

3460 OPTION BASE J 

3470 COM /Plotl/ Xhgdu,Xlgdu,Yhgdu,Ylgdu,Xlow,Xhigh,Ylow,Yhigh, 

Isy m , N points, Lintyp, Plotdev, Pentyp, Defpen 
3480 Temp=S IZE( A -,1) 

3490 REDIM A_(l:Npoints) 

3500 Aniin~MIN(A-(*)) 

3510 REDIM A_(l:Teinp) 

3520 SUBEND 

35'iO |********** **************************************************** 
3540 J************************************************************** 

3550 Ascale:SUB AscalefXmin.Xmax.XloWjXhigh.Nd.Inc.Rinc) 

3560 OPTION BASE 1 

3570 DATA 2,4,5,10 

3580 ALLOCATE Cval(4) 

3590 READ Cval(*) 

20 


MOVE Xtr(Arc)+A,Ytr(Arc)+B 
ELSE 

PLOT Xtr(Arc)+A,Ytr(Arc)+B,— 1 
END IF 
NEXT Arc 

CASE 5 ! UPSIDE DOWN TRIANGLE 

FOR Arc=l TO 4 
IF Arc=l THEN 

MOVE Xutr(Arc)+A,Yutr(Arc)+B 
ELSE 

PLOT Xutr(Arc)+A,Yutr(Arc)+B,-l 
END IF 
NEXT Arc 

CASE 6 ! STAR 

FOR Arc=l TO 6 
IF Arc=l THEN 

MOVE Xst(Arc)+A,Yst(Arc)+B 
ELSE 

PLOT Xst(Arc) + A,Yst(Arc)+B,-l 
END IF 
NEXT Arc 
END SELECT 
PENUP 
MOVE A,B 

LINE TYPE INT(Lintyp/100),Lintyp MOD 100 
SUBEND 



3600 Ndiv=5 

3610 lnc=(Xmax— Xinin)/Ndiv 

3620 IF lnc=0 THEN 

3630 Xmax=Xniax+.05 

3640 Xmin — Xmin — .05 

3650 Inc=(Xmax— Xmin)/Ndiv 

3660 END IF 

3670 Np=INT(LGT(ABS(Inc))) 

3680 lnc=Inc*10~( — Np) 

3690 J=1 

3700 IF InoCval(J) THEN GOTO Stepl 

3710 Inc=Cval(J) 

3720 Rinc=Inc 

3730 GOTO Step2 

3740 Stepl: J = J+1 

3750 GOTO 3700 

3760 Step2: IF Np<0 THEN GOTO Step3 

3770 FOR K=1 TO Np 

3780 Inc=Inc*10 

3790 NEXT K 

3800 GOTO Step4 

3810 Step3: FOR K=1 TO - Np 

3820 Inc— Inc/10 

3830 NEXT K 

3840 Step4: Xlow=INT(Ximn/Iiic)*Inc 

3850 Nd = INT((Xmax-Xlow)/Inc) + l 

3860 Xhigh=Xlow-fNd*Inc 

3870 DEALLOGATE Cval(*) 

3880 SUBEND 

3890 i************************************************************** 
3900 \************************************************************** 
3910 SymbhSUB Symbl(lsymbl) 

3920 OPTION BASE 1 

3930 COM /Plotl/ Xhgdu,Xlgdu,Yhgdu I Ylgdu ) Xlow,Xliigh,Ylow ) Yhigh, 

Isyin,Npoints,L>"typ,Plotdev,Pentyp,Defpen 

3940 Isym — Isymbl 

3950 SUBEND 

3960 \* ************************************************ ************* 
3970 j************************************************************** 

3980 Npts:SUB Npts(Npts) 

3990 OPTION BASE 1 

4000 COM /Plotl/ Xhgdu.Xlgdu.Yhgdu.Ylgdu.Xlow.Xhigh.Ylow.Yhigh, 

lsyiii,Npoints,L'>Ryp,Plotdev,Pentyp,Defpeii 

4010 Npoints-Npts 

4020 SUBEND 

4030 i************************************************************** 

4040 j************************************************************** 
4050 HlabelrSUB Hlabel(String$) 

4060 OPTION BASE 1 

4070 COM /Labels/ HIabel$|l0],Vlabel$[10],Ptitle$[40],Header$[40j 

4080 Number— LEN(String$) 

4090 Hlabel$[ l,Number|=String$ 

4100 SUBEND 


21 


4110 i************************* ************************************* 
4120 j************************************************************** 
4130 VlabeI:SUB Vlabel(String$) 


4140 

OPTION BASE 1 

4150 

COM /Labels/ Hlabel$(10j,Vlabel$[10|,Ptitle$[40],Header$|40] 

4100 

Number=LEN(String$) 

i 4170 

Vlabel$| l,Number|=String$ 

4180 

SUBEND 


4190 }************************************************************** 
4200 |**************************************************** ********** 
4210 Ptitle:SUB Ptitle(String$) 

4220 OPTION BASE 1 

4230 COM /Labels/ Hlabel$(10],Vlabel$[10],Ptitle$(40l,Header$(40] 

4240 Number=LEN(String$) 

4250 Ptitlc$| 1, Number] =String$ 

4200 SUBEND 

4270 \+** ******* it************************************************** 
4280 \** ************************ ************************************ 
4290 Title:SUB TitIe(String$) 

4300 OPTION BASE 1 

4310 COM /Labels/ HIabel$|10],Vlabel$(10],Ptitle$[40],Hcader$l40] 

4320 Number=LEN(String$) 

4330 Header$| 1 ,Nuinber|=String$ 

4340 SUBEND 

4350 \************************************************************** 
4300 \*** ****************************** ***************************** 

4370 LinerSUB Line(Linetype) 

4380 OPTION BASE 1 

4390 COM /Plotl/ Xhgdu^lgdu.YhgdUjYlgdUjXloWjXhighjYloWjYhigh, 

Isy m , Npoints, Lintyp, Plotdev , Pentyp, Defpen 
4400 L— 0 

4410 IF Linetype=-1 THEN L=200 

4420 IF Linetype=0 THEN L=100 

4430 IF Linetype=l THEN L=301 

4440 IF Plotdev=0 THEN 

4450 IF Linetype— 2 THEN L=705 

4400 IF Linetype=3 THEN L=400 

4470 IF Linetype- 4 THEN L=500 

4480 ELSE 

4490 IF Linetype=2 THEN L-705 

4500 IF Linetype-3 THEN L=402 

4510 IF Linetype=4 THEN L=508 

4520 END IF 

4530 Linty p—L 

4540 SUBEND 

4550 J+************************************************************* 
4500 \***** ******* ************************************************** 
4570 Dlinix:SUB DIimx(Xmin,Xmax, OPTIONAL Major_fcic_x,Minor-tic_x) 

4580 OPTION BASE 1 

4590 COM /Plotl/ Xhgdu,Xlgdu,Yhgdu,Ylgdu,Xlow,Xhigh,Ylow,Yhigh, 

Isym, Npoints, Lintyp, Plotdev, Pentyp, Defpen 
4600 COM /Plot2/ Ndx,Incx,Rincx,Ndy,Incy,Rincy 

4010 Xlow— Xniin 

22 


i 



I 

- 

4620 Xhigh=Xniax 

4630 IF NPAR-2 THEN SUBEXIT 

4640 IF Minor ,ticjc=0 THEN Minor _tic_x=Major_tic_x 

4650 Incx— Major _tic_x 

4660 Rincx=M ajor_tic_x/ Minor _tic_x 

4670 Ndx— INT((Xhigh-Xlow) /Major ,tic_x) 

4680 SUBEND 

4690 j************************************************************** 
4700 I************************************************************** 
4710 DIiniy:SUB DIimy(Ymin 1 Ymax, OPTIONAL Major _.tic_y, Minor _tic_y) 

4720 OPTION BASE 1 

4730 COM /Plot 1 / Xhgdu,Xlgdu,Yhgdu, Ylgdu, Xlow,Xhigh,Ylow,Yhigh, 

lay m , Npoints, Linty p, Plotdev , Pentyp, Defpen 

COM /PIot2/ Ndx,Incx,Rincx,Ndy,Incy,Rincy 
Ylow=Ymin 
Yhigh=Ymax 

IF NPAR— 2 THEN SUBEXIT 
IF Minor_tic_y=0 THEN Minor_tic_y=Major..tic_y 
Incy— Major _tic.y 
Rincy^ Major tic, y/Minor_tic_y 
Ndy=INT((Yhigh- Ylow) /Major ,tic_y) 

SUBEND 

4830 j ******************************************* ******************* 
4840 |************************************************************** 
4850 Slimx:SUB Slimx(XJow,XJiigh) 

4860 OPTION BASE 1 

4870 COM /Plotl/ Xhgdu,XIgdu,Yhgdu,YIgdu,XIow,Xhigh,YIow,Yhigh, 

lay m, Npoints, Linty p, Plotdev, Pentyp, Defpen 
4880 Xlgdu = X low* MAX(1, RATIO) *100 

4890 Xhgdu- X, high *MAX(1, RATIO) *100 

4900 VIEWPORT XIgdu,Xhgdu, Ylgdu, Yhgdu 

4910 SUBEND 

4920 |************************************************************** 
4930 ]************************************************************** 
4940 SlimyiSUB Slimy(YJow,YJiigh) 

4950 OPTION BASE 1 

4960 COM /Plotl/ Xhgdu,Xlgdu, Yhgdu, Ylgdu, XIow,Xhigh, Ylow, Yhigh, 

lay m, Npoints, Linty p, Plotdev, Pentyp, Defpen 
4970 Ylgdu Ylow*MAX(l, 1/RATIO) *100 

4980 Yhgdu— Y- high* MAX( 1,1 /RATIO) *100 

4990 VIEWPORT Xlgdu,Xhgdu, Ylgdu, Yhgdu 

5000 SUBEND 

5010 ! ************************************************************** 
5020 j************************************************************** 
5030 Aoiitst:SUB Aoutst(String$, OPTIONAL X_per_cent,Y_per_cent,Ilorg, C_size) 
5040 OPTION BASE 1 

5050 COM /Plotl/ Xhgdu,Xlgdu, Yhgdu, Ylgdu, XIow,Xhigh,Ylow,Yhigh, 

lay in, Npoints, Linty p, Plotdev, Pentyp, Defpen 


5060 

PEN Defpen 

5070 

LINE TYPE 1 

5080 

CLIP OFF 

5090 

SELECT NPAR 

5100 

CASE 1 


4740 

4750 

4760 

4770 

4780 

4790 

4800 

4810 

4820 


23 


5110 LABEL TRIM$(String$) 

5120 SUBEXIT 

5130 CASE 3 

5140 LORO 3 

5150 CASE 4 

5160 LORG Ilorg 

5170 CASE 5 

5180 LORG Ilorg 

5100 CS1ZE C_si*e 

5200 END SELECT 

5210 MOVE XIow-f X.per-cent*(Xliigli-Xlow),Ylow+Y-per.cent* (Yhigh— Ylow) 

5220 LABEL TRIM$(String$) 

5230 CLIP ON 

5240 SUBEND 

5250 j********************************************** **************** 

5260 j*********** *************************************************** 

5270 Place:SlJB Place(Iplace) 

5280 OPTION BASE 1 

5290 COM /Plotl/ Xhgdu, Xlgdu, Yhgdu, Ylgdu, Xlow,Xhigh, Ylow, Yhigh, 

Isy in , N points, Linty p, Plotdev , Penty p, Defpen 
5300 X-gdu= 100* MAX(1, RATIO) 

5310 Y_gdu=100*MAX(l, 1/RATIO) 

5320 SELECT Iplace 

5330 CASE 1 

5340 Xhgdu=.85*X_gdu 

5350 X lgd u = . 25 * X gd u 

5360 Y h gd u = . 85 * Y . gd u 

5370 Ylgdu -.30*Y gdu 

5380 CASE 2 

5390 Xhgdu = .45*X_gdu 

5400 Xlgdu = .10*X_gdu 

5410 Yhgdu — .75*Y-gdu 

5420 Ylgdu “.30* Y _gdu 

5430 CASE 3 

5440 Xhgdu-.95*X_gdu 

5450 Xlgdu = ,60*X_gdu 

5460 Yhgdu=. 75* Y-gdu 

5470 Ylgdu=.30*Y_gdu 

5480 CASE 4 

5490 Xhgdu-.5*X_gdu 

5500 Xlgdu — .25* X_gdu 

5510 Yhgdu — .80* Y-gdu 

5520 Ylgdu = .60* Y-gdu 

5530 CASE 5 

5540 Xhgdu = .5*X-gdu 

5550 Xlgdu-.25*X-gdu 

5560 Yhgdu — .40* Y-gdu 

5570 Ylgdu — .20* Y.gdu 

5580 CASE 6 

5590 Xhgdu— .9*X_gdu 

5600 Xlgdu -.65*X_gdu 

5610 Yhgdu = .80* Y-gdu 

5620 Ylgdu=. 60* Y.gdu 


24 



5630 CASE 7 

5640 Xhgdu=.9*X_gdu 

5650 Xlgdu=.65*X_gdu 

5660 Yhgdu=.40*Y_gdu 

5670 Ylgdu = .20*Y.gdu 

5680 END SELECT 

5690 VIEWPORT Xlgdii,Xhgdu,Ylgdu,Yhgdu 

5700 SUBEND 

5710 i* ******************************************* ****************** 

5720 |* ******************************************* ****************** 

5730 Newpag:SUB Newpag 

5740 OPTION BASE 1 

5750 GCLEAR 

5760 SUBEND 

5770 I************************************************************** 

5780 i************************************************************** 

5790 Pen.colorrSUB Pen .color (Ipen) 

5800 OPTION BASE 1 

5810 COM /Plotl/ XhgdUjXlgd^YhgdUjYlgdUjXloWjXhighjYloWjYhigh, 

Isym, Npoiiits,Lintyp,Plotdev, Pentyp, Defpen 
5820 Pentyp— Ipen 

5830 SUBEND 

5840 j************************************************************** 
5850 j******************************************* ******************* 
5860 Pen..def:SUB Pen-def(Ipen) 

5870 OPTION BASE 1 

5880 COM /Plotl/ Xhgdu,XIgdu,Yhgdu,Ylgdu,Xlow,Xhigh,Ylow,Yhigli, 

Isy in, N points, Lintyp,Plotdev, Pentyp, Defpen 
5800 Defpen = Ipen 

5000 SUBEND 

5010 I************************************************************** 
5020 \** ******************* ***************************************** 
5930 Set pens:SUB Set.pens(Start-pen, OPTIONAL Re.set) 

5040 OPTION BASE 1 

5050 DIM Red(15),Green(15),Blue(15) 

5060 SELECT NPAR 

5970 CASE 1 

5080 DATA 0 , 0, 0, 0, 0, 0, .67, 1, 1, 1, 1, 1, 1, 1, 1 

5900 READ Red(*) 

6000 DATA 0 , .33, .67, 1, 1, 1, 1, 1,. 82, .53, .29, 0,.33,.67, 1 

6010 READ Green(«) 

6020 DATA 1 , 1, 1,.67,.33, 0, 0, 0, 0, 0, 0, 0,.33,.67, 1 

6030 READ Blue(*) 

6040 SET PEN 0 COLOR 0,1,0 

6050 FOR 1=1 TO 15 

6060 J=Start.pen+I 

6070 IF J> 15 THEN J=J-15 

6080 SET PEN I INTENSITY Red(J),Greei.(J),Blue(J) 

6090 NEXT I 

6100 CASE 2 

6110 PLOTTER IS 3, “INTERNAL” ;COLOR MAP 

6120 END SELECT 

6130 SUBEND 


25 


6140 Legend:SUB Legend(N,Xl,Yl,Sym,Linetype,Pen,Legen$) 

6150 OPTION BASE 1 

6160 DIM String$(20] 

6170 COM /Plotl / Xhgdu,Xlgdu,Yhgdu,Ylgdu,Xlow,Xlrigh,Ylow,Yhigh, 

Isy m , N points, Lintyp, Plotdev , Penty p, Defpen 

6180 CLIP OFF 

6100 XI — Xlow+Xl*(Xhigh-Xlow) 

6200 Yl = Y)ow+Yl*(Yliigh-Ylow) 

6210 IF N-l THEN MOVE Xl.Yl 

6220 Xscale=(Xhigh-Xlow)/(Xhgdu-Xlgdu) 

6230 Yscale=(Yhigh-Ylow)/(Yhgdu-Ylgdu) 

6240 X2=Xl + 5*Xscale 

6250 Xp=Xl 3*Xscale 

6260 Xn=Xl-f 3*Xscale 

6270 IF Linetype=— 1 THEN L=200 

6280 IF Linetype=0 THEN L=100 

6200 IF Linetype=l THEN L=301 

6300 IF Plotdev=0 THEN 

6310 IF Linetype=2 THEN L=705 

6320 IF Linetype=3 THEN L=400 

6330 IF Linetype=4 THEN L=500 

6340 ELSE 

6350 IF Linetype=2 THEN L=708 

6360 IF Linetype=3 THEN L=404 

6370 IF Linetype— 4 THEN L=508 

6380 END IF 

6300 Osi*e-init=(Yligdu-Ylgdu)*.030+1.2 

6400 CSIZE ('size .in it 

6410 Y2— Y 1 (N-l)*3.5*Yscale 

6420 PEN Pen 

6430 CALL Syinbol(Xl,Y2,Syin) 

6440 IF Line type—- 1 THEN 6480 

6450 LINE TYPE INT(L/100),L MOD 100 

6460 MOVE Xp,Y2 

6470 DRAW Xn,Y2 

6480 LINE TYPE 1 

6400 LORC 2 

6500 PEN Defpen 

6510 MOVE X2.Y2 

6520 LABEL Legen$ 

6530 CLIP ON 

6540 SUBEND 

6550 Disvec:SUB Disvec(X(*),Y(*),Vx(*),Vy(*),Iscale) 

6560 OPTION BASE 1 

6570 COM /Plotl/ Xligdu.XlgdujYhgdu.Ylgdi^Xlow.Xhigh.Ylow^Yhigh, 

Isy m, Npoints, Lintyp,Plotdev, Penty p, Defpen 

6580 Npts=Npoints 

6500 CALL Max(X(*),Xmax) 

6600 CALL Min(X(*),Xmin) 

6610 CALL Max(Y(*),Ymax) 

6620 CALL Min(Y(*),Ymin) 

6630 CALL Pframe(Xmin,Xniax,Ymin,Ymax) 

6640 ! CALCULATE XSCALE AND YSCALE TO TAKE CARE OF 


26 



6650 ! VARYING ASPECT RATIOS 

6660 Xscale=(Xhigh — Xlow)/(Xhgdu-Xlgdu) 

6670 Yscale=( Yliigh— Ylow)/(Yligdu — YIgdu) 

6680 PEN Pentyp 

6690 FOR 1=1 TO Npts 

6700 PENUP 

6710 MOVE X(I),Y(I) 

6720 RPLOT Iscale*Xscale*Vx(I),Iscale* Yscale*Vy(I), — 1 

6730 ! DRAW ARROWHEAD 

6740 PENUP 

6750 R=SQR((Vx(I)*Xscale)"2+(Vy(I)*Yscale) '2)*Iscale 

6760 Tlieta=ATN((Yscale*Vy(I))/(Xscale*Vx(I))) 

6770 Xtip=X(I)+Vx(I)*Xscale*Iscale*.95 

6780 Ytip=Y(I)+Vy(I)*Yscale*Iscale*.95 

6790 Thetal=Theta+4. 76364 

6800 Xl=COS(Thetal)*.07*R+Xtip 

6810 Yl=SIN(Thetal)*.07*R+Ytip 

6820 PENUP 

6830 MOVE X1,Y 1 

6840 Theta2=Theta— 4.76364 

6850 X2=COS(Theta2)*.07*R+Xtip 

6860 Y2=SIN(Theta2)*.07*R+Ytip 

6870 PLOT X2,Y2,-1 

6880 X3=COS(Theta)*.2*R+Xtip 

6890 Y3=SIN(Theta)*.2*R+Ytip 

6900 PLOT X3,Y3,-1 

6910 PLOT Xl,Yl,-l 

6920 NEXT I 

6930 PEN Defpen 

6940 SUBEND 

6950 ;************************************************************** 

6960 j************************************************************** 

6970 Finifct:SUB Finitfc 

6980 OPTION BASE 1 

6990 GRAPHICS OFF 

7000 ALPHA ON 

7010 PEN 0 

7020 SUBEND 

7040 i************************************************************** 
7050 SUB Polyfit(X(*),Y(*),D,Coef(*),Coef_of.det ) Corr.coef, 

St. err. est, OPTIONAL Fit_syin,Fit Jin,Fitxol) 

7060 OPTION BASE 1 

7070 COM /Plotl/ Xhgdi^XIgdu.Yhgdu^lgdu.Xlow.Xhigh.Ylow.Yhigh, 

lay in, Npoints.Lintyp.Plotdev, Pentyp, Defpen 
7080 DIM A(13),R(7,8),T(8) 

7090 N=Npoints 

7100 A(1)=N 

7110 FOR 1=1 TO N 

7120 FOR J=2 TO 2*D+1 

7130 A(J) = A(J)+X(I)‘(J-1) 

7140 NEXT J 

7150 FOR K=1 TO D+l 


27 



7160 

7170 

7180 

7190 

7200 

7210 

7220 

7230 

7240 

7250 

7260 

7270 

7280 

7290 

7300 

7310 

7320 

7330 

7340 

7350 

7360 

7370 

7380 

7390 

7400 

7410 

7420 

7430 

7440 

7450 

7460 

7470 

7480 

7490 

7500 

7510 

7520 

7530 

7540 

7550 

7560 

7570 

7580 

7590 

7600 

7610 

7620 

7630 

7640 

7650 

7660 

7670 

7680 


R(K,D-f 2)=T(K)+Y(I)*X(I)*(K~1) 
T(K)=T(K)+Y(I)*X(I)*(K-1) 
NEXT K 

T(Df2)=T(D+2)-fY(I)~2 
NEXT I 

FOR J=1 TO D-f 1 
FOR K=1 TO D-f 1 
R(J,K)=A(J-fK-l) 

NEXT K 
NEXT J 

FOR J=1 TO D+l 
FOR K=J TO D-f 1 

IF R(K,J)<>0 THEN 7320 
NEXT K 

PRINT “NO UNIQUE SOLUTION” 
GOTO 7830 
FOR 1=1 TO D-f 2 
S=R(J,I) 

R(J,I)=R(K,I) 

R(K,I)=S 
NEXT I 
Z=1/R(J,J) 

FOR 1=1 TO D-f 2 
R(J,I)=Z*R(J,I) 

NEXT I 

FOR K=1 TO D-f 1 
IF K=J THEN 7470 
Z= R(K,J) 

FOR 1=1 TO D-f 2 

R(K,I) = R(K,I)+Z*R(J,I) 

NEXT I 
NEXT K 
NEXT J 
FOR J=0 TO D 

Ooef( J f 1) = R(J+ l,D+2) 

NEXT J 
P=0 

FOR J=2 TO D+l 

P=Pf R(J,D-f2)*(T(J)-A(J)*T(l)/N) 
NEXT J 

Q=T(D f2)-T(l) A 2/N 
Z=Q P 
I--N-D l 
J=P/Q 

IF ABS(Z)<1.E~6 THEN Z=0 
Coef_of det=J 
Corr_coef=SQR( J) 

St-err_e8t=SQR(Z/I) 

IF NPAR<8 THEN SUBEXIT 
ALLOCATE Af(N),Bf(N),F(D+l) 

FOR 1=1 TO N 
Bf(I)=0 
Af(I)=X(I) 


28 



7690 

7700 

7710 

7720 

7730 

7740 

77r,0 

7760 

7770 

7780 

7790 

7800 

7810 

7820 

7830 


F UH 

FOR U-2 TO D-f 1 
F(IO=Af(I)-(L-l) 

NEXT L 

FOR 1=1 TO D-fl 

Bf(I)=Bf(I)+Coef(L)*F(L) 
NEXT L 
NEXT l 

CALL Syinbl(Fit-sym) 

CALL Line(Fit-lin) 

('ALL Pen-color(Fit-col) 

CALL Npts(N) 

CALL Cplot(Af(*),Bf(*)) 
DEALLOCATE Af(*),Bf(*),F(*) 
SUBEND 


29 



30 


Figure 1. Plot produced by Example Code 1 

















0*0 









36 


ce 






Figure 7b. Location and size of plots produced using Place(Iplace). 




NASA Report Documentation Page 

N.ifcin.jl Iwvvfcrtc rtf*! r '- y 

1. Report No" ~ 2. Government Accession No. 

NASA TM- 100606 

4. Title and Subtitle 

PL0T300 - A Tektronics PL0T10 Emulator for HP 9000 
Series 200/300 Computers 


7. Author(s) 

Scott 0. Kjelgaard 


9. Performing Organization Name and Address 

NASA Langley Research Center 
Hampton, VA 23665-5225 

12. Sponsoring Agency Name and Address 

National Aeronautics and Space Administration 
Washington, DC 20546-0001 

15. Supplementary Notes 


16. Abstract 

A software package which emulates the Tektronics PL0T10 Graphics package on 
Hewlett-Packard 9000 Series 200/300 computers is described. The Software is 
written in HP Rocky Mountain BASIC and can be run under BASIC revisions 3.0 and 
4.0. Although this subroutine library emulates a subset of PL0T10, several 
subroutines have been added which enhance basic plot generation. Example codes 
using PL0T300 and descriptions of the subroutines are included in the text. 



3. Recipient's Catalog No. 

5. Report Date 

May 1988 

6. Performing Organization Code 

8. Performing Organization Report No. 

10. Work Unit No. 

533-02-01-03 

11. Contract or Grant No. 

13. Type of Report and Period Covered 

Technical Memorandum 

14. Sponsoring Agency Code 




